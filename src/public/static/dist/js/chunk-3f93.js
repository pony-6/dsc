(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f93"],{2662:function(t,e,i){},2909:function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return n(t)||s(t)||a()}i.d(e,"a",function(){return o})},2994:function(t,e,i){"use strict";i("68ef"),i("c0c2")},"2bdd":function(t,e,i){"use strict";var n=i("fe7e"),s=i("023d"),a=i("db78");e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("default"),i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],class:t.b("loading")},[t._t("loading",[i("loading"),i("span",{class:t.b("loading-text")},[t._v(t._s(t.loadingText||t.$t("loadingTip")))])])],2)],2)},name:"list",model:{prop:"loading"},props:{loading:Boolean,finished:Boolean,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},loadingText:String},mounted:function(){this.scroller=s["a"].getScrollEventTarget(this.$el),this.handler(!0),this.immediateCheck&&this.$nextTick(this.check)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{loading:function(){this.$nextTick(this.check)},finished:function(){this.$nextTick(this.check)}},methods:{check:function(){if(!this.loading&&!this.finished){var t=this.$el,e=this.scroller,i=s["a"].getVisibleHeight(e);if(i&&"none"!==s["a"].getComputedStyle(t).display&&null!==t.offsetParent){var n=s["a"].getScrollTop(e),a=n+i,o=!1;if(t===e)o=e.scrollHeight-a<this.offset;else{var r=s["a"].getElementTop(t)-s["a"].getElementTop(e)+s["a"].getVisibleHeight(t);o=r-i<this.offset}o&&(this.$emit("input",!0),this.$emit("load"))}}},handler:function(t){this.binded!==t&&(this.binded=t,(t?a["b"]:a["a"])(this.scroller,"scroll",this.check))}}})},"42d1":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dscLoading?i("div",{staticClass:"cloading",style:{height:t.clientHeight+"px"},on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[i("div",{staticClass:"cloading-mask"}),t._t("text",[t._m(0)])],2):t._e()},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cloading-main"},[n("img",{attrs:{src:i("f8b2")}})])}],a=i("ade3"),o=(i("7f7f"),i("ac1e"),i("543e")),r={props:["dscLoading"],data:function(){return{clientHeight:""}},components:Object(a["a"])({},o["a"].name,o["a"]),created:function(){},mounted:function(){this.clientHeight=document.documentElement.clientHeight},methods:{}},c=r,u=(i("a637"),i("2877")),l=Object(u["a"])(c,n,s,!1,null,"9a0469b6",null);l.options.__file="DscLoading.vue";e["a"]=l.exports},"6ab3":function(t,e,i){},a637:function(t,e,i){"use strict";var n=i("2662"),s=i.n(n);s.a},ac1e:function(t,e,i){"use strict";i("68ef")},c0c2:function(t,e,i){},c3a6:function(t,e,i){"use strict";i("68ef")},de32:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-box",style:{height:t.ch+"px"}},[i("div",{attrs:{id:"container"}}),i("div",{staticClass:"list-box"},[i("div",{staticClass:"list_scroll_box"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("lang.no_more")},on:{load:t.getPostList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.postList,function(e,n){return i("div",{key:e.phone,staticClass:"list_item",on:{click:function(e){t.changePost(n)}}},[n==t.currentIndex?i("van-icon",{attrs:{name:"checked",color:"#f92028",size:"2rem"}}):i("span",{staticClass:"item_checked_icon"}),i("div",{staticClass:"item-main"},[i("div",[i("span",[t._v(t._s(e.pick_up_point))]),i("span",[t._v(t._s(e.distance)+"km")])]),i("div",[t._v(t._s(t.$t("lang.post_address"))+": "+t._s(e.address))]),i("div",[t._v(t._s(t.$t("lang.label_tel"))+" "+t._s(e.phone))])])],1)}))],1)],1),i("div",{staticClass:"btn btn-submit box-flex",on:{click:t.usePost}},[t._v(t._s(t.$t("lang.post_use")))])]),i("DscLoading",{attrs:{dscLoading:t.dscLoading}})],1)},s=[],a=i("2909"),o=(i("96cf"),i("1da1")),r=(i("e7e5"),i("d399")),c=(i("c3a6"),i("ad06")),u=(i("2994"),i("2bdd")),l=(i("68ef"),i("6ab3"),i("fe7e")),d=i("023d"),h=i("3875"),f=Object(l["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[i("div",{class:t.b("track"),style:t.style,on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd,touchcancel:t.onTouchEnd}},[i("div",{class:t.b("head")},["normal"===t.status?t._t("normal"):t._e(),"pulling"===t.status?t._t("pulling",[i("span",{class:t.b("text")},[t._v(t._s(t.pullingText||t.$t("pulling")))])]):t._e(),"loosing"===t.status?t._t("loosing",[i("span",{class:t.b("text")},[t._v(t._s(t.loosingText||t.$t("loosing")))])]):t._e(),"loading"===t.status?t._t("loading",[i("div",{class:t.b("loading")},[i("loading"),i("span",[t._v(t._s(t.loadingText||t.$t("loadingTip")))])],1)]):t._e()],2),t._t("default")],2)])},name:"pull-refresh",mixins:[h["a"]],props:{disabled:Boolean,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},animationDuration:{type:Number,default:300},headHeight:{type:Number,default:50}},data:function(){return{status:"normal",height:0,duration:0}},computed:{style:function(){return{transition:this.duration+"ms",transform:"translate3d(0,"+this.height+"px, 0)"}},untouchable:function(){return"loading"===this.status||this.disabled}},mounted:function(){this.scrollEl=d["a"].getScrollEventTarget(this.$el)},watch:{value:function(t){this.duration=this.animationDuration,this.getStatus(t?this.headHeight:0,t)}},methods:{onTouchStart:function(t){this.untouchable||this.getCeiling()&&(this.duration=0,this.touchStart(t))},onTouchMove:function(t){this.untouchable||(this.touchMove(t),!this.ceiling&&this.getCeiling()&&(this.duration=0,this.startY=t.touches[0].clientY,this.deltaY=0),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(this.getStatus(this.ease(this.deltaY)),t.cancelable&&t.preventDefault()))},onTouchEnd:function(){this.untouchable||this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.getStatus(this.headHeight,!0),this.$emit("input",!0),this.$emit("refresh")):this.getStatus(0))},getCeiling:function(){return this.ceiling=0===d["a"].getScrollTop(this.scrollEl),this.ceiling},ease:function(t){var e=this.headHeight;return t<e?t:t<2*e?Math.round(e+(t-e)/2):Math.round(1.5*e+(t-2*e)/4)},getStatus:function(t,e){this.height=t;var i=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing";i!==this.status&&(this.status=i)}}}),g=i("2b0e"),p=i("4328"),m=i.n(p),v=i("42d1");g["default"].use(f),g["default"].use(u["a"]),g["default"].use(c["a"]),g["default"].use(r["a"]);var _=window.AMap,b={components:{DscLoading:v["a"]},data:function(){return{postList:[],currentIndex:0,loading:!1,finished:!1,dscLoading:!0,refreshing:!1,page:1,showMap:!1,ch:0}},created:function(){this.ch=document.documentElement.clientHeight||document.body.clientHeight},methods:{initMap:function(){this.showMap=!0;var t=JSON.parse(sessionStorage.getItem("addressLngLat")),e=this.postList[0],i=e.lng,n=e.lat,s=new _.LngLat(i,n),a=new _.Map("container",{zoom:15,center:s,viewMode:"3D",resizeEnable:!0}),o=new _.Marker({position:new _.LngLat(t.lng,t.lat)});o.setLabel({offset:new _.Pixel(10,0),content:"<div class='marker_info_label'><div></div><span>".concat(this.$t("lang.post_shipping_address"),"</span></div>"),direction:"right"}),a.add(o),this.map=a,_.plugin(["AMap.ToolBar","AMap.Scale"],function(){a.addControl(new _.ToolBar),a.addControl(new _.Scale)}),this.dscLoading=!1,this.openInfoCart(this.postList[0])},openInfoCart:function(t){this.map.clearInfoWindow();var e=new _.LngLat(t.lng,t.lat),i=new _.Marker({position:e});this.map.add(i);var n='<div class="info_cart">\n                    <div class="info_top">\n                      <div>'.concat(t.pick_up_point,"</div>\n                      <div>").concat(this.$t("lang.post_address"),": ").concat(t.address,"</div>\n                      <div>").concat(this.$t("lang.label_tel")," ").concat(t.phone,'</div>\n                    </div>\n                    <div class="info_bottom">\n                      <span>').concat(this.$t("lang.post_distance_address"),": ").concat(t.distance,'km</span>\n                    </div>\n                    <div class="daosanjiao"></div>\n                  </div>'),s=new _.InfoWindow({autoMove:!0,isCustom:!0,content:n,offset:new _.Pixel(0,-33)});s.open(this.map,e)},getPostList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("".concat(window.ROOT_URL,"api/cgroup/flow/postlist"),m.a.stringify({page:this.page,size:10}));case 2:if(e=t.sent,i=e.data.data.post_list,n=e.status,this.loading=!1,200==n){t.next=8;break}return t.abrupt("return",Object(r["a"])(this.$t("lang.post_msg_fail")));case 8:this.refreshing&&(this.postList=[],this.currentIndex=0,this.refreshing=!1),i.length<10?this.finished=!0:this.page++,this.postList=[].concat(Object(a["a"])(this.postList),Object(a["a"])(i)),this.showMap||this.initMap();case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onRefresh:function(){this.finished=!1,this.showMap=!1,this.loading=!0,this.page=1,this.getPostList()},changePost:function(t){t!=this.currentIndex&&(this.currentIndex=t,this.openInfoCart(this.postList[t]))},usePost:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.dscLoading){t.next=2;break}return t.abrupt("return");case 2:return this.dscLoading=!0,e=this.postList[this.currentIndex].leader_id,t.next=6,this.$store.dispatch("setChangeConsignee",{leader_id:e});case 6:if(i=t.sent,n=i.status,this.dscLoading=!1,"success"==n){t.next=11;break}return t.abrupt("return",Object(r["a"])(this.$t("lang.post_server_busy")));case 11:this.$route.query&&(this.$route.query.rec_type?"supplier"==this.$route.query.rec_type?this.$router.push({name:this.$route.query.routerLink,query:{rec_type:this.$route.query.rec_type,rec_id:this.$route.query.rec_id,leader_id:e}}):this.$router.push({name:this.$route.query.routerLink,query:{rec_type:this.$route.query.rec_type,type_id:this.$route.query.type_id,team_id:this.$route.query.team_id,leader_id:e}}):"crowdfunding-checkout"==this.$route.query.routerLink?this.$router.push({name:this.$route.query.routerLink,query:{pid:this.$route.query.pid,id:this.$route.query.id,number:this.$route.query.number,leader_id:e}}):this.$router.push({name:this.$route.query.routerLink,query:{leader_id:e}}));case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},y=b,$=(i("f309"),i("2877")),x=Object($["a"])(y,n,s,!1,null,"7f5681de",null);x.options.__file="CommunityPost.vue";e["default"]=x.exports},f016:function(t,e,i){},f309:function(t,e,i){"use strict";var n=i("f016"),s=i.n(n);s.a},f8b2:function(t,e,i){t.exports=i.p+"img/loading.gif"}}]);
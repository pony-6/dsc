(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bf8"],{"0653":function(e,t,a){"use strict";a("68ef")},"09d6":function(e,t,a){"use strict";a("4917");var i=navigator.userAgent,n=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,s=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);function r(){return!!/micromessenger/.test(i.toLowerCase())}t["a"]={isWeixinBrowser:r,isAndroid:n,isiOS:s}},1146:function(e,t,a){},3855:function(e,t,a){"use strict";a("e7e5");var i=a("d399"),n=a("bf0f");function s(){i["a"].loading({duration:600,mask:!0,message:n["a"].t("lang.loading")})}function r(e,t){var a,i,n=document.createElement("canvas"),s=n.getContext("2d"),r=document.createElement("canvas"),o=r.getContext("2d"),l=(e.src.length,e.width),c=e.height;if((a=l*c/4e6)>1?(a=Math.sqrt(a),l/=a,c/=a):a=1,n.width=l,n.height=c,s.fillStyle="#fff",s.fillRect(0,0,n.width,n.height),(i=l*c/1e6)>1){i=~~(Math.sqrt(i)+1);var u=~~(l/i),d=~~(c/i);r.width=u,r.height=d;for(var f=0;f<i;f++)for(var h=0;h<i;h++)o.drawImage(e,f*u*a,h*d*a,u*a,d*a,0,0,u,d),s.drawImage(r,f*u,h*d,u,d)}else s.drawImage(e,0,0,l,c);var m=n.toDataURL("image/jpeg",.3);return r.width=r.height=n.width=n.height=0,m}t["a"]={loadingData:s,compress:r}},4917:function(e,t,a){"use strict";var i=a("cb7c"),n=a("9def"),s=a("0390"),r=a("5f1b");a("214f")("match",1,function(e,t,a,o){return[function(a){var i=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=o(a,e,this);if(t.done)return t.value;var l=i(e),c=String(this);if(!l.global)return r(l,c);var u=l.unicode;l.lastIndex=0;var d,f=[],h=0;while(null!==(d=r(l,c))){var m=String(d[0]);f[h]=m,""===m&&(l.lastIndex=s(c,n(l.lastIndex),u)),h++}return 0===h?null:f}]})},"4ddd":function(e,t,a){"use strict";a("68ef"),a("dde9")},"565f":function(e,t,a){"use strict";var i=a("c31d"),n=a("fe7e"),s=a("a142");t["a"]=Object(n["a"])({render:function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("cell",{class:t.b((e={error:t.error,disabled:t.$attrs.disabled,"min-height":"textarea"===t.type&&!t.autosize},e["label-"+t.labelAlign]=t.labelAlign,e)),attrs:{icon:t.leftIcon,title:t.label,center:t.center,border:t.border,"is-link":t.isLink,required:t.required}},[t._t("left-icon",null,{slot:"icon"}),t._t("label",null,{slot:"title"}),i("div",{class:t.b("body")},["textarea"===t.type?i("textarea",t._g(t._b({ref:"input",class:t.b("control",t.inputAlign),attrs:{readonly:t.readonly},domProps:{value:t.value}},"textarea",t.$attrs,!1),t.listeners)):i("input",t._g(t._b({ref:"input",class:t.b("control",t.inputAlign),attrs:{type:t.type,readonly:t.readonly},domProps:{value:t.value}},"input",t.$attrs,!1),t.listeners)),t.showClear?i("icon",{class:t.b("clear"),attrs:{name:"clear"},on:{touchstart:function(e){return e.preventDefault(),t.onClear(e)}}}):t._e(),t.$slots.icon||t.icon?i("div",{class:t.b("icon"),on:{click:t.onClickIcon}},[t._t("icon",[i("icon",{attrs:{name:t.icon}})])],2):t._e(),t.$slots.button?i("div",{class:t.b("button")},[t._t("button")],2):t._e()],1),t.errorMessage?i("div",{class:t.b("error-message"),domProps:{textContent:t._s(t.errorMessage)}}):t._e()],2)},name:"field",inheritAttrs:!1,props:{value:[String,Number],icon:String,label:String,error:Boolean,center:Boolean,isLink:Boolean,leftIcon:String,readonly:Boolean,required:Boolean,clearable:Boolean,labelAlign:String,inputAlign:String,onIconClick:Function,autosize:[Boolean,Object],errorMessage:String,type:{type:String,default:"text"},border:{type:Boolean,default:!0}},data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&this.isDef(this.value)&&!this.readonly},listeners:function(){return Object(i["a"])({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur})}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(e){void 0===e&&(e=this.$refs.input);var t=e,a=t.value,i=this.$attrs.maxlength;return this.isDef(i)&&a.length>i&&(a=a.slice(0,i),e.value=a),a},onInput:function(e){this.$emit("input",this.format(e.target))},onFocus:function(e){this.focused=!0,this.$emit("focus",e),this.readonly&&this.blur()},onBlur:function(e){this.focused=!1,this.$emit("blur",e)},onClickIcon:function(){this.$emit("click-icon"),this.onIconClick&&this.onIconClick()},onClear:function(){this.$emit("input",""),this.$emit("clear")},onKeypress:function(e){if("number"===this.type){var t=e.keyCode,a=-1===String(this.value).indexOf("."),i=t>=48&&t<=57||46===t&&a||45===t;i||e.preventDefault()}"search"===this.type&&13===e.keyCode&&this.blur(),this.$emit("keypress",e)},adjustSize:function(){var e=this.$refs.input;if("textarea"===this.type&&this.autosize&&e){e.style.height="auto";var t=e.scrollHeight;if(Object(s["d"])(this.autosize)){var a=this.autosize,i=a.maxHeight,n=a.minHeight;i&&(t=Math.min(t,i)),n&&(t=Math.max(t,n))}t&&(e.style.height=t+"px")}}}})},"66b9":function(e,t,a){"use strict";a("68ef")},7401:function(e,t,a){e.exports=a.p+"img/user-1.png"},"8a58":function(e,t,a){"use strict";a("68ef"),a("4d75")},"8f80":function(e,t,a){"use strict";var i=a("fe7e");t["a"]=Object(i["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b()},[e._t("default"),a("input",e._b({ref:"input",class:e.b("input"),attrs:{type:"file",accept:e.accept,disabled:e.disabled},on:{change:e.onChange}},"input",e.$attrs,!1))],2)},name:"uploader",inheritAttrs:!1,props:{disabled:Boolean,beforeRead:Function,afterRead:Function,accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE}},methods:{onChange:function(e){var t=this,a=e.target.files;!this.disabled&&a.length&&(a=1===a.length?a[0]:[].slice.call(a,0),!a||this.beforeRead&&!this.beforeRead(a)||(Array.isArray(a)?Promise.all(a.map(this.readFile)).then(function(e){var i=!1,n=a.map(function(n,s){return n.size>t.maxSize&&(i=!0),{file:a[s],content:e[s]}});t.onAfterRead(n,i)}):this.readFile(a).then(function(e){t.onAfterRead({file:a,content:e},a.size>t.maxSize)})))},readFile:function(e){var t=this;return new Promise(function(a){var i=new FileReader;i.onload=function(e){a(e.target.result)},"dataUrl"===t.resultType?i.readAsDataURL(e):"text"===t.resultType&&i.readAsText(e)})},onAfterRead:function(e,t){t?this.$emit("oversize",e):(this.afterRead&&this.afterRead(e),this.$refs.input&&(this.$refs.input.value=""))}}})},"9a88":function(e,t,a){"use strict";a.r(t);var i,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"profile"}},[i("van-cell-group",[i("van-cell",[i("template",{slot:"title"},[i("div",{staticClass:"s-user-top"},[i("div",{staticClass:"user-bg-box-1"},[i("img",{staticClass:"img",attrs:{src:a("7401")}})]),i("div",{staticClass:"user-bg2-box-1"},[i("img",{staticClass:"img",attrs:{src:a("d3bd")}})]),i("div",{staticClass:"user_profile_box"},[i("div",{staticClass:"user-img"},[i("van-uploader",{staticClass:"user-img-box",attrs:{"after-read":e.onRead,accept:"image/jpg, image/jpeg, image/png, image/gif",multiple:""}},[e.userInfo.avatar?i("img",{staticClass:"img-height",attrs:{src:e.userInfo.avatar,alt:""}}):i("img",{staticClass:"img-height",attrs:{src:a("e31e"),alt:""}})])],1),i("div",{staticClass:"profile-index-top"},[""!=e.userInfo.name?i("h3",[e._v(e._s(e.userInfo.name))]):i("h3",[e._v(e._s(e.userInfo.username))]),i("p",[i("span",[e._v(e._s(e.$t("lang.username"))+" ")]),e._v(e._s(e.userInfo.username))])])])])])],2),i("van-cell",{staticClass:"title_flex_inherit",attrs:{title:e.$t("lang.nickname"),"is-link":""},on:{click:function(t){e.isShow("name")}},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}}),i("van-cell",{attrs:{title:e.$t("lang.sex"),value:e.isSex,"is-link":""},on:{click:function(t){e.isShow("isSex")}}}),i("van-cell",{attrs:{title:e.$t("lang.birthday"),"is-link":""},on:{click:function(t){e.isShow("birthday")}},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}}),i("van-cell",{attrs:{title:e.$t("lang.address"),to:{name:"address"},"is-link":""}})],1),i("van-cell-group",{staticClass:"m-top10"},[i("van-cell",{attrs:{title:e.$t("lang.real_name"),to:{name:"realname"},"is-link":""}}),i("van-cell",{attrs:{title:e.$t("lang.account_security"),to:{name:"accountsafe"},"is-link":""}})],1),i("van-cell-group",{staticClass:"m-top10"},[i("van-cell",{attrs:{title:e.$t("lang.use_help"),to:{name:"help"},"is-link":""}})],1),e.isWeiXin?e._e():i("div",{staticClass:"ect-button-more padding-all"},[i("van-button",{attrs:{size:"large",tag:"a"},on:{click:e.handelLogout}},[e._v(e._s(e.$t("lang.drop_out")))])],1),i("div",{staticClass:"demo-mask mask",class:{active:1==e.show},on:{click:e.onClickMask}}),i("section",{staticClass:"demo-popup",class:{active:1==e.show}},[i("div",{staticClass:"my-box"},["name"==e.type?[i("div",{staticClass:"my-box-item"},[i("div",{staticClass:"text-all dis-box",staticStyle:{"border-bottom":"0"}},[i("label",[e._v(e._s(e.$t("lang.nickname")))]),i("div",{staticClass:"input-text box-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],staticClass:"j-input-text inputcard",attrs:{type:"text",name:"name",placeholder:e.$t("lang.nickname"),autocomplete:"off"},domProps:{value:e.nickName},on:{input:function(t){t.target.composing||(e.nickName=t.target.value)}}})])]),i("p",{staticStyle:{"font-size":"12px",color:"#999","padding-left":"5px"}},[e._v(e._s(e.$t("lang.nickname_tishi")))])])]:"isSex"==e.type?[i("div",{staticClass:"my-box-item"},[i("ul",{staticClass:"user-sex dis-box"},[i("li",{staticClass:"box-flex"},[i("label",{attrs:{for:"sex_1"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.isSexNum,expression:"isSexNum"}],attrs:{type:"radio",name:"sex",value:"1",id:"sex_1"},domProps:{checked:e._q(e.isSexNum,"1")},on:{change:function(t){e.isSexNum="1"}}}),i("i",{staticClass:"iconfont icon-nan my-sex-size"}),i("h4",[e._v(e._s(e.$t("lang.male")))])])]),i("li",{staticClass:"box-flex"},[i("label",{attrs:{for:"sex_2"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.isSexNum,expression:"isSexNum"}],attrs:{type:"radio",name:"sex",value:"2",id:"sex_2"},domProps:{checked:e._q(e.isSexNum,"2")},on:{change:function(t){e.isSexNum="2"}}}),i("i",{staticClass:"iconfont icon-nv my-sex-size"}),i("h4",[e._v(e._s(e.$t("lang.woman")))])])])])])]:[i("div",{staticClass:"my-box-item"},[i("div",{staticClass:"text-all dis-box"},[i("label",[e._v(e._s(e.$t("lang.birthday")))]),i("div",{staticClass:"input-text box-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.birthday,expression:"birthday"}],staticClass:"j-input-text inputcard",attrs:{type:"date",name:"birthday",placeholder:"1970-01-01",autocomplete:"off"},domProps:{value:e.birthday},on:{input:function(t){t.target.composing||(e.birthday=t.target.value)}}})])])])],i("div",{staticClass:"ect-button-more"},[i("button",{staticClass:"btn btn-submit",class:[e.nicknameDisabled>0?"btn-disabled":"btn-submit"],on:{click:e.updateInfo}},[e._v(e._s(e.$t("lang.confirm")))])])],2)])],1)},s=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=(a("e930"),a("8f80")),l=(a("e17f"),a("2241")),c=(a("e7e5"),a("d399")),u=(a("4ddd"),a("9f14")),d=(a("a44c"),a("e27c")),f=(a("be7f"),a("565f")),h=(a("8a58"),a("e41f")),m=(a("66b9"),a("b650")),p=(a("0653"),a("34e9")),b=(a("7f7f"),a("c194"),a("7744")),v=(a("4328"),a("2f62")),g=a("09d6"),x=a("3855");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var k={name:"profile",mixins:[g["a"]],data:function(){return{show:!1,type:"name",avatarUploadImage:"",nickName:"",nicknameDisabled:0}},components:(i={},Object(r["a"])(i,b["a"].name,b["a"]),Object(r["a"])(i,p["a"].name,p["a"]),Object(r["a"])(i,m["a"].name,m["a"]),Object(r["a"])(i,h["a"].name,h["a"]),Object(r["a"])(i,f["a"].name,f["a"]),Object(r["a"])(i,d["a"].name,d["a"]),Object(r["a"])(i,u["a"].name,u["a"]),Object(r["a"])(i,c["a"].name,c["a"]),Object(r["a"])(i,l["a"].name,l["a"]),Object(r["a"])(i,o["a"].name,o["a"]),i),created:function(){this.$store.dispatch("userProfile")},computed:_(_({},Object(v["c"])({userInfo:function(e){return e.user.userInfo}})),{},{isSexNum:{get:function(){return this.userInfo.sex},set:function(e){this.$store.dispatch("userUpdateText",{type:"sex",val:e})}},birthday:{get:function(){return this.userInfo.birthday},set:function(e){this.$store.dispatch("userUpdateText",{type:"birthday",val:e})}},isSex:function(){var e=[this.$t("lang.secrecy"),this.$t("lang.male"),this.$t("lang.woman")];return e[this.isSexNum]},isWeiXin:function(){return g["a"].isWeixinBrowser()}}),methods:{getStringLen:function(e){var t,a,i;if(null==e||""==e)return 0;for(a=e.length,t=0;t<a;t++)i=e.charCodeAt(t),i>255&&a++;return a},isShow:function(e){this.show=!0,"name"==e&&(this.nickName=this.userInfo.name),this.type=e},onClickMask:function(){this.show=!1,this.nicknameDisabled=0,this.nickName=this.userInfo.name},handelLogout:function(){var e=this;l["a"].confirm({message:this.$t("lang.user_logout"),className:"text-center"}).then(function(){e.$store.dispatch("userLogout"),e.release&&e.$http.get("".concat(window.ROOT_URL,"user.php?act=logout")),c["a"].loading({mask:!0,message:e.$t("lang.loading"),duration:1e3},e.$router.push({path:"/login"}))})},updateInfo:function(){if(1!=this.nicknameDisabled)if(2!=this.nicknameDisabled){var e={sex:this.isSexNum,name:this.nickName,birthday:this.birthday};this.$store.dispatch("updateProfile",e),this.show=!1}else Object(c["a"])(this.$t("lang.up_to_20_characters_can_be_entered"));else Object(c["a"])(this.$t("lang.up_to_2_characters_can_be_entered"))},onRead:function(e){this.imgPreview(e.file)},updataAvatar:function(){var e=this;c["a"].loading({message:"上传中...",duration:0}),this.$store.dispatch("setMaterial",{file:{content:this.avatarUploadImage},type:"avatar"}).then(function(t){e.$store.dispatch("userUpdateAvatar",{pic:t.data[0]})})},imgPreview:function(e){var t,a=this;if(a.Exif.getData(e,function(){t=a.Exif.getTag(this,"orientation")}),e&&window.FileReader&&/^image/.test(e.type)){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){var e=this.result,i=new Image;i.src=e,this.result.length<=512e3?(a.avatarUploadImage=this.result,a.updataAvatar()):i.onload=function(){var e=x["a"].compress(i,t);a.avatarUploadImage=e,a.updataAvatar()}}}}},watch:{nickName:function(){var e=this.getStringLen(this.nickName);this.nicknameDisabled=e<2?1:e>20?2:0}}},$=k,w=a("2877"),C=Object(w["a"])($,n,s,!1,null,null,null);C.options.__file="Profile.vue";t["default"]=C.exports},"9f14":function(e,t,a){"use strict";var i=a("fe7e"),n=a("f331");t["a"]=Object(i["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b({disabled:e.isDisabled}),on:{click:function(t){e.$emit("click")}}},[a("span",{class:e.b("input")},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],class:e.b("control"),attrs:{type:"radio",disabled:e.isDisabled},domProps:{value:e.name,checked:e._q(e.currentValue,e.name)},on:{change:function(t){e.currentValue=e.name}}}),a("icon",{attrs:{name:e.currentValue===e.name?"checked":"check"}})],1),e.$slots.default?a("span",{class:e.b("label",e.labelPosition),on:{click:e.onClickLabel}},[e._t("default")],2):e._e()])},name:"radio",mixins:[n["a"]],props:{name:null,value:null,disabled:Boolean,labelDisabled:Boolean,labelPosition:Boolean},computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(e){(this.parent||this).$emit("input",e)}},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled}},created:function(){this.findParent("van-radio-group")},methods:{onClickLabel:function(){this.isDisabled||this.labelDisabled||(this.currentValue=this.name)}}})},a44c:function(e,t,a){"use strict";a("68ef")},bcd3:function(e,t,a){},be7f:function(e,t,a){"use strict";a("68ef"),a("1146")},c194:function(e,t,a){"use strict";a("68ef")},d3bd:function(e,t,a){e.exports=a.p+"img/user-2.png"},dde9:function(e,t,a){},e27c:function(e,t,a){"use strict";var i=a("fe7e");t["a"]=Object(i["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b()},[e._t("default")],2)},name:"radio-group",props:{value:null,disabled:Boolean},watch:{value:function(e){this.$emit("change",e)}}})},e31e:function(e,t,a){e.exports=a.p+"img/user_default.png"},e41f:function(e,t,a){"use strict";var i=a("fe7e"),n=a("6605");t["a"]=Object(i["a"])({render:function(){var e,t=this,a=t.$createElement,i=t._self._c||a;return i("transition",{attrs:{name:t.currentTransition}},[t.shouldRender?i("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],class:t.b((e={},e[t.position]=t.position,e))},[t._t("default")],2):t._e()])},name:"popup",mixins:[n["a"]],props:{transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{currentTransition:function(){return this.transition||(""===this.position?"van-fade":"popup-slide-"+this.position)}}})},e930:function(e,t,a){"use strict";a("68ef"),a("bcd3")},f331:function(e,t,a){"use strict";t["a"]={data:function(){return{parent:null}},methods:{findParent:function(e){var t=this.$parent;while(t){if(t.$options.name===e){this.parent=t;break}t=t.$parent}}}}}}]);
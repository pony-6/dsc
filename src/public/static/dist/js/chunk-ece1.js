(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ece1"],{"20fb":function(t,e,i){"use strict";var n=i("fe7e");e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[i("button",{class:t.b("minus",{disabled:t.minusDisabled}),on:{click:function(e){t.onChange("minus")}}}),i("input",{class:t.b("input"),attrs:{type:"number",disabled:t.disabled||t.disableInput},domProps:{value:t.currentValue},on:{input:t.onInput,blur:t.onBlur}}),i("button",{class:t.b("plus",{disabled:t.plusDisabled}),on:{click:function(e){t.onChange("plus")}}})])},name:"stepper",props:{value:null,integer:Boolean,disabled:Boolean,disableInput:Boolean,min:{type:[String,Number],default:1},max:{type:[String,Number],default:1/0},step:{type:[String,Number],default:1},defaultValue:{type:[String,Number],default:1}},data:function(){var t=this.range(this.isDef(this.value)?this.value:this.defaultValue);return t!==+this.value&&this.$emit("input",t),{currentValue:t}},computed:{minusDisabled:function(){return this.disabled||this.currentValue<=this.min},plusDisabled:function(){return this.disabled||this.currentValue>=this.max}},watch:{value:function(t){t!==this.currentValue&&(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t)}},methods:{format:function(t){return t=String(t).replace(/[^0-9\.-]/g,""),""===t?0:this.integer?Math.floor(t):+t},range:function(t){return Math.max(Math.min(this.max,this.format(t)),this.min)},onInput:function(t){var e=t.target.value,i=this.format(e);+e!==i&&(t.target.value=i),this.currentValue=i},onChange:function(t){if(this[t+"Disabled"])this.$emit("overlimit",t);else{var e="minus"===t?-this.step:+this.step,i=Math.round(100*(this.currentValue+e))/100;this.currentValue=this.range(i),this.$emit(t)}},onBlur:function(t){this.currentValue=this.range(this.currentValue),this.$emit("blur",t)}}})},2381:function(t,e,i){},"2ed4":function(t,e,i){"use strict";var n,a=i("6f2f"),s=i("fe7e"),r=i("9584");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b({active:t.active}),on:{click:t.onClick}},[i("div",{class:t.b("icon",{dot:t.dot})},[t._t("icon",[t.icon?i("icon",{attrs:{name:t.icon}}):t._e()],{active:t.active}),i("van-info",{attrs:{info:t.info}})],2),i("div",{class:t.b("text")},[t._t("default",null,{active:t.active})],2)])},name:"tabbar-item",components:(n={},n[a["a"].name]=a["a"],n),mixins:[r["a"]],props:{icon:String,dot:Boolean,info:[String,Number]},data:function(){return{active:!1}},beforeCreate:function(){this.$parent.items.push(this)},destroyed:function(){this.$parent.items.splice(this.$parent.items.indexOf(this),1)},methods:{onClick:function(t){this.$parent.onChange(this.$parent.items.indexOf(this)),this.$emit("click",t),this.routerLink()}}})},"3acc":function(t,e,i){"use strict";var n=i("fe7e");e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("default")],2)},name:"checkbox-group",props:{value:Array,disabled:Boolean,max:{type:Number,default:0}},watch:{value:function(t){this.$emit("change",t)}}})},"3b42":function(t,e,i){},"3c32":function(t,e,i){"use strict";i("68ef"),i("2381")},"417e":function(t,e,i){"use strict";var n=i("fe7e"),a=i("f331");e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[i("div",{class:[t.b("icon",[t.shape,{disabled:t.isDisabled,checked:t.checked}])],on:{click:t.toggle}},[t._t("icon",[i("icon",{style:t.iconStyle,attrs:{name:"success"}})],{checked:t.checked})],2),t.$slots.default?i("span",{class:t.b("label",t.labelPosition),on:{click:function(e){t.toggle("label")}}},[t._t("default")],2):t._e()])},name:"checkbox",mixins:[a["a"]],props:{name:null,value:null,disabled:Boolean,checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"}},computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},iconStyle:function(){var t=this.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}}},watch:{value:function(t){this.$emit("change",t)}},created:function(){this.findParent("van-checkbox-group")},methods:{toggle:function(t){this.isDisabled||"label"===t&&this.labelDisabled||(this.checked=!this.checked)},setParentValue:function(t){var e=this.parent,i=e.value.slice();if(t){if(e.max&&i.length>=e.max)return;-1===i.indexOf(this.name)&&(i.push(this.name),e.$emit("input",i))}else{var n=i.indexOf(this.name);-1!==n&&(i.splice(n,1),e.$emit("input",i))}}}})},"4dd4":function(t,e,i){"use strict";var n=i("e2d0"),a=i.n(n);a.a},"522d":function(t,e,i){"use strict";i.r(e);var n,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"con",class:t.supplierCartList.length>0?"con_main":"con_main_b5"},[t.supplierCartList.length>0?[n("header",{staticClass:"page-layout-header"},[n("h4",{staticClass:"title"},[t._v(t._s(t.$t("lang.purchase_order")))]),n("van-button",{attrs:{type:t.editType?"danger":"default",size:"mini",plain:""},on:{click:t.editClick}},[t.editType?n("span",[t._v(t._s(t.$t("lang.accomplish")))]):n("span",[t._v(t._s(t.$t("lang.edit")))])])],1),n("section",{staticClass:"card-goods supplier-card-goods"},t._l(t.supplierCartList,function(e,a){return n("div",{key:a,staticClass:"van-checkbox-group"},[n("div",{staticClass:"card-shop-head b-min b-min-b",on:{click:function(e){t.checkShop(a)}}},[n("van-checkbox",{staticClass:"card-goods__item",model:{value:t.supplierChecked[a],callback:function(e){t.$set(t.supplierChecked,a,e)},expression:"supplierChecked[listIndex]"}},[n("div",{staticClass:"store_name"},[n("i",{staticClass:"iconfont icon-dianpu2 flow-shop-icon"}),n("strong",[t._v(t._s(e.shop_name))])])])],1),n("van-checkbox-group",{model:{value:t.supplierCheckedGoods[a],callback:function(e){t.$set(t.supplierCheckedGoods,a,e)},expression:"supplierCheckedGoods[listIndex]"}},t._l(e.goods_list,function(e){return n("div",{key:e.goods_id,staticClass:"card-goods__item supplier-card-item"},[n("router-link",{attrs:{to:{name:"supplier-detail",params:{id:e.goods_id}}}},[n("van-card",{attrs:{title:e.goods_name}},[n("template",{slot:"thumb"},[e.goods_thumb?n("img",{attrs:{src:e.goods_thumb}}):n("img",{staticClass:"img",attrs:{src:i("d9e6")}})])],2)],1),t._l(e.list,function(e,i){return n("div",{key:i,staticClass:"attr-list"},[n("div",{staticClass:"opt"},[n("van-checkbox",{attrs:{name:e.rec_id}})],1),n("div",{staticClass:"meta"},[n("div",{staticClass:"meta-sku"},[n("div",{staticClass:"sku"},t._l(e.goods_attr,function(i){return e.goods_attr?n("span",[t._v(t._s(i.attr_name)+"："+t._s(i.attr_value))]):n("span",[t._v(t._s(t.$t("lang.not_specification")))])})),n("div",{staticClass:"unit-price",domProps:{innerHTML:t._s(e.goods_price_formatted)}})]),n("div",{staticClass:"meta-amount"},[n("div",{staticClass:"amount",domProps:{innerHTML:t._s(e.total_price_formatted)}}),n("div",{staticClass:"stepper"},[n("van-stepper",{attrs:{integer:"",min:1,disabled:t.stepDisabled},on:{change:function(i){t.goodsNumberhandle(e.rec_id,e.goods_number)}},model:{value:e.goods_number,callback:function(i){t.$set(e,"goods_number",i)},expression:"attr.goods_number"}})],1)])])])})],2)}))],1)})),t.editType?[n("van-submit-bar",{attrs:{"button-type":"warning","button-text":t.$t("lang.delete")},on:{submit:t.onBatchDelete}},[n("van-checkbox",{staticClass:"checkall",on:{change:t.onCheckAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1)]:[n("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.count>0,loading:t.loading,"button-text":t.submitBarText},on:{submit:t.onSubmit}})]]:[n("div",{staticClass:"flow-no-cart"},[t._m(0),n("h3",[t._v(t._s(t.$t("lang.shopping_cart_notice")))]),n("div",{staticClass:"card-btn"},[n("van-button",{attrs:{type:"default",plain:""},on:{click:t.goHome}},[t._v(t._s(t.$t("lang.go_around")))]),n("van-button",{attrs:{type:"default",plain:""},on:{click:t.goUser}},[t._v(t._s(t.$t("lang.check_purchase_order")))])],1)])],n("WhoTabbar")],2)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"gwc-icon"},[n("img",{staticClass:"img",attrs:{src:i("75fd")}})])}],r=(i("8e6e"),i("456d"),i("e7e5"),i("d399")),c=(i("ac6a"),i("ade3")),o=(i("e17f"),i("2241")),u=(i("66b9"),i("b650")),l=(i("f06a"),i("20fb")),d=(i("a909"),i("3acc")),p=(i("be39"),i("efa0")),h=(i("3c32"),i("417e")),f=(i("7f7f"),i("9cb7b"),i("66fd")),b=i("2f62"),m=i("8b59");function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach(function(e){Object(c["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var v={components:(n={},Object(c["a"])(n,f["a"].name,f["a"]),Object(c["a"])(n,h["a"].name,h["a"]),Object(c["a"])(n,p["a"].name,p["a"]),Object(c["a"])(n,d["a"].name,d["a"]),Object(c["a"])(n,l["a"].name,l["a"]),Object(c["a"])(n,u["a"].name,u["a"]),Object(c["a"])(n,o["a"].name,o["a"]),Object(c["a"])(n,"WhoTabbar",m["a"]),n),data:function(){return{supplierChecked:[],stepDisabled:!1,totalPrice:0,total:0,count:0,rec_id:[],loading:!0,goods_id:this.$route.query.goods_id?this.$route.query.goods_id:0,editType:!1,checkAll:!1}},created:function(){this.goodsList()},mounted:function(){},computed:g(g({},Object(b["c"])({supplierCartList:function(t){return t.other.supplierCartList},supplierShopLength:function(t){return t.other.supplierShopLength}})),{},{supplierCheckedGoods:{get:function(){return this.$store.state.other.supplierCheckedGoods},set:function(t){this.$store.state.other.supplierCheckedGoods=t}},submitBarText:function(){return this.$t("lang.go_checkout")+"("+this.count+")"},isLogin:function(){return null!=localStorage.getItem("token")}}),methods:{goodsList:function(){var t=this;this.$store.dispatch("setSupplierCart",{goods_id:this.goods_id}),this.supplierCheckedGoods.forEach(function(e,i){e.forEach(function(e){t.rec_id.push(e)})})},formatPrice:function(t){return(t/100).toFixed(2)},onSubmit:function(){var t=this;this.$store.dispatch("setSupplierFlows",{rec_ids:this.rec_id}).then(function(e){if(t.supplierCheckedGoods.length>0)if(t.isLogin)1==e.data.error?Object(r["a"])(e.data.message):t.$router.push({name:"supplier-checkout",query:{rec_type:"supplier",rec_id:JSON.stringify(t.rec_id)}});else{var i=t.$t("lang.login_user_not");t.notLogin(i)}})},goodsNumberhandle:function(t,e){var i=this;this.$store.dispatch("setSupplierUpdatecart",{rec_id:t,rec_ids:this.rec_id,rec_num:e}).then(function(t){"success"==t.status?(i.total=t.data.cart_info.total_price,i.count=t.data.cart_info.total_number):Object(r["a"])(i.$t("lang.error_in_return_data"))})},checkShop:function(t){this.$store.dispatch("setUpdetaCheckSupplier",{index:t,checked:this.supplierChecked[t]})},changeChecked:function(t){var e=this;this.loading=!0,t.length>0?this.$store.dispatch("setCheckedSupplier",{rec_id:t}).then(function(t){"success"==t.status?(e.total=t.data.cart_info.total_price,e.count=t.data.cart_info.total_number,e.loading=!1):Object(r["a"])(e.$t("lang.error_in_return_data"))}):(this.loading=!1,this.total=0,this.count=0)},editClick:function(){this.editType=!this.editType},onCheckAll:function(){var t=this;this.supplierCartList.forEach(function(e,i){t.supplierChecked[i]=t.checkAll,t.checkShop(i)})},onBatchDelete:function(){this.$store.dispatch("setSupplierCartDelete",{rec_ids:this.rec_id})},goHome:function(){this.$router.push({name:"supplier"})},goUser:function(){this.$router.push({name:"supplier-orderlist"})},notLogin:function(t){var e=this;o["a"].confirm({message:t,className:"text-center"}).then(function(){e.$router.push({path:"/login",query:{redirect:{name:"supplier-cart"}}})}).catch(function(){})}},watch:{supplierCheckedGoods:function(){var t=this,e=[];this.rec_id=[],this.supplierCheckedGoods.forEach(function(i,n){e.push(i.length===t.supplierShopLength[n]),i.forEach(function(e){t.rec_id.push(e)})}),this.supplierChecked=e},rec_id:function(){this.changeChecked(this.rec_id)},total:function(){this.totalPrice=100*this.total},editType:function(){var t=this;this.checkAll=!1,this.editType&&this.supplierCartList.forEach(function(e,i){t.supplierChecked[i]=!1,t.checkShop(i)})}}},k=v,C=(i("4dd4"),i("2877")),y=Object(C["a"])(k,a,s,!1,null,"6537d102",null);y.options.__file="Cart.vue";e["default"]=y.exports},"537a":function(t,e,i){"use strict";i("68ef"),i("9312")},"66b9":function(t,e,i){"use strict";i("68ef")},"66fd":function(t,e,i){"use strict";var n=i("a3e2"),a=i("fe7e");e["a"]=Object(a["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b({center:t.centered})},[i("a",{class:t.b("thumb"),attrs:{href:t.thumbLink}},[t._t("thumb",[i("img",{class:t.b("img"),attrs:{src:t.thumb}})]),t.tag?i("van-tag",{class:t.b("tag"),attrs:{mark:"",type:"danger"}},[t._v("\n      "+t._s(t.tag)+"\n    ")]):t._e()],2),i("div",{class:t.b("content")},[i("div",{class:t.b("left")},[t._t("title",[t.title?i("div",{class:t.b("title")},[t._v("\n          "+t._s(t.title)+"\n        ")]):t._e()]),t._t("desc",[t.desc?i("div",{class:[t.b("desc"),"van-ellipsis"]},[t._v("\n          "+t._s(t.desc)+"\n        ")]):t._e()]),t._t("tags")],2),i("div",{class:t.b("right")},[t.isDef(t.price)?i("div",[t._v(t._s(t.currency)+" "+t._s(t.price))]):t._e(),t.isDef(t.originPrice)?i("div",{class:t.b("origin-price")},[t._v("\n        "+t._s(t.currency)+" "+t._s(t.originPrice)+"\n      ")]):t._e(),t.isDef(t.num)?i("div",{class:t.b("num")},[t._v("\n        x "+t._s(t.num)+"\n      ")]):t._e()])]),t.$slots.footer?i("div",{class:t.b("footer")},[t._t("footer")],2):t._e()])},name:"card",components:{VanTag:n["a"]},props:{tag:String,desc:String,thumb:String,title:String,centered:Boolean,num:[Number,String],price:[Number,String],originPrice:[Number,String],currency:{type:String,default:"¥"},thumbLink:{type:String,default:"javascript:;"}}})},"6aa9":function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var n="#f44",a="#1989fa",s="#4b0"},"75fd":function(t,e,i){t.exports=i.p+"img/cart-empty.png"},"8b59":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"footer-nav"},[i("van-tabbar",{staticClass:"ect-tabbar",attrs:{fixed:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tabbar-item",{attrs:{icon:"home",to:"/supplier"}},[t._v(t._s(t.$t("lang.supplier_home_page")))]),i("van-tabbar-item",{attrs:{icon:"pending-orders",to:"/supplier/list"}},[t._v(t._s(t.$t("lang.supplier_category")))]),i("van-tabbar-item",{attrs:{icon:"cart",to:"/supplier/cart"}},[t._v(t._s(t.$t("lang.purchase_order")))]),i("van-tabbar-item",{attrs:{icon:"idcard",to:"/supplier/buy"}},[t._v(t._s(t.$t("lang.purchase_info")))]),i("van-tabbar-item",{attrs:{icon:"pending-orders",to:"/supplier/orderlist"}},[t._v(t._s(t.$t("lang.purchase_note")))])],1)],1)},s=[],r=i("ade3"),c=(i("a52c"),i("2ed4")),o=(i("7f7f"),i("537a"),i("ac28")),u={name:"who-tabbar",components:(n={},Object(r["a"])(n,o["a"].name,o["a"]),Object(r["a"])(n,c["a"].name,c["a"]),n),data:function(){return{active:0}},mounted:function(){var t=this.$route.path.substr(1),e=["supplier","supplier/list","supplier/cart","supplier/buy"];this.active=e.indexOf(t)}},l=u,d=i("2877"),p=Object(d["a"])(l,a,s,!1,null,null,null);p.options.__file="WhoTabbar.vue";e["a"]=p.exports},9312:function(t,e,i){},"9b7e":function(t,e,i){},"9cb7b":function(t,e,i){"use strict";i("68ef"),i("9b7e"),i("ea82")},a3e2:function(t,e,i){"use strict";var n=i("fe7e"),a=i("6aa9"),s="#999",r={danger:a["c"],primary:a["a"],success:a["b"]};e["a"]=Object(n["a"])({render:function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("span",{class:[e.b((t={mark:e.mark,plain:e.plain,round:e.round},t[e.size]=e.size,t)),{"van-hairline--surround":e.plain}],style:e.style},[e._t("default")],2)},name:"tag",props:{size:String,type:String,mark:Boolean,color:String,plain:Boolean,round:Boolean},computed:{style:function(){var t,e=this.color||r[this.type]||s,i=this.plain?"color":"backgroundColor";return t={},t[i]=e,t}}})},a52c:function(t,e,i){"use strict";i("68ef"),i("ae73")},a909:function(t,e,i){"use strict";i("68ef")},ac28:function(t,e,i){"use strict";var n=i("fe7e");e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"van-hairline--top-bottom",class:t.b({fixed:t.fixed}),style:t.style},[t._t("default")],2)},name:"tabbar",data:function(){return{items:[]}},props:{value:Number,fixed:{type:Boolean,default:!0},zIndex:{type:Number,default:1}},computed:{style:function(){return{zIndex:this.zIndex}}},watch:{items:function(){this.setActiveItem()},value:function(){this.setActiveItem()}},methods:{setActiveItem:function(){var t=this;this.items.forEach(function(e,i){e.active=i===t.value})},onChange:function(t){t!==this.value&&(this.$emit("input",t),this.$emit("change",t))}}})},ae73:function(t,e,i){},be39:function(t,e,i){"use strict";i("68ef"),i("3b42")},d9e6:function(t,e,i){t.exports=i.p+"img/no_image.jpg"},e2d0:function(t,e,i){},ea82:function(t,e,i){},efa0:function(t,e,i){"use strict";var n=i("b650"),a=i("fe7e");e["a"]=Object(a["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("top"),t.tip||t.$slots.tip?i("div",{class:t.b("tip")},[t._v("\n    "+t._s(t.tip)),t._t("tip")],2):t._e(),i("div",{class:t.b("bar")},[t._t("default"),i("div",{class:t.b("text")},[t.hasPrice?[i("span",[t._v(t._s(t.label||t.$t("label")))]),i("span",{class:t.b("price")},[t._v(t._s(t.currency)+" "+t._s(t._f("format")(t.price)))])]:t._e()],2),i("van-button",{attrs:{square:"",size:"large",type:t.buttonType,disabled:t.disabled,loading:t.loading},on:{click:function(e){t.$emit("submit")}}},[t._v("\n      "+t._s(t.loading?"":t.buttonText)+"\n    ")])],2)],2)},name:"submit-bar",components:{VanButton:n["a"]},props:{tip:String,type:Number,price:Number,label:String,loading:Boolean,disabled:Boolean,buttonText:String,currency:{type:String,default:"¥"},buttonType:{type:String,default:"danger"}},computed:{hasPrice:function(){return"number"===typeof this.price}},filters:{format:function(t){return(t/100).toFixed(2)}}})},f06a:function(t,e,i){"use strict";i("68ef"),i("fb6c")},f331:function(t,e,i){"use strict";e["a"]={data:function(){return{parent:null}},methods:{findParent:function(t){var e=this.$parent;while(e){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}}},fb6c:function(t,e,i){}}]);
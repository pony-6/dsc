(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9892"],{"3e5f":function(t,e,i){"use strict";i.r(e);var s,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"con con_main"},[t.shopStore?s("div",{staticClass:"title_on"},[s("div",{staticClass:"active_on"},[t._v("\n\t\t\t快递配送\n\t\t")]),s("div",{on:{click:t.shop_kud}},[t._v("\n\t\t\t门店自提\n\t\t")])]):t._e(),t.checkoutDisplay?s("div",{staticClass:"flow-checkout"},[t.total.real_goods_count>0?s("section",{staticClass:"flow-checkout-item flow-checkout-adr m-b10 quanymagin"},[s("van-cell-group",[s("van-cell",{attrs:{icon:"location","is-link":""},on:{click:t.checkoutAddress}},[s("template",{slot:"title"},[s("div",{staticClass:"address_title"},[t._v(t._s(t.consignee_title))]),s("div",{staticClass:"address_body"},[s("div",[t.checkoutInfo.consignee.post_mobile?s("div",{staticClass:"post_lebal_red"},[t._v(t._s(t.$t("lang.community_post")))]):t._e(),t._v(t._s(t.consignee_address)+"\n\t\t\t\t\t\t\t")]),t.checkoutInfo.consignee.post_mobile?s("div",[t._v(t._s(t.$t("lang.post_contact_number"))+":\n\t\t\t\t\t\t\t\t"+t._s(t.checkoutInfo.consignee.post_mobile))]):t._e()]),t.checkoutInfo.consignee.nearbyleader>0?s("div",{staticClass:"address_footer"},[t._v(t._s(t.checkoutInfo.consignee.leader_id?t.$t("lang.selected_community"):t.$t("lang.near_station")))]):t._e()])],2)],1)],1):t._e(),t._l(t.checkoutInfo.goods_list,function(e,a){return s("section",{key:a,staticClass:"checkout-goods-list m-b10 quanymagin"},[s("section",{staticClass:"section-list"},[s("div",{staticClass:"detail-title"},[t._v(t._s(e.shop_name))]),t.listShow[a]?[s("div",{staticClass:"product-list product-list-max dis-box"},[s("ul",{staticClass:"box-flex"},t._l(e.goods,function(e,a){return s("li",{key:a,on:{click:function(i){t.productLink(e)}}},[s("div",{staticClass:"p-d-img"},[s("div",{staticClass:"p-r"},[e.goods_thumb?s("img",{staticClass:"img",attrs:{src:e.goods_thumb}}):s("img",{staticClass:"img",attrs:{src:i("d9e6")}}),e.is_gift>0?s("em",{staticClass:"activity-tag"},[s("img",{staticClass:"img",attrs:{src:i("07ce")}})]):t._e()])])])})),s("div",{staticClass:"t-jiantou",on:{click:function(e){t.onListShow(a)}}},[s("span",{staticClass:"user-more"},[s("em",[t._v(t._s(t.$t("lang.gong"))+" "+t._s(e.goods_count)+" "+t._s(t.$t("lang.jian")))]),s("i",{staticClass:"iconfont icon-more"})])])])]:[s("div",{staticClass:"product-list dis-box"},[s("ul",{staticClass:"box-flex"},t._l(e.goods,function(e,a){return s("li",{key:a},[s("div",{staticClass:"product-div",class:{"package-box":"package_buy"==e.extension_code}},[s("div",{staticClass:"product-list-img",on:{click:function(i){t.productLink(e)}}},[e.goods_thumb?s("img",{staticClass:"img",attrs:{src:e.goods_thumb}}):s("img",{staticClass:"img",attrs:{src:i("d9e6")}}),e.is_gift>0?s("em",{staticClass:"activity-tag"},[s("img",{staticClass:"img",attrs:{src:i("07ce")}})]):t._e(),"package_buy"==e.extension_code?s("em",{staticClass:"activity-tag"},[s("img",{staticClass:"img",attrs:{src:i("4824")}})]):t._e()]),s("div",{staticClass:"product-info",on:{click:function(i){t.productLink(e)}}},[s("h4",[1==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.group_buy")))]):t._e(),2==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.auction")))]):t._e(),4==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.integral")))]):t._e(),5==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.presale")))]):t._e(),6==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.seckill")))]):t._e(),7==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.team")))]):t._e(),8==t.rec_type?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.bargain")))]):t._e(),"package_buy"==e.extension_code?s("em",{staticClass:"em-promotion"},[t._v(t._s(t.$t("lang.package")))]):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.goods_name)+"\n\t\t\t\t\t\t\t\t\t\t")]),"package_buy"==e.extension_code?[s("div",{staticClass:"price"},[s("div",{staticClass:"color-red",staticStyle:{"font-size":"1.5rem"}},[s("label",[t._v(t._s(t.$t("lang.label_package_price")))]),s("label",{domProps:{innerHTML:t._s(e.goods_price_format)}})]),s("span",[t._v("x"+t._s(e.package_goods_list.length))])]),s("div",{staticClass:"p-attr"},[s("span",[t._v(t._s(t.$t("lang.is_discount")))]),s("span",{domProps:{innerHTML:t._s(e.format_package_list_saving)}})])]:[s("div",{staticClass:"flex-common"},[s("div",{staticClass:"price",domProps:{innerHTML:t._s(e.goods_price_format)}}),s("span",{staticClass:"size_15"},[t._v("x"+t._s(e.goods_number))])]),e.goods_attr?s("div",{staticClass:"p-attr"},[t._v(t._s(e.goods_attr))]):t._e()]],2),"package_buy"==e.extension_code?s("div",{staticClass:"t-jiantou t-jantou-xia",staticStyle:{"margin-top":"0"},on:{click:t.onListPackage}},[s("span",{staticClass:"user-more"},[s("i",{staticClass:"iconfont size_14",class:[t.listPackageShow?"icon-moreunfold":"icon-more"]})])]):t._e()]),"package_buy"==e.extension_code&&t.listPackageShow?t._l(e.package_goods_list,function(e){return s("div",{staticClass:"product-div package-list"},[s("div",{staticClass:"product-list-img"},[e.goods_thumb?s("img",{staticClass:"img",attrs:{src:e.goods_thumb}}):s("img",{staticClass:"img",attrs:{src:i("d9e6")}})]),s("div",{staticClass:"product-info"},[s("h4",[t._v(t._s(e.get_goods.goods_name))]),s("div",{staticClass:"flex-common"},[s("div",{staticClass:"price",domProps:{innerHTML:t._s(e.rank_price_format)}}),s("span",{staticClass:"size_15"},[t._v("x"+t._s(e.goods_number))])])])])}):t._e(),e.membership_card_id>0?s("van-cell-group",{staticClass:"van-cell-noright"},[s("van-cell",{attrs:{"is-link":""}},[s("template",{slot:"title"},[s("van-tag",{attrs:{color:"#ee0a24",size:"medium",plain:""}},[t._v(t._s(t.$t("lang.give")))]),s("span",{staticStyle:{"font-size":"12px",color:"#666","margin-left":"5px"}},[t._v(t._s(t.$t("lang.song"))+"["+t._s(e.membership_card_name)+"]\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.$t("lang.onezhang")))])],1),s("span",{staticStyle:{color:"#999"},on:{click:function(i){t.drpApplyHref(e.membership_card_id)}}},[t._v(t._s(t.$t("lang.go_to_kk")))])],2)],1):t._e()],2)})),e.goods.length>1?s("div",{staticClass:"t-jiantou t-jantou-xia",on:{click:function(e){t.onListShow(a)}}},[t._m(0,!0)]):t._e()])]],2),s("van-cell-group",{staticClass:"van-cell-noright m-top08"},[0==t.store_id&&t.total.real_goods_count>0?s("van-cell",{attrs:{title:t.$t("lang.shipping_mode")}},[e.shipping.default_shipping.shipping_id>0?s("div",{on:{click:function(i){t.feeHandle(a,e.shipping.default_shipping.shipping_id)}}},[s("span",[t._v(t._s(t.shipping_name[a]))]),t._v(" \n\t\t\t\t\t\t"),s("label",{staticClass:"color-red",domProps:{innerHTML:t._s(t.format_shipping_fee[a])}})]):s("div",{staticClass:"color-red"},[t._v(t._s(t.$t("lang.not_shipping")))])]):t._e(),s("van-cell",{staticClass:"b-min",attrs:{title:t.$t("lang.buyer_message")}},[s("div",[s("van-field",{staticClass:"van-cell-ptb0",attrs:{placeholder:t.$t("lang.buyer_message_placeholder")},model:{value:t.postscriptValue[a],callback:function(e){t.$set(t.postscriptValue,a,e)},expression:"postscriptValue[index]"}})],1)]),s("van-cell",{staticClass:"b-min b-min-t"},[s("div",[s("span",[t._v(t._s(t.$t("lang.gong"))+" "+t._s(e.goods_count)+" "+t._s(t.$t("lang.total_amount_propmt_alt"))+"：")]),s("label",{staticClass:"color-red",domProps:{innerHTML:t._s(e.amount)}})])])],1)],1)}),s("section",{staticClass:"checkout-goods-other quanymagin"},[s("van-cell-group",{staticClass:"van-cell-noright"},[s("van-cell",{attrs:{title:t.$t("lang.payment_mode"),"is-link":""},on:{click:t.paymentSelect},model:{value:t.pay_name,callback:function(e){t.pay_name=e},expression:"pay_name"}}),4!=t.rec_type&&t.checkoutInfo.can_invoice>0?s("van-cell",{staticClass:"b-min ",attrs:{title:t.$t("lang.invoice_info"),"is-link":!t.checkoutInfo.cross_border},on:{click:t.invoiceSelect}},[s("div",{staticClass:"box-flex",attrs:{solt:"value"}},[t.checkoutInfo.cross_border?[s("p",{staticClass:"receipt-title color-red"},[t._v(t._s(t.$t("lang.cross_border_no_invoice")))])]:[t.invoice.invoiceType?[s("p",{staticClass:"receipt-title"},[t._v(t._s(t.$t("lang.vat_tax_invoice")))])]:[s("p",{staticClass:"receipt-title"},[t.invoice.company?[t._v(t._s(t.invoice.company_name))]:[t._v(t._s(t.invoice.invoiceTitle))]],2),s("p",{staticClass:"receipt-name"},[t._v(t._s(t.invoice.invoiceConent))])]]],2)]):t._e(),t.bonusList.length>0?s("van-cell",{staticClass:"b-min b-min-t",attrs:{"is-link":""},on:{click:t.bonusHandle},model:{value:t.bonusObject.bonusContent,callback:function(e){t.$set(t.bonusObject,"bonusContent",e)},expression:"bonusObject.bonusContent"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.$t("lang.bonus"))+"("+t._s(t.bonusList.length)+t._s(t.$t("lang.zhang"))+")")])])],2):t._e(),t.couponsList.length>0?s("van-cell",{staticClass:"b-min b-min-t",attrs:{"is-link":""},on:{click:t.couponsHandle},model:{value:t.couponsObject.couponsContent,callback:function(e){t.$set(t.couponsObject,"couponsContent",e)},expression:"couponsObject.couponsContent"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.$t("lang.coupons"))+"("+t._s(t.couponsList.length)+t._s(t.$t("lang.zhang"))+")")])])],2):t._e(),t.valueCard.length>0?s("van-cell",{staticClass:"b-min b-min-t",attrs:{value:"","is-link":""},on:{click:t.valueCardHandle},model:{value:t.valueCardObject.valueCardContent,callback:function(e){t.$set(t.valueCardObject,"valueCardContent",e)},expression:"valueCardObject.valueCardContent"}},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.$t("lang.value_card"))+"("+t._s(t.valueCard.length)+t._s(t.$t("lang.zhang"))+")")])])],2):t._e()],1),t.checkoutInfo.cross_border?s("van-cell-group",{staticClass:"van-cell-noright m-top08"},[s("van-cell",{staticClass:"van-cell-title b-min b-min-b",attrs:{title:t.$t("lang.real_name")}}),s("van-cell",{staticClass:"b-min b-min-t",attrs:{title:t.$t("lang.truename")}},[s("div",[s("van-field",{staticClass:"van-cell-ptb0",attrs:{type:"text",placeholder:t.$t("lang.fill_in_real_name")},model:{value:t.checkout_real_name,callback:function(e){t.checkout_real_name=e},expression:"checkout_real_name"}})],1)]),s("van-cell",{staticClass:"b-min b-min-t",attrs:{title:t.$t("lang.id_number")}},[s("div",[s("van-field",{staticClass:"van-cell-ptb0",attrs:{type:"tel",placeholder:t.$t("lang.fill_in_id_number")},model:{value:t.checkout_real_id,callback:function(e){t.checkout_real_id=e},expression:"checkout_real_id"}})],1)]),t._l(t.checkoutInfo.article_list,function(e,i){return s("van-cell",{key:i,staticClass:"b-min b-min-t"},[s("template",{slot:"title"},[s("div",{staticClass:"dis-box"},[s("van-checkbox",{staticClass:"box-flex",model:{value:t.articleCheck,callback:function(e){t.articleCheck=e},expression:"articleCheck"}},[t._v(t._s(t.$t("lang.checkout_help_article")))]),e.title?s("div",{staticClass:"color-289",on:{click:function(e){t.clickArticle(i)}}},[t._v("《"+t._s(e.title)+"》")]):s("div",{on:{click:function(e){t.clickArticle(i)}}},[t._v(t._s(t.$t("lang.article_not")))])],1)])],2)})],2):t._e(),t.checkoutInfo.use_membership_card>0&&t.vipCard.membership_card_discount_price>0?s("van-cell-group",{staticClass:"van-cell-noright m-top08"},[s("van-cell",{staticClass:"van-cell-title b-min b-min-b"},[s("template",{slot:"title"},[s("div",{staticClass:"vip-zk"},[s("i",{staticClass:"icon-vip"},[s("img",{staticClass:"img",attrs:{src:i("60c6")}})]),s("div",{staticClass:"vip-zk-info"},[s("div",{staticClass:"tit"},[s("span",[t._v(t._s(t.$t("lang.open_membership")))]),s("label",{staticClass:"color-red"},[t._v(t._s(t.vipCard.membership_card_discount_price_formated))]),s("span",[t._v(t._s(t.$t("lang.yuan")))]),s("div",{staticClass:"i",on:{click:t.quanyiClick}},[s("i",{staticClass:"iconfont icon-49"})])]),s("div",{staticClass:"subtit"},[t._v(t._s(t.$t("lang.open_member")))])])])]),[s("div",{staticClass:"vip-zk-price",class:{active:t.vipReceiveState},on:{click:t.vipReceive}},[s("div",{staticClass:"price color-red margin_10",class:{mf:!t.vipCard.membership_card_buy_money>0}},[t.vipCard.membership_card_buy_money>0?s("span",{domProps:{innerHTML:t._s(t.vipCard.membership_card_buy_money_formated)}}):s("span",[t._v(t._s(t.$t("lang.drp_apply_title_5")))])]),s("i",{staticClass:"iconfont icon-gouxuan"})])]],2)],1):t._e(),s("van-cell-group",{staticClass:"van-cell-noright m-top08"},[t.checkoutInfo.allow_use_integral>0&&t.checkoutInfo.integral.length>0?s("van-cell",[s("div",{attrs:{slot:"title"},slot:"title"},[s("font",[t._v(t._s(t.$t("lang.in_commission")))]),s("label",{staticClass:"color-red"},[t._v(t._s(t.checkoutInfo.integral[0].integral))]),s("font",[t._v(t._s(t.$t("lang.points_deduction")))]),s("label",{staticClass:"color-red",domProps:{innerHTML:t._s(t.checkoutInfo.integral[0].integral_money_formated)}})],1),s("van-switch",{staticClass:"fr",attrs:{size:"20px"},on:{change:t.integralSelfHandle},model:{value:t.integralSelf,callback:function(e){t.integralSelf=e},expression:"integralSelf"}})],1):t._e(),t.checkoutInfo.use_surplus>0&&"onlinepay"==t.pay_code?s("van-cell",{staticClass:"van-cell-title b-min b-min-b"},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("lang.is_use_balance")))]),s("van-switch",{staticClass:"fr",attrs:{size:"20px"},model:{value:t.surplusSelf,callback:function(e){t.surplusSelf=e},expression:"surplusSelf"}})],1):t._e(),t.checkoutInfo.use_surplus>0&&t.use_surplus_val>0&&"onlinepay"==t.pay_code?s("van-cell",{staticClass:"b-min b-min-b"},[s("template",{slot:"title"},[s("span",[t._v(t._s(t.$t("lang.label_use_balance")))])]),[s("div",{staticClass:"cell-value-flex"},[s("div",{staticClass:"input-bor"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.surplus,expression:"surplus"}],attrs:{type:"number",min:"1",placeholder:t.$t("lang.fill_in_use_balance"),max:t.checkoutInfo.user_money},domProps:{value:t.surplus},on:{input:[function(e){e.target.composing||(t.surplus=e.target.value)},t.surplusSelfHandle]}})]),s("div",{staticClass:"user_money"},[t._v(t._s(t.$t("lang.label_sy_use_balance"))+t._s(t.checkoutInfo.user_money_formated))])])]],2):t._e()],1),s("van-cell-group",{staticClass:"van-cell-noright m-top08 van-cell-total"},[s("van-cell",{staticClass:"van-cell-title b-min b-min-b",attrs:{title:t.$t("lang.goods_together")}},[s("div",[s("div",{staticClass:"color-red"},[5==t.rec_type?[t._v(t._s(t.$t("lang.label_presale_deposit")))]:t._e(),1==t.rec_type&&1==t.checkoutInfo.is_group_deposit?[t._v(t._s(t.$t("lang.label_group_deposit")))]:t._e(),s("label",{domProps:{innerHTML:t._s(t.total.goods_price_formated)}})],2)])]),t.rateFee>0?s("van-cell",{attrs:{title:t.$t("lang.taxes_dues")}},[s("div",[s("em",{staticClass:"color-red"},[t._v("+ "+t._s(t.currency)+t._s(t.rateFee))])])]):t._e(),t.shippingFee>0&&0==t.store_id&&t.total.real_goods_count>0?s("van-cell",{attrs:{title:t.$t("lang.delivery_cost")}},[s("div",[s("em",{staticClass:"color-red"},[t._v("+ "+t._s(t.currency)+t._s(t.shippingFee))])])]):t._e(),t.total.discount>0?s("van-cell",{attrs:{title:t.$t("lang.discount")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.discount_formated)}})])])]):t._e(),t.total.integral_money>0?s("van-cell",{attrs:{title:t.$t("lang.integral")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.integral_money_formated)}})])])]):t._e(),t.bonusObject.bonusMoney>0?s("van-cell",{attrs:{title:t.$t("lang.bonus")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.bonus_money_formated)}})])])]):t._e(),5==t.total.cou_type?[s("van-cell",{attrs:{title:t.$t("lang.coupon_tab_3")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.shopping_fee_formated)}})])])])]:[t.couponsObject.couponsMoney>0?s("van-cell",{attrs:{title:t.$t("lang.coupons")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.coupons_money_formated)}})])])]):t._e()],t.valueCardObject.vc_dis<1?s("van-cell",{attrs:{title:t.$t("lang.value_card_discount")}},[s("div",[s("em",{staticClass:"color-red"},[t._v("-"+t._s(t.currency)+t._s(t.valueCardObject.vc_dis_money))])])]):t._e(),t.valueCardObject.valueCardMoney>0?s("van-cell",{attrs:{title:t.$t("lang.value_card")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.card_money_formated)}})])])]):t._e(),t.vipCard.order_membership_card_id>0&&t.vipReceiveState&&t.vipCard.membership_card_buy_money>0?s("van-cell",{attrs:{title:t.$t("lang.membership_card_buy_money")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("+"),s("span",{domProps:{innerHTML:t._s(t.vipCard.membership_card_buy_money_formated)}})])])]):t._e(),t.vipCard.order_membership_card_id>0&&t.vipReceiveState&&t.vipCard.membership_card_discount_price>0?s("van-cell",{attrs:{title:t.$t("lang.membership_card_discount_price")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.vipCard.membership_card_discount_price_formated)}})])])]):t._e(),t.total.surplus>0?s("van-cell",{attrs:{title:t.$t("lang.money")}},[s("div",[s("div",{staticClass:"color-red"},[t._v("-"),s("span",{domProps:{innerHTML:t._s(t.total.surplus_formated)}})])])]):t._e()],2)],1),s("section",{staticClass:"order-detail-submit order-checkout-submit quanymagin"},[4==t.rec_type?[s("van-submit-bar",{attrs:{"button-text":t.$t("lang.immediate_payment")},on:{submit:t.onSubmit}},[s("div",{staticClass:"van-submit-bar-zdy"},[s("span",{staticClass:"label-title"},[t._v(t._s(t.$t("lang.label_actual_payment")))]),s("em",{staticClass:"color-red"},[t._v(t._s(t.amountPrice)+t._s(t.$t("lang.integral"))),t.shippingFee>0?[t._v(" + "+t._s(t.currency)+t._s(t.shippingFee))]:t._e()],2)])])]:[t.loading?[s("van-submit-bar",{attrs:{price:100*t.amountPrice,label:t.label_text,"button-text":"$t('lang.immediate_payment')",currency:t.currency,loading:t.loading}})]:[s("van-submit-bar",{attrs:{price:100*t.amountPrice,label:t.label_text,"button-text":t.$t("lang.immediate_payment"),currency:t.currency,disabled:!t.articleCheck,loading:t.loading},on:{submit:t.onSubmit}})]]],2)],2):t._e(),s("van-popup",{staticClass:"invoice_show",attrs:{position:"right",overlay:t.overlay},model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}},[s("section",{staticClass:"invoice-warp-box padding-all"},[s("div",{staticClass:"header-tit"},[t._v(t._s(t.$t("lang.invoice_type")))]),s("ul",{staticClass:"ect-selects"},[s("li",{staticClass:"ect-select",class:{active:0==t.invoice.invoiceType},on:{click:function(e){t.incrementHandle(1)}}},[s("span",[t._v(t._s(t.$t("lang.plain_invoice")))])]),t.invoice.increment?[s("li",{staticClass:"ect-select",class:{active:1==t.invoice.invoiceType},on:{click:function(e){t.incrementHandle(2)}}},[s("span",[t._v(t._s(t.$t("lang.vat_invoice")))])])]:[s("li",{staticClass:"ect-select btn-box",on:{click:function(e){t.incrementHandle(2)}}},[s("span",[t._v(t._s(t.$t("lang.vat_invoice")))])])]],2),s("p",[t._v(t._s(t.$t("lang.checkout_inv_help")))])]),t.invoice.invoiceType?t._e():s("section",{staticClass:"invoice-cont-box"},[s("ul",{staticClass:"ect-selects"},[s("li",{staticClass:"ect-select",class:{active:0==t.invoice.company},on:{click:function(e){t.invTab(1)}}},[s("span",[t._v(t._s(t.$t("lang.person")))])]),s("li",{staticClass:"ect-select",class:{active:1==t.invoice.company},on:{click:function(e){t.invTab(2)}}},[s("span",[t._v(t._s(t.$t("lang.company")))])])]),t.invoice.company?s("div",{staticClass:"invoice-cont-1 van-cell-field"},[t.invoice.invoiceCompany.length>0?s("van-cell",{staticClass:"my-cell-nobottom",attrs:{title:t.$t("lang.label_company_name"),value:t.invoice.company_name,"is-link":""},on:{click:t.companySelect}}):s("van-field",{staticClass:"my-cell-nobottom",attrs:{label:t.$t("lang.label_company_name"),placeholder:t.$t("lang.fill_in_company_name")},model:{value:t.invoice.company_name,callback:function(e){t.$set(t.invoice,"company_name",e)},expression:"invoice.company_name"}}),s("van-field",{attrs:{label:t.$t("lang.taxpayer_id_number"),placeholder:t.$t("lang.enter_taxpayer_id_number")},model:{value:t.invoice.company_tid,callback:function(e){t.$set(t.invoice,"company_tid",e)},expression:"invoice.company_tid"}})],1):t._e(),s("div",{staticClass:"invoice-cont-2"},[s("div",{staticClass:"header-tit"},[t._v(t._s(t.$t("lang.invoice_content")))]),s("van-radio-group",{on:{change:t.invValueRadioHandle},model:{value:t.invoice.invValueRadio,callback:function(e){t.$set(t.invoice,"invValueRadio",e)},expression:"invoice.invValueRadio"}},t._l(t.invoiceValue,function(e,i){return s("van-radio",{key:i,attrs:{name:i}},[t._v(t._s(e))])}))],1)]),s("div",{staticClass:"my-box"},[s("div",{staticClass:"ect-button-more"},[s("div",{staticClass:"btn btn-submit",on:{click:t.submitBtn}},[t._v(t._s(t.$t("lang.confirm")))])])])]),s("van-popup",{staticClass:"show-popup-bottom",attrs:{position:"bottom"},model:{value:t.invoice.companyShow,callback:function(e){t.$set(t.invoice,"companyShow",e)},expression:"invoice.companyShow"}},[s("div",{staticClass:"goods-show-title padding-all"},[s("h3",{staticClass:"fl"},[t._v(t._s(t.$t("lang.company_name")))]),s("i",{staticClass:"iconfont icon-close fr",on:{click:t.companyClose}})]),t.invoice.invoice_id?s("div",{staticClass:"s-g-list-con"},[s("div",{staticClass:"select-two"},[s("ul",t._l(t.invoice.invoiceCompany,function(e,i){return s("li",{key:i,staticClass:"ect-select",class:{active:t.invoice.invoice_id==e.invoice_id},on:{click:function(i){t.invoice_company_select(e.invoice_id,e.inv_payee,e.tax_id)}}},[s("label",{staticClass:"dis-box"},[s("span",{staticClass:"box-flex"},[t._v(t._s(e.inv_payee))]),s("i",{staticClass:"iconfont icon-gou"})])])}))])]):t._e()]),s("van-popup",{attrs:{position:"right",overlay:t.overlay},model:{value:t.bonusObject.bonusBase,callback:function(e){t.$set(t.bonusObject,"bonusBase",e)},expression:"bonusObject.bonusBase"}},[s("div",{staticClass:"con-filter-div con-filter-div-coupon"},t._l(t.bonusList,function(e,i){return s("ul",{key:i,staticClass:"flow-couon-list padding-all-n bonus-list"},[s("li",{staticClass:"big-remark-all new-coupons-box bonus-select-box",class:{active:t.bonusObject.bonusId==e.bonus_id,disabled:t.bonusObject.bonusId!=e.bonus_id&&t.bonusDisabled},on:{click:function(i){t.bonusActive(e.bonus_id)}}},[s("div",{staticClass:"cont dis-box"},[s("div",{staticClass:"bonus-left"},[s("div",{staticClass:"img-box"},[s("div",{staticClass:"color-red"},[s("strong",{staticClass:"bonus-money"},[t._v(t._s(t.currency)+t._s(e.type_money))])])])]),s("div",{staticClass:"box-flex bonus-right"},[s("p",{staticClass:"bonus-tit"},[s("strong",[t._v(t._s(e.type_name))])]),s("p",{staticClass:"bonus-desc"},[t._v(t._s(t.$t("lang.man"))+t._s(e.min_goods_amount)+t._s(t.$t("lang.price_unit"))+t._s(t.$t("lang.have_access_to")))])])]),s("div",{staticClass:"time"},[t._v(t._s(t.$t("lang.label_service_life"))+t._s(e.use_start_date)+" "+t._s(t.$t("lang.zhi"))+" "+t._s(e.use_end_date))]),s("div",{staticClass:"new-store-radio-box"},[s("i",{staticClass:"iconfont icon-gou"})])])])})),s("div",{staticClass:"filterlayer_bottom_buttons"},[s("span",{staticClass:"filterlayer_bottom_button bg_1",on:{click:t.closeBonus}},[t._v(t._s(t.$t("lang.close")))]),s("span",{staticClass:"filterlayer_bottom_button bg_2",on:{click:t.submitBonus}},[t._v(t._s(t.$t("lang.confirm")))])])]),s("van-popup",{staticClass:"coupons-filter-con",attrs:{position:"right",overlay:t.overlay},model:{value:t.couponsObject.couponsBase,callback:function(e){t.$set(t.couponsObject,"couponsBase",e)},expression:"couponsObject.couponsBase"}},[s("div",{staticClass:"con-filter-div-1"},[s("ul",{staticClass:"flow-couon-list padding-all couon-list"},t._l(t.couponsList,function(e,i){return s("li",{key:i,staticClass:"dis-box new-coupons-box",class:{active:t.couponsObject.couponsId==e.uc_id,disabled:t.couponsObject.couponsId!=e.uc_id&&t.bonusDisabled},on:{click:function(i){t.couponsActive(e.uc_id)}}},[s("div",{staticClass:"box-flex remark-all p-r"},[s("div",{staticClass:"q-type"},[s("div",{staticClass:"b-r-a-price"},[5==e.cou_type?[s("strong",{staticClass:"coupons-money"},[t._v(t._s(t.$t("lang.freight_free")))])]:[s("strong",{staticClass:"coupons-money",domProps:{innerHTML:t._s(e.cou_money_formated)}})],s("div",{staticClass:"couons-text text-left",staticStyle:{"padding-top":"1rem"}},[s("span",[t._v(t._s(t.$t("lang.man"))+t._s(e.cou_man)+t._s(t.$t("lang.price_unit")))])])],2),s("div",{staticClass:"b-r-a-con text-left"},[s("div",{staticClass:"range-item"},[t._v(t._s(e.shop_name))]),s("div",{staticClass:"range-item"},[t._v(t._s(t.$t("lang.label_scope"))+"["+t._s(e.cou_type_name)+"]["+t._s(e.cou_goods_name)+"]")]),s("div",{staticClass:"range-item col-7"},[t._v(t._s(t.$t("lang.valid_until"))+t._s(e.cou_end_time))])])])]),s("div",{staticClass:"new-store-radio-box"},[s("i",{staticClass:"iconfont icon-gou"})])])}))]),s("div",{staticClass:"filterlayer_bottom_buttons"},[s("span",{staticClass:"filterlayer_bottom_button bg_1",on:{click:t.closeCoupons}},[t._v(t._s(t.$t("lang.close")))]),s("span",{staticClass:"filterlayer_bottom_button bg_2",on:{click:t.submitCoupons}},[t._v(t._s(t.$t("lang.confirm")))])])]),s("van-popup",{attrs:{position:"right",overlay:t.overlay},model:{value:t.valueCardObject.valueCardBase,callback:function(e){t.$set(t.valueCardObject,"valueCardBase",e)},expression:"valueCardObject.valueCardBase"}},[s("div",{staticClass:"con-filter-div-card"},[s("ul",{staticClass:"padding-all user_valuecard flow-couon-list"},t._l(t.valueCard,function(e,i){return s("li",{key:i,class:{active:t.valueCardObject.valueCardId==e.vc_id},on:{click:function(i){t.valueCardActive(e.vc_id)}}},[s("div",{staticClass:"valuecard_top padding-all"},[s("header",{staticClass:"user_col"},[s("strong",[t._v("NO."+t._s(e.value_card_sn))]),s("label",{staticClass:"user_tag_box active"},[t._v(t._s(t.$t("lang.activated")))])]),s("h3",{staticClass:"text-center user_col"},[s("em",[t._v(t._s(t.$t("lang.label_sum")))]),t._v(t._s(t.currency)+t._s(e.card_money))])]),s("div",{staticClass:"user_card_num padding-all"},[e.vc_dis?s("p",[t._v(t._s(e.vc_dis))]):t._e(),s("p",[t._v(t._s(t.$t("lang.label_expiration_time"))+t._s(e.end_time)),s("label",{staticClass:"valuecard_num"},[s("em",[t._v(t._s(t.$t("lang.face_value"))+":\n\t\t\t\t\t\t\t\t")]),t._v(t._s(t.currency)+t._s(e.card_money))])])]),s("div",{staticClass:"new-store-radio-box"},[s("i",{staticClass:"iconfont icon-gou"})])])}))]),s("div",{staticClass:"filterlayer_bottom_buttons"},[s("span",{staticClass:"filterlayer_bottom_button bg_1",on:{click:t.closeValuecard}},[t._v(t._s(t.$t("lang.close")))]),s("span",{staticClass:"filterlayer_bottom_button bg_2",on:{click:t.submitValuecard}},[t._v(t._s(t.$t("lang.confirm")))])])]),s("van-popup",{staticClass:"show-popup-bottom",attrs:{position:"bottom"},model:{value:t.feeShow,callback:function(e){t.feeShow=e},expression:"feeShow"}},[s("div",{staticClass:"goods-show-title padding-all"},[s("h3",{staticClass:"fl"},[t._v(t._s(t.$t("lang.shipping_mode")))]),s("i",{staticClass:"iconfont icon-close fr",on:{click:t.feeclose}})]),s("div",{staticClass:"s-g-list-con"},[s("div",{staticClass:"select-two"},[s("ul",t._l(t.shippingList,function(e,i){return s("li",{key:i,staticClass:"ect-select",class:{active:t.shipping_id[t.shipping_active_id]==e.shipping_id},on:{click:function(i){t.shipping_select(e)}}},[s("label",{staticClass:"dis-box"},[s("span",{staticClass:"box-flex"},[t._v(t._s(e.shipping_name))]),s("i",{staticClass:"iconfont icon-gou"})])])}))])])]),s("van-popup",{staticClass:"show-popup-bottom",attrs:{position:"bottom"},model:{value:t.paymentShow,callback:function(e){t.paymentShow=e},expression:"paymentShow"}},[s("div",{staticClass:"goods-show-title padding-all"},[s("h3",{staticClass:"fl"},[t._v(t._s(t.$t("lang.payment_mode")))]),s("i",{staticClass:"iconfont icon-close fr",on:{click:t.paymentClose}})]),s("div",{staticClass:"s-g-list-con"},[s("div",{staticClass:"select-two"},[s("ul",t._l(t.payment_method,function(e,i){return s("li",{key:i,staticClass:"ect-select",class:{active:t.pay_id==e.pay_id},on:{click:function(i){t.payment_method_select(e.pay_id,e.pay_name,e.pay_code)}}},[s("label",{staticClass:"dis-box"},[s("span",{staticClass:"box-flex"},[t._v(t._s(e.pay_name))]),s("i",{staticClass:"iconfont icon-gou"})])])}))])])]),s("van-popup",{staticClass:"paypwdShow",model:{value:t.paypwdShow,callback:function(e){t.paypwdShow=e},expression:"paypwdShow"}},[s("van-password-input",{attrs:{value:t.paypwdValue,info:t.$t("lang.paypwd_value_info")},on:{focus:function(e){t.showKeyboard=!0}}}),s("van-number-keyboard",{attrs:{show:t.showKeyboard},on:{input:t.onInput,delete:t.onDelete,blur:function(e){t.showKeyboard=!1},hide:t.onHide}})],1),s("van-popup",{staticClass:"show-popup-bottom",staticStyle:{top:"0"},attrs:{position:"bottom"},model:{value:t.articleShow,callback:function(e){t.articleShow=e},expression:"articleShow"}},[s("div",{staticClass:"goods-show-title padding-all text-all"},[s("h3",{staticClass:"fl"},[t._v(t._s(t.showArticle.title))]),s("i",{staticClass:"iconfont icon-close fr",on:{click:t.articleClose}})]),s("div",{staticClass:"s-g-list-con padding-all",staticStyle:{"max-height":"none"}},[s("div",{staticClass:"t-remark m-b10"},[t._v(t._s(t.showArticle.add_time))]),s("div",{domProps:{innerHTML:t._s(t.showArticle.content)}})])]),s("van-popup",{staticClass:"quanyiShow",model:{value:t.quanyiShow,callback:function(e){t.quanyiShow=e},expression:"quanyiShow"}},[s("div",{staticClass:"quanyi-top"},[s("i",{staticClass:"icon-vip"},[s("img",{staticClass:"img",attrs:{src:i("60c6")}})]),s("div",{staticClass:"name"},[t._v(t._s(t.vipCard.name))]),s("i",{staticClass:"iconfont icon-close",on:{click:t.handelClose}})]),s("div",{staticClass:"quanyi-xian"},[s("span",[t._v(t._s(t.$t("lang.interests")))])]),s("div",{staticClass:"quanyi-list"},t._l(t.vipCard.user_membership_card_rights_list,function(e,i){return s("div",{key:i,staticClass:"item"},[s("i",{staticClass:"icon"},[s("img",{staticClass:"img",attrs:{src:e.icon}})]),s("div",{staticClass:"txt"},[t._v(t._s(e.name))])])}))]),s("CommonNav")],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"user-more"},[i("i",{staticClass:"iconfont icon-moreunfold"})])}],o=(i("8e6e"),i("456d"),i("a481"),i("c5f6"),i("ac6a"),i("ade3")),c=(i("5f1a"),i("a3e2")),l=(i("8fec"),i("7bd9")),r=(i("9e6b"),i("c41f")),u=(i("b000"),i("1a23")),_=(i("e7e5"),i("d399")),d=(i("4ddd"),i("9f14")),p=(i("a44c"),i("e27c")),h=(i("8a58"),i("e41f")),v=(i("e17f"),i("2241")),m=(i("be7f"),i("565f")),b=(i("f908"),i("b528")),g=(i("19de"),i("234f")),f=(i("93ac"),i("bb33")),y=(i("be39"),i("efa0")),C=(i("0653"),i("34e9")),k=(i("c194"),i("7744")),$=(i("a909"),i("3acc")),O=(i("7f7f"),i("3c32"),i("417e")),w=i("4328"),j=i.n(w),x=i("2f62"),I=i("d567");function S(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?S(Object(i),!0).forEach(function(e){Object(o["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var L={data:function(){return{loading:!1,checkoutDisplay:!1,postscriptValue:[],showBase:!1,overlay:!0,invoice:{company:!1,company_name:"",company_tid:"",increment:!1,invoiceType:!1,invoiceTitle:this.$t("lang.person"),invoiceConent:this.$t("lang.no_invoice"),invoiceCompany:[],tax_id:0,invValueRadio:0,companyShow:!1,invoice_id:null},bonusObject:{bonusContent:this.$t("lang.no_use_bonus"),bonusBase:!1,bonusId:0,bonusMoney:0,bonusSn:0},couponsObject:{couponsContent:this.$t("lang.no_use_coupons"),couponsBase:!1,couponsId:0,couponsMoney:0},valueCardObject:{valueCardContent:this.$t("lang.no_use_value_card"),valueCardBase:!1,valueCardId:0,valueCardMoney:0,vc_dis:1,vc_dis_money:0},bonusDisabled:!1,couponsDisabled:!1,feeShow:!1,paymentShow:!1,pay_code:"",pay_id:null,pay_name:"",shippingList:[],shipping_active_id:0,use_surplus_val:0,use_integral_val:0,price:0,rec_type:this.$route.query.rec_type?this.$route.query.rec_type:0,type_id:this.$route.query.type_id?this.$route.query.type_id:0,store_id:this.$route.query.store_id>0?this.$route.query.store_id:0,store_ids:this.$route.query.store_ids>0?this.$route.query.store_ids:0,rec_id:this.$route.query.rec_id?this.$route.query.rec_id:"",store_type:"",store_mobile:0,take_time:"",bs_id:0,team_id:this.$route.query.team_id,t_id:0,extension_id:0,currency:"¥",label_text:this.$t("lang.label_total_amount_payable"),shipping_id:[],shipping_code:[],shipping_type:[],shipping_name:[],format_shipping_fee:[],shipping_fee:[],rate_price:[],checkout_real_name:"",checkout_real_id:"",paypwdShow:!1,paypwdValue:"",showKeyboard:!0,articleCheck:!0,articleShow:!1,showArticle:{},listPackageShow:!1,surplus:0,surplus_status:!1,timer:"",vipReceiveState:!1,quanyiShow:!1,back:"",shopStore:this.$route.query.type?this.$route.query.type:"",ru_ids:this.$route.query.ru_ids?this.$route.query.ru_ids:"",isSingle:this.$route.query.isSingle?this.$route.query.isSingle:""}},components:(s={},Object(o["a"])(s,O["a"].name,O["a"]),Object(o["a"])(s,$["a"].name,$["a"]),Object(o["a"])(s,k["a"].name,k["a"]),Object(o["a"])(s,C["a"].name,C["a"]),Object(o["a"])(s,y["a"].name,y["a"]),Object(o["a"])(s,f["a"].name,f["a"]),Object(o["a"])(s,g["a"].name,g["a"]),Object(o["a"])(s,b["a"].name,b["a"]),Object(o["a"])(s,m["a"].name,m["a"]),Object(o["a"])(s,v["a"].name,v["a"]),Object(o["a"])(s,h["a"].name,h["a"]),Object(o["a"])(s,p["a"].name,p["a"]),Object(o["a"])(s,d["a"].name,d["a"]),Object(o["a"])(s,_["a"].name,_["a"]),Object(o["a"])(s,u["a"].name,u["a"]),Object(o["a"])(s,r["a"].name,r["a"]),Object(o["a"])(s,l["a"].name,l["a"]),Object(o["a"])(s,c["a"].name,c["a"]),Object(o["a"])(s,"CommonNav",I["a"]),s),created:function(){var t=this,e="";e=t.rec_type>0?"../../pages/checkout/checkout?rec_type="+t.rec_type+"&type_id="+t.type_id:"../../pages/checkout/checkout",setTimeout(function(){uni.getEnv(function(t){(t.plus||t.miniprogram)&&uni.redirectTo({url:e})})},100),this.checkoutDefault()},computed:T(T({},Object(x["c"])({checkoutInfo:function(t){return t.shopping.checkoutInfo},checkout_done:function(t){return t.shopping.checkout_done}})),{},{consignee_title:function(){return this.checkoutInfo.consignee?this.checkoutInfo.consignee.consignee+" "+this.checkoutInfo.consignee.mobile:""},consignee_address:function(){return this.checkoutInfo.consignee?this.checkoutInfo.consignee.province_name+this.checkoutInfo.consignee.city_name+this.checkoutInfo.consignee.district_name+this.checkoutInfo.consignee.address:""},address_id:function(){return this.checkoutInfo.consignee&&this.checkoutInfo.consignee.address_id?this.checkoutInfo.consignee.address_id:""},cart_id:function(){var t=[];return this.checkoutInfo.goods_list.forEach(function(e){e.goods.forEach(function(e){t.push(e.rec_id)})}),t},bonusList:function(){return this.checkoutInfo.bonus_list?this.checkoutInfo.bonus_list:0},couponsList:function(){return this.checkoutInfo.coupons_list?this.checkoutInfo.coupons_list:0},valueCard:function(){return this.checkoutInfo.value_card?this.checkoutInfo.value_card:0},isLogin:function(){return null!=localStorage.getItem("token")},payment_method:function(){return this.checkoutInfo.payment_list?this.checkoutInfo.payment_list:""},total:{get:function(){return this.checkoutInfo.total?this.checkoutInfo.total:""},set:function(t){}},amountPrice:{get:function(){var t="";return 4==this.rec_type?(this.price=this.total.exchange_integral,this.currency="",this.price):(0==this.price&&(this.price=this.total.amount),t=this.surplusSelf&&this.surplus>0||!0===this.surplus_status?this.total.amount:this.shippingFee&&this.total.real_goods_count>0&&5!=this.total.cou_type?this.price+this.shippingFee:this.price,Number(t))},set:function(t){this.price=t}},shipping:function(){var t=[];return this.checkoutInfo.goods_list&&this.checkoutInfo.goods_list.forEach(function(e){t.push(e.shipping.default_shipping)}),t},shippingFee:function(){var t=0;return this.shipping_fee&&0==this.store_id&&this.shipping_fee.forEach(function(e){t+=100*Number(e)}),t/100},rateFee:function(){var t=0;return this.rate_price&&0==this.store_id&&this.rate_price.forEach(function(e){t+=Number(e)}),t},surplusSelf:{get:function(){return 0!=this.use_surplus_val},set:function(t){this.use_surplus_val=1==t?1:0}},integralSelf:{get:function(){return 0!=this.use_integral_val},set:function(t){this.use_integral_val=1==t?1:0}},integral:function(){return this.checkoutInfo.integral.length>0?this.checkoutInfo.integral[0].integral:0},storeInfo:function(){return this.checkoutInfo.store},storeCart:function(){return this.checkoutInfo.store_cart},listShow:function(){return this.$store.state.shopping.listShow},invoiceValue:function(){return this.checkoutInfo.invoice_content},use_paypwd:function(){return this.checkoutInfo.use_paypwd?this.checkoutInfo.use_paypwd:0},vipCard:function(){return this.checkoutInfo.use_membership_card>0?this.checkoutInfo.membership_card_info:""}}),methods:{shop_kud:function(){var t=this;this.ru_ids&&this.ru_ids>=0?this.$router.push({name:"checkoutone",query:{stor:1,ru_id:this.ru_ids,rec_type:0,store_id:this.store_ids,rec_id:this.rec_id}}):this.$route.query.goods_id?this.$router.push({name:"checkoutone",query:{stor:1,ru_id:this.ru_id,rec_type:0,store_id:this.store_id,goods_id:this.$route.query.goods_id,spec_arr:this.$route.query.attr_id,num:this.$route.query.num,rec_id:this.rec_id,isSingle:this.isSingle}}):(Object(_["a"])("获取门店列表中"),setTimeout(function(){t.$router.push({name:"storeGoods",query:{rec_id:t.rec_id}})},600))},checkoutDefault:function(){if(this.isLogin)this.store_id>0?this.$store.dispatch("setShoppingCheckout",{rec_type:this.rec_type,store_id:this.store_id,leader_id:this.$route.query.leader_id||0}):this.$store.dispatch("setShoppingCheckout",{rec_type:this.rec_type,type_id:this.type_id,team_id:this.team_id,leader_id:this.$route.query.leader_id||0});else{var t=this.$t("lang.login_user_invalid");this.notLogin(t)}var e=JSON.parse(sessionStorage.getItem("configData"));e&&(this.currency=e.currency_format.replace("%s",""))},checkoutAddress:function(){if(this.checkoutInfo.consignee.nearbyleader>0){var t={lng:this.checkoutInfo.consignee.lng,lat:this.checkoutInfo.consignee.lat};sessionStorage.setItem("addressLngLat",JSON.stringify(t))}var e={routerLink:"checkout"};this.$route.query&&(e={routerLink:"checkout",rec_type:this.rec_type,type_id:this.type_id,team_id:this.team_id,nearbyleader:this.checkoutInfo.consignee.nearbyleader||0}),this.$router.push({name:"address",query:e})},onSubmit:function(){var t=this,e=[],i=window.location.href;if(this.checkoutInfo.goods_list.forEach(function(t){e.push(t.ru_id)}),1==this.rec_type||2==this.rec_type||5==this.rec_type||6==this.rec_type)this.extension_id=this.type_id;else if(7==this.rec_type){if(this.t_id=this.type_id,"cod"==this.pay_code&&0==this.use_surplus_val)return Object(_["a"])(this.$t("lang.team_not_pay_delivery")),!1}else 8==this.rec_type&&(this.bs_id=this.type_id);if(("balance"==this.pay_code||this.use_surplus_val>0||this.valueCardObject.valueCardId>0)&&this.use_paypwd>0&&this.paypwdValue.length<6)return this.paypwdShow=!0,this.showKeyboard=!0,!1;if(this.checkoutInfo.cross_border){if(""==this.checkout_real_name)return Object(_["a"])(this.$t("lang.truename_not_null")),!1;if(""==this.checkout_real_id)return Object(_["a"])(this.$t("lang.id_number_not_null")),!1}if(Number(this.surplus)>Number(this.checkoutInfo.user_money))return Object(_["a"])(this.$t("lang.use_balance_propmt_1")),!1;if(""===this.checkoutInfo.user_info.mobile_phone)return v["a"].confirm({message:this.$t("lang.is_user_bind_mobile_phone"),className:"text-center"}).then(function(){t.$router.push({name:"bindphone",query:{type:"reset",url:i}})}).catch(function(){}),!1;this.loading=!0;var s=this.invoice.company?this.invoice.company_name:this.invoice.invoiceTitle,a=this.invoice.invoiceType?this.invoice.tax_id:this.invoice.company_tid,n=this.checkoutInfo.isshipping_list;if(0==n.length)return Object(_["a"])(this.$t("lang.not_shipping")),void setTimeout(function(){t.$router.push({name:"cart"})},600);var o={cart_value:n,flow_type:this.checkoutInfo.flow_type,store_id:this.store_id,store_type:"",store_mobile:this.store_mobile,take_time:this.take_time,pay_type:1,pay_id:this.pay_id,ru_id:e,shipping:this.shipping_id,shipping_code:this.shipping_code,shipping_type:this.shipping_type,point_id:0,shipping_dateStr:0,is_surplus:this.use_surplus_val,surplus:this.surplus,use_integral:this.use_integral_val,integral:this.integral,bonus_id:this.bonusObject.bonusId,bonus:this.bonusObject.bonusMoney,bonus_sn:this.bonusObject.bonusSn,uc_id:this.couponsObject.couponsId,coupons:this.couponsObject.couponsMoney,vc_id:this.valueCardObject.valueCardId,use_value_card:this.valueCardObject.valueCardMoney,vc_dis_money:this.valueCardObject.vc_dis_money,goods_amount:this.amountPrice,discount:0,how_oos:0,postscript:this.postscriptValue,invoice:0,inv_type:this.invoice.invoiceType?1:0,inv_payee:s,tax_id:a,inv_content:this.invoice.invoiceConent,need_inv:0,card_message:"",tax:0,pack:0,card:0,vat_id:0,need_insure:0,bs_id:this.bs_id,t_id:this.t_id,team_id:this.team_id,extension_id:this.extension_id,rel_name:this.checkout_real_name,id_num:this.checkout_real_id,address_id:this.address_id,pay_pwd:this.paypwdValue,referer:"H5",order_membership_card_id:this.vipReceiveState?this.vipCard.order_membership_card_id:0,membership_card_discount_price:this.vipCard.membership_card_discount_price,leader_id:this.$route.query.leader_id||0};0==this.store_id&&(this.checkoutInfo.noshipping_list.length>0?v["a"].confirm({message:this.$t("lang.noshipping_list_cur_propmt"),className:"text-center"}).then(function(){t.$store.dispatch("setCheckoutSubmit",o).then(function(e){1==e.data.error?(Object(_["a"])(e.data.msg),t.loading=!1):(_["a"].success({duration:1e3,forbidClick:!0,loadingType:"spinner",message:t.$t("lang.submit_success")}),t.$router.push({name:"done",query:{order_sn:e.data}}))})}).catch(function(){t.$router.push({name:"cart"})}):this.checkoutInfo.isshipping_list.length>0&&this.$store.dispatch("setCheckoutSubmit",o).then(function(e){1==e.data.error?(e.data.url?v["a"].confirm({message:e.data.msg,className:"text-center"}).then(function(){window.location.href=e.data.url}):Object(_["a"])(e.data.msg),t.loading=!1,t.paypwdValue=""):(_["a"].success({duration:1e3,forbidClick:!0,loadingType:"spinner",message:t.$t("lang.submit_success")}),t.$router.push({name:"done",query:{order_sn:e.data}}))}))},notLogin:function(t){var e=this,i=window.location.href;v["a"].confirm({message:t,className:"text-center"}).then(function(){e.$router.push({name:"login",query:{redirect:{name:"cart",url:i}}})}).catch(function(){})},invoiceSelect:function(){var t=this;if(this.checkoutInfo.cross_border)return!1;this.showBase=!0,this.$http.get("".concat(window.ROOT_URL,"api/invoice")).then(function(e){var i=e.data.data;""==i.user_vat_invoice?t.invoice.increment=!1:(t.invoice.increment=!0,t.invoice.tax_id=i.user_vat_invoice.id,t.invoice.invoiceCompany=i.order_invoice_info)})},invTab:function(t){1==t?(this.invoice.company=!1,this.invoice.company_name="",this.invoice.company_tid=""):(this.invoice.company=!0,this.invoice.invoiceCompany.length>0&&(this.invoice.invoice_id=this.invoice.invoiceCompany[0].invoice_id,this.invoice.company_name=this.invoice.invoiceCompany[0].inv_payee,this.invoice.company_tid=this.invoice.invoiceCompany[0].tax_id))},companySelect:function(){this.invoice.companyShow=!0},companyClose:function(){this.invoice.companyShow=!1},invoice_company_select:function(t,e,i){this.invoice.invoice_id=t,this.invoice.company_name=e,this.invoice.company_tid=i},incrementHandle:function(t){var e=this;1==t?this.invoice.invoiceType=!1:1==this.invoice.increment?this.invoice.invoiceType=!0:v["a"].confirm({message:this.$t("lang.apply_vat_tax_invoice"),className:"text-center"}).then(function(){e.$router.push({name:"invForm"})}).catch(function(){})},invValueRadioHandle:function(){var t=this;this.invoiceValue.forEach(function(e,i){i==t.invoice.invValueRadio&&(t.invoice.invoiceConent=e)})},submitBtn:function(){if(this.invoice.company){if(""==this.invoice.company_name)return Object(_["a"])(this.$t("lang.fill_in_company_name")),!1;if(""==this.invoice.company_tid)return Object(_["a"])(this.$t("lang.fill_in_taxpayer_id_number")),!1;this.showBase=!1}else this.showBase=!1},bonusHandle:function(){this.bonusObject.bonusBase=!0,this.surplusSelf=!1},bonusActive:function(t){this.bonusObject.bonusId!=t?this.bonusDisabled||(this.bonusObject.bonusId=t):this.bonusObject.bonusId=0},closeBonus:function(){this.bonusObject.bonusBase=!1},submitBonus:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/trade/changebon"),j.a.stringify({bonus_id:this.bonusObject.bonusId,total:this.total,shopping_fee:this.shippingFee})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),i.bonus_money>0?t.bonusObject.bonusContent=i.bonus_money_formated:t.bonusObject.bonusContent=t.$t("lang.no_use_bonus"),i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card"),t.total.bonus_money=i.bonus_money,t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.valueCardObject.valueCardMoney=i.card_money,t.bonusObject.bonusMoney=i.bonus_money,t.valueCardObject.vc_dis_money=i.vc_dis_money,t.valueCardObject.vc_dis=i.vc_dis,t.valueCardObject.valueCardId=i.value_card_id,void 0!==i.check_type&&t.toggleDisabled("bonus",i.check_type)}),this.bonusObject.bonusBase=!1,this.surplus_status=!1},couponsHandle:function(){this.couponsObject.couponsBase=!0,this.surplusSelf=!1},couponsActive:function(t){this.couponsObject.couponsId!=t?this.couponsDisabled||(this.couponsObject.couponsId=t):this.couponsObject.couponsId=0},closeCoupons:function(){this.couponsObject.couponsBase=!1},submitCoupons:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/trade/changecou"),j.a.stringify({uc_id:this.couponsObject.couponsId,total:this.total,shipping_fee:this.shippingFee,shipping_id:this.shipping_id})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),5==i.cou_type?t.couponsObject.couponsContent=t.$t("lang.coupon_tab_3"):i.coupons_money>0?t.couponsObject.couponsContent=i.coupons_money_formated:t.couponsObject.couponsContent=t.$t("lang.no_use_coupons"),i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card"),t.total.coupons_money=i.coupons_money,t.couponsObject.couponsMoney=i.coupons_money,t.valueCardObject.valueCardMoney=i.card_money,t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.valueCardObject.vc_dis_money=i.vc_dis_money,t.valueCardObject.vc_dis=i.vc_dis,t.valueCardObject.valueCardId=i.value_card_id,void 0!==i.check_type&&t.toggleDisabled("coupons",i.check_type)}),this.couponsObject.couponsBase=!1,this.surplus_status=!1},toggleDisabled:function(t,e){"bonus"==t?this.couponsDisabled=1==e:"coupons"==t&&(this.bonusDisabled=1==e)},valueCardHandle:function(){this.valueCardObject.valueCardBase=!0,this.surplusSelf=!1},valueCardActive:function(t){this.valueCardObject.valueCardId!=t?this.valueCardObject.valueCardId=t:this.valueCardObject.valueCardId=0},closeValuecard:function(){this.valueCardObject.valueCardBase=!1,this.valueCardObject.valueCardId=0},submitValuecard:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/trade/changecard"),j.a.stringify({vid:this.valueCardObject.valueCardId,total:this.total,shopping_fee:this.shippingFee})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card"),t.valueCardObject.vc_dis=i.vc_dis,t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.valueCardObject.valueCardMoney=i.card_money,t.total.card_money=i.card_money,t.valueCardObject.vc_dis_money=i.vc_dis_money}),this.valueCardObject.valueCardBase=!1,this.surplus_status=!1},feeHandle:function(t,e){var i=this,s=0,a="",n=this.checkoutInfo.flow_type,o={country:1,province:this.checkoutInfo.consignee.province,city:this.checkoutInfo.consignee.city,district:this.checkoutInfo.consignee.district,street:this.checkoutInfo.consignee.street};this.feeShow=!0,this.shipping_active_id=t,this.checkoutInfo.goods_list[t].goods.forEach(function(t){a+=t.rec_id+",",s=t.ru_id}),a=a.substr(0,a.length-1),this.$store.dispatch("setShipping",{rec_ids:a,ru_id:s,consignee:o,flow_type:n}).then(function(t){t.shipping&&(i.shippingList=t.shipping)})},feeclose:function(){this.feeShow=!1},shipping_select:function(t){this.shipping_id.splice(this.shipping_active_id,1,t.shipping_id),this.shipping_code.splice(this.shipping_active_id,1,t.shipping_code),this.shipping_name.splice(this.shipping_active_id,1,t.shipping_name),this.shipping_fee.splice(this.shipping_active_id,1,t.shipping_fee),this.format_shipping_fee.splice(this.shipping_active_id,1,t.format_shipping_fee),this.rate_price.splice(this.shipping_active_id,1,t.rate_price),this.feeclose()},paymentSelect:function(){this.paymentShow=!0},paymentClose:function(){this.paymentShow=!1},payment_method_select:function(t,e,i){this.pay_id=t,this.pay_name=e,this.pay_code=i,this.paymentClose()},integralSelfHandle:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/trade/changeint"),j.a.stringify({total:this.total,integral_type:this.use_integral_val,cart_value:this.cart_id,flow_type:this.checkoutInfo.flow_type,shopping_fee:this.shippingFee})).then(function(e){var i=e.data.data;i&&(t.$store.dispatch("setCheckoutTotal",i),t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.total.integral=i.integral,t.valueCardObject.valueCardMoney=i.card_money,i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card"),t.total.integral_money=i.integral_money,t.valueCardObject.vc_dis_money=i.vc_dis_money,t.valueCardObject.vc_dis=i.vc_dis,t.valueCardObject.valueCardId=i.value_card_id,t.surplusSelf=!1)})},surplusSelfHandle:function(){var t=this;if(this.surplus<0)return Object(_["a"])("请填写合法值"),!1;clearTimeout(this.timer),this.timer=setTimeout(function(){t.$http.post("".concat(window.ROOT_URL,"api/trade/changesurplus"),j.a.stringify({total:t.total,surplus:t.surplus,shopping_fee:t.shippingFee})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.total.surplus=i.surplus,t.total.surplus_formated=i.surplus_formated,t.surplus=i.surplus,t.surplus_status=!0,t.valueCardObject.valueCardMoney=i.card_money,t.valueCardObject.vc_dis=i.vc_dis,t.valueCardObject.valueCardId=i.value_card_id,i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card")})},1e3)},onListShow:function(t){var e=!this.listShow[t];this.listShow.splice(t,1,e)},onListPackage:function(){this.listPackageShow=!this.listPackageShow},onInput:function(t){this.paypwdValue=(this.paypwdValue+t).slice(0,6),6==this.paypwdValue.length&&(this.paypwdShow=!1,this.onSubmit())},onDelete:function(){this.paypwdValue=this.paypwdValue.slice(0,this.paypwdValue.length-1)},onHide:function(){this.paypwdValue=""},clickArticle:function(t){void 0!=t&&(this.showArticle=this.checkoutInfo.article_list[t],this.articleShow=!0)},articleClose:function(){this.articleShow=!1},productLink:function(t){0==this.rec_type&&"package_buy"!=t.extension_code?this.$router.push({name:"goods",params:{id:t.goods_id}}):1==this.rec_type?this.$router.push({name:"groupbuy-detail",params:{group_buy_id:this.type_id}}):2==this.rec_type?this.$router.push({name:"auction-detail",params:{act_id:this.type_id}}):4==this.rec_type?this.$router.push({name:"exchange-detail",params:{id:this.type_id}}):5==this.rec_type?this.$router.push({name:"presale-detail",params:{act_id:this.type_id}}):6==this.rec_type?this.$router.push({name:"seckill-detail",query:{seckill_id:this.type_id,tomorrow:0}}):7==this.rec_type?this.$router.push({name:"team-detail",query:{goods_id:t.goods_id,team_id:this.team_id}}):8==this.rec_type?this.$router.push({name:"bargain-detail",params:{id:this.type_id}}):"package_buy"==t.extension_code&&this.$router.push({name:"package"})},drpApplyHref:function(t){this.$router.push({name:"drp-apply",query:{card_id:t}})},vipReceive:function(){var t=this;this.vipReceiveState=!this.vipReceiveState,this.surplusSelf=!1,this.$http.post("".concat(window.ROOT_URL,"api/trade/change_membership_card"),j.a.stringify({total:this.total,order_membership_card_id:this.vipReceiveState?this.vipCard.order_membership_card_id:0,membership_card_discount_price:this.vipCard.membership_card_discount_price})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.total.membership_card_buy_money=i.membership_card_buy_money,t.total.membership_card_buy_money_formated=i.membership_card_buy_money_formated,t.total.membership_card_discount_price=i.membership_card_discount_price,t.total.membership_card_discount_price_formated=i.membership_card_discount_price_formated,t.vipCard.membership_card_buy_money=i.membership_card_buy_money,t.vipCard.membership_card_buy_money_formated=i.membership_card_buy_money_formated,t.vipCard.membership_card_discount_price=i.membership_card_discount_price,t.vipCard.membership_card_discount_price_formated=i.membership_card_discount_price_formated})},quanyiClick:function(){this.quanyiShow=!0},handelClose:function(){this.quanyiShow=!1}},watch:{checkoutInfo:function(){var t=this;if(0==this.checkoutInfo.length)return this.$router.replace({name:"cart"}),!1;if(this.checkoutDisplay=!this.checkoutInfo.error,this.checkoutInfo.error){switch(this.checkoutInfo.error){case"address":this.$route.query?this.$router.push({name:"addAddressForm",query:{routerLink:"checkout",entrance:"first",rec_type:this.rec_type,type_id:this.type_id,team_id:this.team_id,back:this.back}}):this.$router.push({name:"addAddressForm",query:{routerLink:"checkout",entrance:"first",back:this.back}});break;case"excess":v["a"].alert({message:this.checkoutInfo.msg,className:"text-center",confirmButtonText:this.$t("lang.back_cart")}).then(function(){t.$router.push({name:"cart"})});break}return!1}""==this.pay_name&&this.payment_method.forEach(function(e){"onlinepay"==e.pay_code&&(t.pay_name=e.pay_name,t.pay_id=e.pay_id,t.pay_code=e.pay_code)}),this.storeCart&&(this.store_type="",this.store_mobile=this.storeCart.store_mobile,this.take_time=this.storeCart.take_time),this.checkoutInfo.consignee&&(this.checkout_real_id=this.checkoutInfo.consignee.id_num?this.checkoutInfo.consignee.id_num:"",this.checkout_real_name=this.checkoutInfo.consignee.rel_name?this.checkoutInfo.consignee.rel_name:""),1==this.checkoutInfo.can_invoice&&(this.invoice.invoiceConent=this.invoiceValue[0])},payment_method:function(){if(""==this.payment_method&&this.checkoutInfo)return Object(_["a"])(this.$t("lang.payment_method_not_installed")),!1},surplusSelf:function(){var t=this;this.surplusSelf||(_["a"].loading(Object(o["a"])({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0,mask:!0},"forbidClick",!0)),clearTimeout(this.timer),this.timer=setTimeout(function(){t.$http.post("".concat(window.ROOT_URL,"api/trade/changesurplus"),j.a.stringify({total:t.total,surplus:0,shopping_fee:t.shippingFee})).then(function(e){var i=e.data.data;t.$store.dispatch("setCheckoutTotal",i),t.amountPrice=i.amount,t.ratePrice=i.rate_price,t.total.surplus=i.surplus,t.total.surplus_formated=i.surplus_formated,t.surplus=i.surplus,t.surplus_status=!0,t.valueCardObject.vc_dis=i.vc_dis,t.valueCardObject.valueCardMoney=i.card_money,t.valueCardObject.valueCardId=i.value_card_id,i.card_money>0?t.valueCardObject.valueCardContent=i.card_money_formated:t.valueCardObject.valueCardContent=t.$t("lang.no_use_value_card"),_["a"].clear()})},1e3))},shipping:function(){var t=this;this.shipping.forEach(function(e){if(void 0==e&&0==t.store_id)return t.shipping_name.push(""),Object(_["a"])(t.$t("lang.noshipping_list_propmt")),!1;t.shipping_id.push(e.shipping_id),t.shipping_code.push(e.shipping_code),t.shipping_name.push(e.shipping_name),t.format_shipping_fee.push(e.format_shipping_fee),t.shipping_fee.push(e.shipping_fee),t.shipping_type.push(0),t.rate_price.push(e.rate_price)})}},beforeRouteEnter:function(t,e,i){i(function(t){t.back=e.fullPath})}},q=L,P=(i("648a"),i("2877")),H=Object(P["a"])(q,a,n,!1,null,"3c18f6f6",null);H.options.__file="Checkout.vue";e["default"]=H.exports},"648a":function(t,e,i){"use strict";var s=i("b2b7"),a=i.n(s);a.a},b2b7:function(t,e,i){}}]);
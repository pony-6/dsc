(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["9d48"],{"9d48":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"con bg-color-write"},[s("div",{staticClass:"user-login-box"},[s("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[s("div",{staticClass:"user-login-head"},[s("i",{staticClass:"iconfont icon-back",on:{click:t.onClickHome}}),s("h1",[t._v(t._s(t.$t("lang.set_phone")))])]),1==t.step?[s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"sms"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-key"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",disabled:!0},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1)])]),s("ec-form-item",{attrs:{prop:"imgverify"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-pic"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.captcha_img")},model:{value:t.imgverifyValue,callback:function(e){t.imgverifyValue=e},expression:"imgverifyValue"}})],1),s("div",{staticClass:"key"},[s("img",{staticClass:"j-verify-img",attrs:{src:t.captcha},on:{click:t.clickCaptcha}})])])]),s("ec-form-item",{attrs:{prop:"mobile"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-mobiles"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.get_sms_code")},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1),s("div",{staticClass:"key"},[t.button_type?s("label",{on:{click:t.sendVerifyCode}},[t._v(t._s(t.$t("lang.get_code")))]):s("label",[t._v(t._s(t.button_text))])])])])],1),s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:t.verifyMobile}},[t._v(" "+t._s(t.$t("lang.next_step"))+"  ")])]:[s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"imgverify"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-pic"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.captcha_img")},model:{value:t.imgverifyValue,callback:function(e){t.imgverifyValue=e},expression:"imgverifyValue"}})],1),s("div",{staticClass:"key"},[s("img",{staticClass:"j-verify-img",attrs:{src:t.captcha},on:{click:t.clickCaptcha}})])])]),s("ec-form-item",{attrs:{prop:"mobile"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-mobiles"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",placeholder:t.mobile_placeholder},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),s("div",{staticClass:"key"},[t.button_type?s("label",{on:{click:t.sendVerifyCode}},[t._v(t._s(t.$t("lang.get_code")))]):s("label",[t._v(t._s(t.button_text))])])])]),s("ec-form-item",{attrs:{prop:"sms"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-key"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.get_sms_code")},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1)])])],1),s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:t.submitBtn}},[t._v(t._s(t.$t("lang.bind_on")))])]],2)],1)])},a=[],c=s("88d8"),o=(s("7f7f"),s("e7e5"),s("d399")),n=(s("10cb"),s("450d"),s("f3ad")),l=s.n(n),r=(s("eca7"),s("3787")),u=s.n(r),m=(s("425f"),s("4105")),b=s.n(m),d=s("4328"),p=s.n(d),f=(s("2f62"),s("bc3a"),{name:"login",data:function(){return{imgverifyValue:"",sms:"",mobile:"",button_text:this.$t("lang.send_again_60"),send_again:this.$t("lang.send_again"),button_type:!0,step:1}},components:Object(c["a"])({EcForm:b.a,EcFormItem:u.a,EcInput:l.a},o["a"].name,o["a"]),created:function(){this.$store.dispatch("setImgVerify"),this.getUser()},computed:{mobile_placeholder:function(){return this.$t("lang.enter_mobile")},captcha:function(){return this.$store.state.imgVerify.captcha},client:function(){return this.$store.state.imgVerify.client}},methods:{getUser:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/user/get-userid")).then(function(e){"success"==e.data.status?t.mobile=e.data.data.mobile_phone:e.data.errors&&Object(o["a"])(data.errors.message)})},clickCaptcha:function(){this.$store.dispatch("setImgVerify")},sendVerifyCode:function(){var t=this,e={captcha:this.imgverifyValue,client:this.client,mobile:this.mobile};if(!this.checkMobile())return Object(o["a"])(this.$t("lang.phone_number_format")),!1;this.$store.dispatch("setSendVerify",e).then(function(e){if("success"==e){t.button_type=!1;var s=60,i=setInterval(function(){s--,s?t.button_text=t.send_again+"("+s+"s)":(t.button_type=!0,clearInterval(i))},1e3)}})},verifyMobile:function(){var t=this;return this.checkMobile()?""==this.sms?(Object(o["a"])(this.$t("lang.get_sms_code")),!1):void this.$http.post("".concat(window.ROOT_URL,"api/accountsafe/change_mobile"),p.a.stringify({mobile:this.mobile,client:this.client,code:this.sms,step:1})).then(function(e){var s=e.data;"success"==s.status?(Object(o["a"])(s.data.msg),t.step=2,t.mobile="",t.imgverifyValue="",t.sms="",t.clickCaptcha()):s.errors&&Object(o["a"])(s.errors.message)}):(Object(o["a"])(this.$t("lang.phone_number_format")),!1)},submitBtn:function(){var t=this;return this.checkMobile()?""==this.sms?(Object(o["a"])(this.$t("lang.get_sms_code")),!1):void this.$http.post("".concat(window.ROOT_URL,"api/accountsafe/change_mobile"),p.a.stringify({mobile:this.mobile,client:this.client,code:this.sms,step:2})).then(function(e){var s=e.data;"success"==s.status?t.$router.push({name:"user"}):s.errors&&Object(o["a"])(s.errors.message)}):(Object(o["a"])(this.$t("lang.phone_number_format")),!1)},onClickHome:function(){this.$router.push({name:"accountsafe"})},checkMobile:function(){var t=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;return!!t.test(this.mobile)}},watch:{}}),h=f,v=s("2877"),g=Object(v["a"])(h,i,a,!1,null,null,null);g.options.__file="Resetphone.vue";e["default"]=g.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09ed"],{"1b6f":function(e,t,s){},"1d3c":function(e,t,s){"use strict";s.r(t);var i,n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"con bg-color-write"},[s("div",{staticClass:"user-login-box"},[e.curType||0==e.type?s("div",{staticClass:"user-login-head"},[s("i",{staticClass:"iconfont icon-back",on:{click:e.onClickHome}}),s("h1",[e._v(e._s(e.$t("lang.forget_password")))])]):e._e(),0==e.type?s("div",{staticClass:"forgetpwd-step-one"},[s("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"imgverify"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[e._v("账号")]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",placeholder:"用户名/手机号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)])]),s("ec-form-item",{attrs:{prop:"imgverify"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[e._v("验证码")]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",placeholder:e.$t("lang.captcha_img")},model:{value:e.imgverifyValue,callback:function(t){e.imgverifyValue=t},expression:"imgverifyValue"}})],1),s("div",{staticClass:"key"},[s("img",{staticClass:"j-verify-img",attrs:{src:e.captcha},on:{click:e.clickCaptcha}})])])])],1),s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:function(t){e.submitStep(e.type)}}},[e._v("下一步")])])],1):e._e(),1==e.type?s("div",{staticClass:"forgetpwd-step-two"},[e.curType?[s("div",{staticClass:"forgetpwd-warp"},[s("div",{staticClass:"shop_logo"},[s("img",{staticClass:"img",attrs:{src:e.configData.shop_logo}})]),s("div",{staticClass:"text"},[e._v(e._s(e.userinfo.user_name_sign))]),s("div",{staticClass:"text"},[e._v("验证码将发送到绑定"+e._s("mobile_phone"==e.curType?"手机号":"邮箱"))]),s("div",{staticClass:"text"},[e._v(e._s("mobile_phone"==e.curType?e.userinfo.mobile_phone_sign:e.userinfo.email_sign))])]),s("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"sms"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",placeholder:"请填写验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}})],1),s("div",{staticClass:"key"},[e.button_type?s("label",{on:{click:e.sendVerifyCode}},[e._v("发送验证码")]):s("label",[e._v(e._s(e.button_text))])])])])],1),s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:function(t){e.submitStep(e.type)}}},[e._v("下一步")]),"mobile_phone"==e.curType&&1==e.userinfo.is_email?s("div",{staticClass:"user-login-list"},[s("a",{staticClass:"list-new",on:{click:function(t){e.tabClick("email")}}},[e._v("邮箱验证")])]):e._e(),"email"==e.curType&&1==e.userinfo.is_mobile_phone?s("div",{staticClass:"user-login-list"},[s("a",{staticClass:"list-new",on:{click:function(t){e.tabClick("mobile_phone")}}},[e._v("手机验证")])]):e._e()])]:e._e()],2):e._e(),2==e.type?s("div",{staticClass:"forgetpwd-step-three"},[s("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"sms"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}})],1)])])],1),s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:e.submitBtn}},[e._v("完成")])])],1):e._e()])])},a=[],o=s("88d8"),r=(s("8a58"),s("e41f")),l=(s("a7cc"),s("450d"),s("df33")),c=s.n(l),u=(s("7f7f"),s("e7e5"),s("d399")),p=(s("10cb"),s("f3ad")),d=s.n(p),f=(s("eca7"),s("3787")),h=s.n(f),m=(s("425f"),s("4105")),_=s.n(m),v=(s("2f62"),s("bc3a"),s("4328")),b=s.n(v),y={name:"forgetpwd",components:(i={EcForm:_.a,EcFormItem:h.a,EcInput:d.a},Object(o["a"])(i,u["a"].name,u["a"]),Object(o["a"])(i,c.a.name,c.a),Object(o["a"])(i,r["a"].name,r["a"]),i),data:function(){return{username:"",imgverifyValue:"",sms:"",pwd:"",button_text:this.$t("lang.send_again_60"),send_again:this.$t("lang.send_again"),button_type:!0,type:0,configData:JSON.parse(sessionStorage.getItem("configData")),userinfo:"",curType:""}},created:function(){0==this.type&&this.$store.dispatch("setImgVerify")},computed:{captcha:function(){return this.$store.state.imgVerify.captcha},client:function(){return this.$store.state.imgVerify.client},isTypeValue:function(){var e="";return 1==this.userinfo.is_mobile_phone&&1==this.userinfo.is_email?e="mobile_phone":1==this.userinfo.is_mobile_phone||1==this.userinfo.is_email?(1==this.userinfo.is_mobile_phone&&(e="mobile_phone"),1==this.userinfo.is_email&&(e="email")):e="",e}},methods:{clickCaptcha:function(){this.$store.dispatch("setImgVerify")},onClickHome:function(){this.type>0?(this.type--,0==this.type&&(this.$store.dispatch("setImgVerify"),this.userinfo="",this.username="",this.imgverifyValue="")):this.$router.push({name:"login"})},sendVerifyCode:function(){var e=this;if("mobile_phone"==e.curType){var t={mobile:e.userinfo.mobile_phone,send_from:"reset_password"};e.$store.dispatch("setSendVerify",t).then(function(t){if("success"==t){e.button_type=!1;var s=60,i=setInterval(function(){s--,s?e.button_text=e.send_again+"("+s+"s)":(e.button_type=!0,clearInterval(i))},1e3)}})}else"email"==e.curType&&e.$http.post("".concat(window.ROOT_URL,"api/user/reset_email"),b.a.stringify({email:e.userinfo.email})).then(function(t){var s=t.data;if("success"==s.status){Object(u["a"])(s.data.msg),e.button_type=!1;var i=60,n=setInterval(function(){i--,i?e.button_text=e.send_again+"("+i+"s)":(e.button_type=!0,i=60,clearInterval(n))},1e3)}else Object(u["a"])(s.errors.message)})},submitStep:function(e){var t=this;if(0==this.type){if(""==this.username)return Object(u["a"])("用户名不能为空"),!1;if(""==this.imgverifyValue)return Object(u["a"])(this.$t("lang.captcha_img")),!1;this.$http.post("".concat(window.ROOT_URL,"api/user/forget"),b.a.stringify({user_name:this.username,captcha:this.imgverifyValue,client:this.client})).then(function(e){var s=e.data;"success"==s.status?(t.userinfo=s.data,t.type=1):Object(u["a"])(s.errors.message)})}else if(1==this.type){if(""==this.sms)return Object(u["a"])("请填写验证码"),!1;"mobile_phone"==this.curType?this.$http.post("".concat(window.ROOT_URL,"api/user/verification_sms"),b.a.stringify({mobile_phone:this.userinfo.mobile_phone,code:this.sms})).then(function(e){var s=e.data;"success"==s.status?t.type=2:Object(u["a"])(s.errors.message)}):"email"==this.curType&&this.$http.post("".concat(window.ROOT_URL,"api/user/verification_email"),b.a.stringify({email:this.userinfo.email,code:this.sms})).then(function(e){var s=e.data;"success"==s.status?t.type=2:Object(u["a"])(s.errors.message)})}},submitBtn:function(){var e=this;this.$http.post("".concat(window.ROOT_URL,"api/user/reset_password"),b.a.stringify({user_name:this.userinfo.user_name,new_password:this.pwd})).then(function(t){var s=t.data;"success"==s.status?(Object(u["a"])("密码修改成功"),e.$router.push({name:"login"})):Object(u["a"])(s.errors.message)})},tabClick:function(e){this.curType=e}},watch:{isTypeValue:function(){this.curType=this.isTypeValue}}},g=y,C=(s("924b"),s("2877")),w=Object(C["a"])(g,n,a,!1,null,"336032c4",null);w.options.__file="ForgetPwd.vue";t["default"]=w.exports},"8a58":function(e,t,s){"use strict";s("68ef"),s("4d75")},"924b":function(e,t,s){"use strict";var i=s("1b6f"),n=s.n(i);n.a},a7cc:function(e,t,s){},df33:function(e,t,s){e.exports=function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=61)}({0:function(e,t){e.exports=function(e,t,s,i,n,a){var o,r=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,r=e.default);var c,u="function"===typeof r?r.options:r;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),s&&(u.functional=!0),n&&(u._scopeId=n),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=i),c){var p=u.functional,d=p?u.render:u.beforeCreate;p?(u._injectStyles=c,u.render=function(e,t){return c.call(t),d(e,t)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:o,exports:r,options:u}}},1:function(e,t){e.exports=s("d010")},13:function(e,t){e.exports=s("5128")},61:function(e,t,s){"use strict";t.__esModule=!0;var i=s(62),n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}n.default.install=function(e){e.component(n.default.name,n.default)},t.default=n.default},62:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(63),n=s.n(i),a=s(64),o=s(0),r=!1,l=null,c=null,u=null,p=o(n.a,a["a"],r,l,c,u);t["default"]=p.exports},63:function(e,t,s){"use strict";t.__esModule=!0;var i=s(13),n=c(i),a=s(8),o=c(a),r=s(1),l=c(r);function c(e){return e&&e.__esModule?e:{default:e}}t.default={name:"ElDialog",mixins:[n.default,l.default,o.default],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1}},data:function(){return{closed:!1}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){t.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},64:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"dialog-fade"},on:{"after-leave":e.afterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.handleWrapperClick(t)}}},[s("div",{ref:"dialog",staticClass:"el-dialog",class:[{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style},[s("div",{staticClass:"el-dialog__header"},[e._t("title",[s("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?s("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[s("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?s("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?s("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},n=[],a={render:i,staticRenderFns:n};t["a"]=a},8:function(e,t){e.exports=s("2bb5")}})},e41f:function(e,t,s){"use strict";var i=s("fe7e"),n=s("6605");t["a"]=Object(i["a"])({render:function(){var e,t=this,s=t.$createElement,i=t._self._c||s;return i("transition",{attrs:{name:t.currentTransition}},[t.shouldRender?i("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],class:t.b((e={},e[t.position]=t.position,e))},[t._t("default")],2):t._e()])},name:"popup",mixins:[n["a"]],props:{transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{currentTransition:function(){return this.transition||(""===this.position?"van-fade":"popup-slide-"+this.position)}}})}}]);
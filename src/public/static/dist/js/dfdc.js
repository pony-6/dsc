(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dfdc"],{dfdc:function(t,e,i){"use strict";i.r(e);var s,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"con bg-color-write"},[i("div",{staticClass:"user-login-box"},[i("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[i("div",{staticClass:"user-login-head"},[i("i",{staticClass:"iconfont icon-back",on:{click:t.onClickHome}}),t.type?i("h1",[t._v(t._s(t.$t("lang.bind_phone")))]):i("h1",[t._v(t._s(t.$t("lang.set_phone")))])]),i("div",{staticClass:"user-login-ul"},[i("ec-form-item",{attrs:{prop:"imgverify"}},[i("div",{staticClass:"item-input dis-box"},[i("div",{staticClass:"label"},[i("i",{staticClass:"iconfont icon-pic"})]),i("div",{staticClass:"value box-flex"},[i("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.captcha_img")},model:{value:t.imgverifyValue,callback:function(e){t.imgverifyValue=e},expression:"imgverifyValue"}})],1),i("div",{staticClass:"key"},[i("img",{staticClass:"j-verify-img",attrs:{src:t.captcha},on:{click:t.clickCaptcha}})])])]),i("ec-form-item",{attrs:{prop:"mobile"}},[i("div",{staticClass:"item-input dis-box"},[i("div",{staticClass:"label"},[i("i",{staticClass:"iconfont icon-mobiles"})]),i("div",{staticClass:"value box-flex"},[i("ec-input",{attrs:{type:"tel",placeholder:t.mobile_placeholder},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),i("div",{staticClass:"key"},[t.button_type?i("label",{on:{click:t.sendVerifyCode}},[t._v(t._s(t.$t("lang.get_code")))]):i("label",[t._v(t._s(t.button_text))])])])]),i("ec-form-item",{attrs:{prop:"sms"}},[i("div",{staticClass:"item-input dis-box"},[i("div",{staticClass:"label"},[i("i",{staticClass:"iconfont icon-key"})]),i("div",{staticClass:"value box-flex"},[i("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.get_sms_code")},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1)])])],1),i("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:t.submitBtn}},[t._v(t._s(t.$t("lang.bind_on")))])])],1)])},n=[],c=i("88d8"),o=(i("e17f"),i("2241")),l=(i("7f7f"),i("e7e5"),i("d399")),r=(i("10cb"),i("450d"),i("f3ad")),u=i.n(r),m=(i("eca7"),i("3787")),d=i.n(m),b=(i("425f"),i("4105")),h=i.n(b),f=(i("cadf"),i("551c"),i("097d"),i("4328")),p=i.n(f),_=(i("2f62"),{name:"login",data:function(){return{imgverifyValue:"",sms:"",mobile:"",button_text:this.$t("lang.send_again_60"),send_again:this.$t("lang.send_again"),button_type:!0,type:this.$route.query.type?this.$route.query.type:"",url:this.$route.query.url?this.$route.query.url:""}},components:(s={EcForm:h.a,EcFormItem:d.a,EcInput:u.a},Object(c["a"])(s,l["a"].name,l["a"]),Object(c["a"])(s,o["a"].name,o["a"]),s),created:function(){this.$store.dispatch("setImgVerify")},computed:{mobile_placeholder:function(){return this.$t("lang.enter_mobile")},captcha:function(){return this.$store.state.imgVerify.captcha},client:function(){return this.$store.state.imgVerify.client}},methods:{clickCaptcha:function(){this.$store.dispatch("setImgVerify")},sendVerifyCode:function(){var t=this,e={captcha:this.imgverifyValue,client:this.client,mobile:this.mobile};if(!this.checkMobile())return Object(l["a"])(this.$t("lang.phone_number_format")),!1;this.$store.dispatch("setSendVerify",e).then(function(e){if("success"==e){t.button_type=!1;var i=60,s=setInterval(function(){i--,i?t.button_text=t.send_again+"("+i+"s)":(t.button_type=!0,clearInterval(s))},1e3)}})},submitBtn:function(){var t=this;return this.checkMobile()?""==this.sms?(Object(l["a"])(this.$t("lang.get_sms_code")),!1):void this.$http.post("".concat(window.ROOT_URL,"api/accountsafe/bind_mobile"),p.a.stringify({mobile:this.mobile,client:this.client,code:this.sms})).then(function(e){var i=e.data;"success"==i.status?(Object(l["a"])(t.$t("lang.reset_phone_success")),t.url?window.location.href=t.url:t.$router.push({name:"user"})):i.errors&&Object(l["a"])(i.errors.message)}):(Object(l["a"])(this.$t("lang.phone_number_format")),!1)},onClickHome:function(){this.$router.push({name:"accountsafe"})},checkMobile:function(){var t=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;return!!t.test(this.mobile)}},watch:{}}),v=_,g=i("2877"),y=Object(g["a"])(v,a,n,!1,null,null,null);y.options.__file="Bindphone.vue";e["default"]=y.exports}}]);
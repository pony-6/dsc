(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e3d"],{"0653":function(t,i,e){"use strict";e("68ef")},1146:function(t,i,e){},"255a":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},on:{"click-overlay":t.overlay},model:{value:t.display,callback:function(i){t.display=i},expression:"display"}},[e("div",{staticClass:"mod-address-main"},[e("div",{staticClass:"mod-address-head dis-box"},[e("div",{staticClass:"mod-address-head-tit box-flex"},[t._v(t._s(t.$t("lang.delivery_to_the")))]),e("div",{staticClass:"mod-address-head-right box-flex"},[e("i",{staticClass:"iconfont icon-close",on:{click:t.onRegionClose}})])]),e("div",{staticClass:"mod-address-body"},[e("ul",{staticClass:"ulAddrTab"},[t.regionOption.province.name?e("li",{class:{cur:t.regionLevel-1==1},on:{click:function(i){t.tabClickRegion(1,1)}}},[e("span",[t._v(t._s(t.regionOption.province.name))])]):e("li",[e("span",[t._v(t._s(t.$t("lang.select")))])]),t.regionOption.city.name?e("li",{class:{cur:t.regionLevel-1==2},on:{click:function(i){t.tabClickRegion(t.regionOption.province.id,2)}}},[e("span",[t._v(t._s(t.regionOption.city.name))])]):t._e(),t.regionOption.district.name?e("li",{class:{cur:t.regionLevel-1==3},on:{click:function(i){t.tabClickRegion(t.regionOption.city.id,3)}}},[e("span",[t._v(t._s(t.regionOption.district.name))])]):t._e(),t.regionOption.street.name?e("li",{class:{cur:t.regionLevel-1==4},on:{click:function(i){t.tabClickRegion(t.regionOption.district.id,4)}}},[e("span",[t._v(t._s(t.regionOption.street.name))])]):t._e()]),2==t.regionLevel?e("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.provinceData,function(i,n){return e("li",{key:n,class:{active:t.regionOption.province.id==i.id},on:{click:function(e){t.childRegion(i.id,i.name,i.level)}}},[t._v(t._s(i.name))])})):t._e(),3==t.regionLevel?e("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.cityDate,function(i,n){return e("li",{key:n,class:{active:t.regionOption.city.id==i.id},on:{click:function(e){t.childRegion(i.id,i.name,i.level)}}},[t._v(t._s(i.name))])})):t._e(),4==t.regionLevel?e("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.districtDate,function(i,n){return e("li",{key:n,class:{active:t.regionOption.district.id==i.id},on:{click:function(e){t.childRegion(i.id,i.name,i.level)}}},[t._v(t._s(i.name))])})):t._e(),5==t.regionLevel?e("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.streetDate,function(i,n){return e("li",{key:n,class:{active:t.regionOption.street.id==i.id},on:{click:function(e){t.childRegion(i.id,i.name,i.level)}}},[t._v(t._s(i.name))])})):t._e()])])])},o=[],s=e("ade3"),r=(e("7f7f"),e("8a58"),e("e41f")),a=(e("c5f6"),e("2f62"),{props:{display:{type:Boolean,default:!1},regionOptionDate:{type:Object,default:""},isPrice:{type:Number,default:0},isLevel:{type:Number,default:5}},data:function(){return{regionOption:this.regionOptionDate}},components:Object(s["a"])({},r["a"].name,r["a"]),created:function(){this.$store.dispatch("setRegion",{region:1,level:1});var t=localStorage.getItem("regionOption"),i=JSON.parse(localStorage.getItem("userRegion"));null==t&&null!==i&&(this.regionOption.province=i.province?i.province:"",this.regionOption.city=i.city?i.city:"",this.regionOption.district=i.district?i.district:"",this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)))},computed:{regionId:function(){return this.$store.state.region.id},regionLevel:function(){return this.isLevel>this.$store.state.region.level?this.$store.state.region.level:this.isLevel},regionDate:function(){return this.$store.state.region.data},status:{get:function(){return this.$store.state.region.status},set:function(t){this.$store.state.region.status=t}},isLogin:function(){return null!=localStorage.getItem("token")},userRegion:function(){return this.$store.state.userRegion}},methods:{onRegionClose:function(){this.$emit("update:display",!1)},childRegion:function(t,i,e){var n=this;switch(this.isLevel==e?this.status=!0:this.status=!1,e){case 2:this.regionOption.province.id=t,this.regionOption.province.name=i;break;case 3:this.regionOption.city.id=t,this.regionOption.city.name=i;break;case 4:this.regionOption.district.id=t,this.regionOption.district.name=i;break;case 5:this.regionOption.street.id=t,this.regionOption.street.name=i;break;default:break}var o=["province","city","district","street"];o.forEach(function(t,i){i+1>e&&(n.regionOption[t].id="",n.regionOption[t].name="")}),this.$store.dispatch("setRegion",{region:t,level:e})},tabClickRegion:function(t,i){var e=this,n=["province","city","district","street"];n.forEach(function(t,n){n+1>i&&(e.regionOption[t].id="",e.regionOption[t].name="")}),this.$store.dispatch("setRegion",{region:t,level:i})},overlay:function(){this.$emit("update:display",!1)}},watch:{status:function(){1==this.status&&(this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name+" "+this.regionOption.street.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)),this.$emit("update:regionOptionDate",this.regionOption),this.$emit("update:display",!1),this.$emit("update:isPrice",1))},userRegion:function(){var t=localStorage.getItem("regionOption");null==t&&this.userRegion&&(this.regionOption.province=this.userRegion.province?this.userRegion.province:"",this.regionOption.city=this.userRegion.city?this.userRegion.city:"",this.regionOption.district=this.userRegion.district?this.userRegion.district:"",this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)))}}}),c=a,l=e("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);d.options.__file="Region.vue";i["a"]=d.exports},"2f4d":function(t,i,e){"use strict";e.r(i);var n,o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"waterfall-lower",rawName:"v-waterfall-lower",value:t.loadMore,expression:"loadMore"}],staticClass:"store_cont-box",attrs:{"waterfall-disabled":"disabled","waterfall-offset":"300"}},[e("div",{staticClass:"store_cont_top"},[e("div",{staticClass:"region_select"},[e("van-cell-group",{staticClass:"van-cell-noleft"},[e("van-cell",{attrs:{title:t.$t("lang.label_region_select"),"is-link":""},on:{click:t.handelRegionShow},model:{value:t.regionOptionDate.regionSplic,callback:function(i){t.$set(t.regionOptionDate,"regionSplic",i)},expression:"regionOptionDate.regionSplic"}})],1)],1)]),e("section",{staticClass:"store_cont_warp"},[e("div",{staticClass:"store_list"},[t.storeContent.length>0?e("ul",{staticClass:"new-store-radio"},t._l(t.storeContent,function(i,n){return e("li",{key:n,class:{active:t.store_id==i.id,disabled:0==i.is_stocks},on:{click:function(e){t.storeClick(i.id,i.is_stocks)}}},[e("div",{staticClass:"flow-have-adr padding-all"},[e("div",{staticClass:"f-h-adr-title"},[e("label",[t._v(t._s(i.stores_name))]),e("span",[e("a",{attrs:{href:i.map_url}},[e("i",{staticClass:"iconfont icon-location"}),t._v(t._s(t.$t("lang.view_route")))])])]),e("p",{staticClass:"f-h-adr-con t-remark m-top06 store-address-cont"},[t._v("["+t._s(i.address)+" "+t._s(i.stores_address)+"]")])])])})):e("NotCont")],1)]),e("div",{staticClass:"filter-btn store-btn-box"},[e("div",{staticClass:"van-cell-noleft2"},[e("van-cell",{attrs:{title:t.$t("lang.arrival_time"),"is-link":""},on:{click:t.dataShow},model:{value:t.dataTime,callback:function(i){t.dataTime=i},expression:"dataTime"}})],1),e("van-field",{attrs:{label:t.$t("lang.phone_number"),type:"number",placeholder:t.$t("lang.fill_in_mobile")},model:{value:t.mobile,callback:function(i){t.mobile=i},expression:"mobile"}}),e("div",{staticClass:"van-sku-actions"},[e("van-button",{staticClass:"van-button--bottom-action",attrs:{type:"default"},on:{click:t.onClose}},[t._v(t._s(t.$t("lang.close")))]),e("van-button",{staticClass:"van-button--bottom-action",attrs:{type:"primary"},on:{click:t.onStorebtn}},[t._v(t._s(t.$t("lang.immediately_private")))])],1)],1),e("Region",{attrs:{display:t.regionShow,regionOptionDate:t.regionOptionDate},on:{"update:display":function(i){t.regionShow=i},"update:regionOptionDate":function(i){t.regionOptionDate=i}}}),e("van-popup",{staticClass:"show-popup-bottom show-goods-coupon",attrs:{position:"bottom"},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[e("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:t.dataConfirm,cancel:t.dataCancel},model:{value:t.currentDate,callback:function(i){t.currentDate=i},expression:"currentDate"}})],1)],1)},s=[],r=(e("ac6a"),e("ade3")),a=(e("e17f"),e("2241")),c=(e("e7e5"),e("d399")),l=(e("d1cf"),e("ee83")),d=(e("8a58"),e("e41f")),u=(e("66b9"),e("b650")),h=(e("be7f"),e("565f")),p=(e("0653"),e("34e9")),g=(e("7f7f"),e("c194"),e("7744")),f=(e("d49c"),e("5487")),_=e("4328"),m=e.n(_),v=e("255a"),b=e("6f38"),y=e("f990"),O={data:function(){return{show:!1,storeContent:[],regionShow:!1,regionOptionDate:{province:{id:"",name:""},city:{id:"",name:""},district:{id:"",name:""},street:{id:"",name:""},regionSplic:""},mobile:"",dataTime:"",minHour:10,maxHour:20,minDate:new Date,maxDate:new Date(2019,10,1),currentDate:new Date,store_id:0,ru_id:this.$route.query.ru_id,rec_id:this.$route.query.rec_id?this.$route.query.rec_id:"",isSingle:this.$route.query.isSingle?this.$route.query.isSingle:"",disabled:!1,page:1,size:10,footerCont:!1,loading:!0}},directives:{WaterfallLower:Object(f["a"])("lower")},components:(n={},Object(r["a"])(n,g["a"].name,g["a"]),Object(r["a"])(n,p["a"].name,p["a"]),Object(r["a"])(n,h["a"].name,h["a"]),Object(r["a"])(n,u["a"].name,u["a"]),Object(r["a"])(n,d["a"].name,d["a"]),Object(r["a"])(n,l["a"].name,l["a"]),Object(r["a"])(n,c["a"].name,c["a"]),Object(r["a"])(n,a["a"].name,a["a"]),Object(r["a"])(n,"Region",v["a"]),Object(r["a"])(n,"NotCont",b["a"]),n),created:function(){var t=JSON.parse(localStorage.getItem("regionOption")),i={};t&&(this.regionOptionDate=t,i=this.rec_id?{province_id:t.province.id,city_id:t.city.id,district_id:t.district.id,street_id:t.street.id,goods_id:0,rec_id:this.rec_id,page:this.page,size:this.size}:{province_id:t.province.id,city_id:t.city.id,district_id:t.district.id,street_id:t.street.id,goods_id:this.$route.query.id,spec_arr:this.$route.query.attr_id,num:this.$route.query.num,page:this.page,size:this.size},this.storeList(i))},mounted:function(){this.dataTime=y["a"].formatDate(this.minDate)},computed:{isLogin:function(){return null!=localStorage.getItem("token")}},methods:{storeList:function(t){var i=this;this.$http.get("".concat(window.ROOT_URL,"api/offline-store/list"),{params:t}).then(function(t){var e=t.data;i.page>1?e.data.list.forEach(function(t){i.storeContent.push(t)}):i.storeContent=e.data.list,i.storeContent.forEach(function(t,e){0==e&&0!=t.is_stocks&&(i.store_id=t.id,i.ru_id=t.ru_id)}),i.mobile=e.data.phone?e.data.phone:""})},storeClick:function(t,i){0!=i?this.store_id=t:Object(c["a"])(this.$t("lang.understock"))},handelRegionShow:function(){this.store_id=0,this.regionShow=!this.regionShow},dataShow:function(){this.show=!0},onClose:function(){this.rec_id?this.$router.push({name:"cart"}):this.$router.push({name:"goods",params:{id:this.$route.query.id}})},onStorebtn:function(){var t=this;if(!this.checkMobile())return Object(c["a"])(this.$t("lang.mobile_not_null")),!1;if(""==this.dataTime)return Object(c["a"])(this.$t("lang.fill_in_arrival_time")),!1;if(0==this.store_id)return Object(c["a"])(this.$t("lang.fill_in_store")),!1;if(this.isLogin)this.rec_id?this.$http.post("".concat(window.ROOT_URL,"api/cart/offline/update"),m.a.stringify({rec_id:this.rec_id,store_id:this.store_id,store_mobile:this.mobile,take_time:this.dataTime,num:""})).then(function(i){var e=i.data;0==e.data.error?t.$router.push({name:"checkoutone",query:{stor:1,ru_id:t.ru_id,rec_type:12,store_id:t.store_id,isSingle:t.isSingle,rec_id:t.rec_id}}):Object(c["a"])(e.data.msg)}):this.$store.dispatch("setStoresCart",{goods_id:this.$route.query.id,store_id:this.store_id,num:this.$route.query.num,spec:this.$route.query.attr_id,store_mobile:this.mobile,take_time:this.dataTime,warehouse_id:"0",area_id:"0",parent_id:"0",quick:1,rec_type:12,parent:0}).then(function(i){1==i.data?t.$router.push({name:"checkoutone",query:{stor:1,ru_id:t.ru_id,rec_type:12,store_id:i.store_id,goods_id:t.$route.query.id,spec_arr:t.$route.query.attr_id,num:t.$route.query.num,isSingle:t.isSingle,rec_id:t.rec_id}}):1==i.data.error?Object(c["a"])(i.data.msg):Object(c["a"])(t.$t("lang.private_store_fail"))});else{var i=this.$t("lang.login_user_invalid");this.notLogin(i)}},dataConfirm:function(){this.dataTime=y["a"].formatDate(this.currentDate),this.show=!1},dataCancel:function(){this.show=!1},checkMobile:function(){var t=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;return!!t.test(this.mobile)},mapRange:function(t,i){var e=this;this.$store.dispatch("setShopMap",{lat:t,lng:i}).then(function(t){"success"==t.status?window.location.href=t.data:Object(c["a"])(e.$t("lang.locate_failure"))})},notLogin:function(t){var i,e=this,n=window.location.href;i=this.rec_id?{rec_id:this.rec_id}:{id:this.$route.query.id,attr_id:this.$route.query.attr_id,num:this.$route.query.num},a["a"].confirm({message:t,className:"text-center"}).then(function(){e.$router.push({name:"login",query:{redirect:{name:"storeGoods",query:i,url:n}}})}).catch(function(){})},loadMore:function(){var t=this;setTimeout(function(){var i={};t.disabled=!0,t.page*t.size==t.storeContent.length&&(t.page++,i=t.rec_id?{province_id:t.regionOptionDate.province.id,city_id:t.regionOptionDate.city.id,district_id:t.regionOptionDate.district.id,street_id:t.regionOptionDate.street.id,goods_id:0,rec_id:t.rec_id,page:t.page,size:t.size}:{province_id:t.regionOptionDate.province.id,city_id:t.regionOptionDate.city.id,district_id:t.regionOptionDate.district.id,street_id:t.regionOptionDate.street.id,goods_id:t.$route.query.id,spec_arr:t.$route.query.attr_id,num:t.$route.query.num,page:t.page,size:t.size},t.storeList(i))},200)}},watch:{regionShow:function(){var t={};this.regionShow||(t=this.rec_id?{province_id:this.regionOptionDate.province.id,city_id:this.regionOptionDate.city.id,district_id:this.regionOptionDate.district.id,street_id:this.regionOptionDate.street.id,goods_id:0,rec_id:this.rec_id,page:1,size:10}:{province_id:this.regionOptionDate.province.id,city_id:this.regionOptionDate.city.id,district_id:this.regionOptionDate.district.id,street_id:this.regionOptionDate.street.id,goods_id:this.$route.query.id,spec_arr:this.$route.query.attr_id,num:this.$route.query.num,page:1,size:10},this.storeList(t))},storeContent:function(){this.dscLoading=!1,this.page*this.size==this.storeContent.length?(this.disabled=!1,this.loading=!0):(this.loading=!1,this.footerCont=this.page>1)}}},$=O,k=(e("b183"),e("2877")),C=Object(k["a"])($,o,s,!1,null,null,null);C.options.__file="Goods.vue";i["default"]=C.exports},"565f":function(t,i,e){"use strict";var n=e("c31d"),o=e("fe7e"),s=e("a142");i["a"]=Object(o["a"])({render:function(){var t,i=this,e=i.$createElement,n=i._self._c||e;return n("cell",{class:i.b((t={error:i.error,disabled:i.$attrs.disabled,"min-height":"textarea"===i.type&&!i.autosize},t["label-"+i.labelAlign]=i.labelAlign,t)),attrs:{icon:i.leftIcon,title:i.label,center:i.center,border:i.border,"is-link":i.isLink,required:i.required}},[i._t("left-icon",null,{slot:"icon"}),i._t("label",null,{slot:"title"}),n("div",{class:i.b("body")},["textarea"===i.type?n("textarea",i._g(i._b({ref:"input",class:i.b("control",i.inputAlign),attrs:{readonly:i.readonly},domProps:{value:i.value}},"textarea",i.$attrs,!1),i.listeners)):n("input",i._g(i._b({ref:"input",class:i.b("control",i.inputAlign),attrs:{type:i.type,readonly:i.readonly},domProps:{value:i.value}},"input",i.$attrs,!1),i.listeners)),i.showClear?n("icon",{class:i.b("clear"),attrs:{name:"clear"},on:{touchstart:function(t){return t.preventDefault(),i.onClear(t)}}}):i._e(),i.$slots.icon||i.icon?n("div",{class:i.b("icon"),on:{click:i.onClickIcon}},[i._t("icon",[n("icon",{attrs:{name:i.icon}})])],2):i._e(),i.$slots.button?n("div",{class:i.b("button")},[i._t("button")],2):i._e()],1),i.errorMessage?n("div",{class:i.b("error-message"),domProps:{textContent:i._s(i.errorMessage)}}):i._e()],2)},name:"field",inheritAttrs:!1,props:{value:[String,Number],icon:String,label:String,error:Boolean,center:Boolean,isLink:Boolean,leftIcon:String,readonly:Boolean,required:Boolean,clearable:Boolean,labelAlign:String,inputAlign:String,onIconClick:Function,autosize:[Boolean,Object],errorMessage:String,type:{type:String,default:"text"},border:{type:Boolean,default:!0}},data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&this.isDef(this.value)&&!this.readonly},listeners:function(){return Object(n["a"])({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur})}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(t){void 0===t&&(t=this.$refs.input);var i=t,e=i.value,n=this.$attrs.maxlength;return this.isDef(n)&&e.length>n&&(e=e.slice(0,n),t.value=e),e},onInput:function(t){this.$emit("input",this.format(t.target))},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.$emit("blur",t)},onClickIcon:function(){this.$emit("click-icon"),this.onIconClick&&this.onIconClick()},onClear:function(){this.$emit("input",""),this.$emit("clear")},onKeypress:function(t){if("number"===this.type){var i=t.keyCode,e=-1===String(this.value).indexOf("."),n=i>=48&&i<=57||46===i&&e||45===i;n||t.preventDefault()}"search"===this.type&&13===t.keyCode&&this.blur(),this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var i=t.scrollHeight;if(Object(s["d"])(this.autosize)){var e=this.autosize,n=e.maxHeight,o=e.minHeight;n&&(i=Math.min(i,n)),o&&(i=Math.max(i,o))}i&&(t.style.height=i+"px")}}}})},"66b9":function(t,i,e){"use strict";e("68ef")},"7e93":function(t,i,e){},b183:function(t,i,e){"use strict";var n=e("7e93"),o=e.n(n);o.a},be7f:function(t,i,e){"use strict";e("68ef"),e("1146")}}]);
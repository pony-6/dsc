(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ba4"],{"09d6":function(t,e,i){"use strict";i("4917");var n=navigator.userAgent,s=n.indexOf("Android")>-1||n.indexOf("Adr")>-1,o=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);function r(){return!!/micromessenger/.test(n.toLowerCase())}e["a"]={isWeixinBrowser:r,isAndroid:s,isiOS:o}},"0a81":function(t,e,i){"use strict";var n=i("1ac7"),s=i.n(n);s.a},"10cb":function(t,e,i){},"1ac7":function(t,e,i){},"255a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},on:{"click-overlay":t.overlay},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[i("div",{staticClass:"mod-address-main"},[i("div",{staticClass:"mod-address-head dis-box"},[i("div",{staticClass:"mod-address-head-tit box-flex"},[t._v(t._s(t.$t("lang.delivery_to_the")))]),i("div",{staticClass:"mod-address-head-right box-flex"},[i("i",{staticClass:"iconfont icon-close",on:{click:t.onRegionClose}})])]),i("div",{staticClass:"mod-address-body"},[i("ul",{staticClass:"ulAddrTab"},[t.regionOption.province.name?i("li",{class:{cur:t.regionLevel-1==1},on:{click:function(e){t.tabClickRegion(1,1)}}},[i("span",[t._v(t._s(t.regionOption.province.name))])]):i("li",[i("span",[t._v(t._s(t.$t("lang.select")))])]),t.regionOption.city.name?i("li",{class:{cur:t.regionLevel-1==2},on:{click:function(e){t.tabClickRegion(t.regionOption.province.id,2)}}},[i("span",[t._v(t._s(t.regionOption.city.name))])]):t._e(),t.regionOption.district.name?i("li",{class:{cur:t.regionLevel-1==3},on:{click:function(e){t.tabClickRegion(t.regionOption.city.id,3)}}},[i("span",[t._v(t._s(t.regionOption.district.name))])]):t._e(),t.regionOption.street.name?i("li",{class:{cur:t.regionLevel-1==4},on:{click:function(e){t.tabClickRegion(t.regionOption.district.id,4)}}},[i("span",[t._v(t._s(t.regionOption.street.name))])]):t._e()]),2==t.regionLevel?i("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.provinceData,function(e,n){return i("li",{key:n,class:{active:t.regionOption.province.id==e.id},on:{click:function(i){t.childRegion(e.id,e.name,e.level)}}},[t._v(t._s(e.name))])})):t._e(),3==t.regionLevel?i("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.cityDate,function(e,n){return i("li",{key:n,class:{active:t.regionOption.city.id==e.id},on:{click:function(i){t.childRegion(e.id,e.name,e.level)}}},[t._v(t._s(e.name))])})):t._e(),4==t.regionLevel?i("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.districtDate,function(e,n){return i("li",{key:n,class:{active:t.regionOption.district.id==e.id},on:{click:function(i){t.childRegion(e.id,e.name,e.level)}}},[t._v(t._s(e.name))])})):t._e(),5==t.regionLevel?i("ul",{staticClass:"ulAddrList"},t._l(t.regionDate.streetDate,function(e,n){return i("li",{key:n,class:{active:t.regionOption.street.id==e.id},on:{click:function(i){t.childRegion(e.id,e.name,e.level)}}},[t._v(t._s(e.name))])})):t._e()])])])},s=[],o=i("ade3"),r=(i("7f7f"),i("8a58"),i("e41f")),a=(i("c5f6"),i("2f62"),{props:{display:{type:Boolean,default:!1},regionOptionDate:{type:Object,default:""},isPrice:{type:Number,default:0},isLevel:{type:Number,default:5}},data:function(){return{regionOption:this.regionOptionDate}},components:Object(o["a"])({},r["a"].name,r["a"]),created:function(){this.$store.dispatch("setRegion",{region:1,level:1});var t=localStorage.getItem("regionOption"),e=JSON.parse(localStorage.getItem("userRegion"));null==t&&null!==e&&(this.regionOption.province=e.province?e.province:"",this.regionOption.city=e.city?e.city:"",this.regionOption.district=e.district?e.district:"",this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)))},computed:{regionId:function(){return this.$store.state.region.id},regionLevel:function(){return this.isLevel>this.$store.state.region.level?this.$store.state.region.level:this.isLevel},regionDate:function(){return this.$store.state.region.data},status:{get:function(){return this.$store.state.region.status},set:function(t){this.$store.state.region.status=t}},isLogin:function(){return null!=localStorage.getItem("token")},userRegion:function(){return this.$store.state.userRegion}},methods:{onRegionClose:function(){this.$emit("update:display",!1)},childRegion:function(t,e,i){var n=this;switch(this.isLevel==i?this.status=!0:this.status=!1,i){case 2:this.regionOption.province.id=t,this.regionOption.province.name=e;break;case 3:this.regionOption.city.id=t,this.regionOption.city.name=e;break;case 4:this.regionOption.district.id=t,this.regionOption.district.name=e;break;case 5:this.regionOption.street.id=t,this.regionOption.street.name=e;break;default:break}var s=["province","city","district","street"];s.forEach(function(t,e){e+1>i&&(n.regionOption[t].id="",n.regionOption[t].name="")}),this.$store.dispatch("setRegion",{region:t,level:i})},tabClickRegion:function(t,e){var i=this,n=["province","city","district","street"];n.forEach(function(t,n){n+1>e&&(i.regionOption[t].id="",i.regionOption[t].name="")}),this.$store.dispatch("setRegion",{region:t,level:e})},overlay:function(){this.$emit("update:display",!1)}},watch:{status:function(){1==this.status&&(this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name+" "+this.regionOption.street.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)),this.$emit("update:regionOptionDate",this.regionOption),this.$emit("update:display",!1),this.$emit("update:isPrice",1))},userRegion:function(){var t=localStorage.getItem("regionOption");null==t&&this.userRegion&&(this.regionOption.province=this.userRegion.province?this.userRegion.province:"",this.regionOption.city=this.userRegion.city?this.userRegion.city:"",this.regionOption.district=this.userRegion.district?this.userRegion.district:"",this.regionOption.regionSplic=this.regionOption.province.name+" "+this.regionOption.city.name+" "+this.regionOption.district.name,localStorage.setItem("regionOption",JSON.stringify(this.regionOption)))}}}),c=a,u=i("2877"),l=Object(u["a"])(c,n,s,!1,null,null,null);l.options.__file="Region.vue";e["a"]=l.exports},4917:function(t,e,i){"use strict";var n=i("cb7c"),s=i("9def"),o=i("0390"),r=i("5f1b");i("214f")("match",1,function(t,e,i,a){return[function(i){var n=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=a(i,t,this);if(e.done)return e.value;var c=n(t),u=String(this);if(!c.global)return r(c,u);var l=c.unicode;c.lastIndex=0;var d,h=[],p=0;while(null!==(d=r(c,u))){var g=String(d[0]);h[p]=g,""===g&&(c.lastIndex=o(u,s(c.lastIndex),l)),p++}return 0===p?null:h}]})},"49d4":function(t,e,i){"use strict";i.r(e);var n,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"con bg-color-write"},[i("div",{staticClass:"flow-consignee"},[i("div",{staticClass:"text-all dis-box"},[i("label",[t._v(t._s(t.$t("lang.consignee"))),i("em",[t._v("*")])]),i("div",{staticClass:"input-text"},[i("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.enter_consignee")},model:{value:t.consignee,callback:function(e){t.consignee=e},expression:"consignee"}}),i("i",{staticClass:"iconfont icon-guanbi1 close-common"})],1)]),i("div",{staticClass:"text-all dis-box"},[i("label",[t._v(t._s(t.$t("lang.phone_number"))),i("em",[t._v("*")])]),i("div",{staticClass:"input-text"},[i("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.enter_contact_number")},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),i("i",{staticClass:"iconfont icon-guanbi1 close-common"})],1)]),i("div",{staticClass:"text-all dis-box"},[i("label",[t._v(t._s(t.$t("lang.zipcode")))]),i("div",{staticClass:"input-text"},[i("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.enter_contact_zipcode")},model:{value:t.zipcode,callback:function(e){t.zipcode=e},expression:"zipcode"}}),i("i",{staticClass:"iconfont icon-guanbi1 close-common"})],1)]),i("div",{staticClass:"text-all dis-box"},[i("label",[t._v(t._s(t.$t("lang.region_alt"))),i("em",[t._v("*")])]),i("div",{staticClass:"input-text"},[i("div",{staticClass:"address-box",on:{click:t.handelRegionShow}},[i("span",{staticClass:"text-all-span"},[t._v(t._s(t.regionSplic))]),t._m(0)])])]),i("div",{staticClass:"text-all"},[i("label",[t._v(t._s(t.$t("lang.detail_info"))),i("em",[t._v("*")])]),i("div",{staticClass:"input-text"},[i("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.enter_address")},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),i("i",{staticClass:"iconfont icon-guanbi1 close-common"})],1)]),i("div",{staticClass:"ect-button-more"},[i("a",{staticClass:"btn btn-submit",attrs:{href:"javascript:;"},on:{click:t.submitBtn}},[t._v(t._s(t.$t("lang.save")))]),t.isWeiXin&&!t.wximport?i("a",{staticClass:"btn btn-wximport",attrs:{href:"javascript:;"},on:{click:t.wxAddress}},[t._v(t._s(t.$t("lang.import_wx_address")))]):t._e()])]),i("Region",{attrs:{display:t.regionShow,regionOptionDate:t.regionOptionDate},on:{"update:display":function(e){t.regionShow=e},"update:regionOptionDate":function(e){t.regionOptionDate=e}}}),i("CommonNav")],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"user-more"},[i("i",{staticClass:"iconfont icon-more"})])}],r=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("ade3")),a=(i("e7e5"),i("d399")),c=(i("5f5fb"),i("f253")),u=(i("7f7f"),i("8a58"),i("e41f")),l=(i("10cb"),i("450d"),i("f3ad")),d=i.n(l),h=(i("4328"),i("2f62")),p=i("255a"),g=i("d567"),f=i("09d6");function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach(function(e){Object(r["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var y={mixins:[f["a"]],data:function(){return{regionShow:!1,regionOptionDate:{province:{id:"",name:""},city:{id:"",name:""},district:{id:"",name:""},street:{id:"",name:""},regionSplic:""},consignee:"",mobile:"",address:"",zipcode:"",wximport:!!this.$route.query.wximport&&this.$route.query.wximport,back:this.$route.query.back}},components:(n={Region:p["a"],CommonNav:g["a"],EcInput:d.a},Object(r["a"])(n,u["a"].name,u["a"]),Object(r["a"])(n,c["a"].name,c["a"]),Object(r["a"])(n,a["a"].name,a["a"]),n),created:function(){var t=this.$route.params.id,e=JSON.parse(localStorage.getItem("regionOption"));t?this.addressInfoInt(t):this.wximport?this.wxOpenAddress():e&&(this.regionOptionDate=e)},mounted:function(){window.history&&window.history.pushState&&this.back&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))},destroyed:function(){window.removeEventListener("popstate",this.cancel,!1)},computed:v(v({},Object(h["c"])({addressInfo:function(t){return t.user.addressInfo}})),{},{isAddress:function(){return!!this.$route.params.id},regionSplic:function(){return this.regionOptionDate.regionSplic},isWeiXin:function(){return f["a"].isWeixinBrowser()}}),methods:{goBack:function(){this.$router.replace({path:this.back})},addressInfoInt:function(t){var e=this;this.$store.dispatch("userAddressInfo",{address_id:t}).then(function(t){t.data&&(e.consignee=t.data.consignee,e.mobile=t.data.mobile,e.address=t.data.address,e.zipcode=t.zipcode,e.regionOptionDate.province.id=t.data.province,e.regionOptionDate.city.id=t.data.city,e.regionOptionDate.district.id=t.data.district,e.regionOptionDate.street.id=t.data.street,e.regionOptionDate.regionSplic=t.data.region)})},handelRegionShow:function(){this.regionShow=!this.regionShow,this.$store.dispatch("setRegion",{region:1,level:1})},submitBtn:function(){var t=this,e=0;return this.isAddress&&(e=this.$route.params.id),""==this.consignee?(Object(a["a"])(this.$t("lang.consignee_not_null")),!1):this.checkMobile()?""==this.address?(Object(a["a"])(this.$t("lang.address_not_null")),!1):void this.$store.dispatch("userAddressAdd",{address_id:e,consignee:this.consignee,mobile:this.mobile,address:this.address,country:1,province:this.regionOptionDate.province.id,city:this.regionOptionDate.city.id,district:this.regionOptionDate.district.id,street:this.regionOptionDate.street.id,zipcode:this.zipcode}).then(function(e){"success"==e.status?(a["a"].success({duration:1e3,message:t.$t("lang.save_success")}),t.$route.query.routerLink?t.$route.query.entrance&&"first"==t.$route.query.entrance?t.$route.query.rec_type?"supplier"==t.$route.query.rec_type?t.$router.push({name:t.$route.query.routerLink,query:{rec_type:t.$route.query.rec_type,rec_id:t.$route.query.rec_id}}):t.$router.push({name:t.$route.query.routerLink,query:{rec_type:t.$route.query.rec_type,type_id:t.$route.query.type_id,team_id:t.$route.query.team_id}}):"crowdfunding-checkout"==t.$route.query.routerLink?t.$router.push({name:t.$route.query.routerLink,query:{pid:t.$route.query.pid,id:t.$route.query.id,number:t.$route.query.number}}):t.$router.push({name:t.$route.query.routerLink}):t.$router.push({name:"address",query:t.$route.query}):t.$router.push({name:"address"})):Object(a["a"])({duration:1e3,message:t.$t("lang.save_fail")})}):(Object(a["a"])(this.$t("lang.phone_number_format")),!1)},checkMobile:function(){var t=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;return!!t.test(this.mobile)},shippingFee:function(t){this.$store.dispatch("setShippingFee",{goods_id:0,position:t})},wxAddress:function(){this.wxOpenAddress()},wxOpenAddress:function(){var t=this;wx.openAddress({success:function(e){t.$store.dispatch("userWxImportAddress",{provinceName:e.provinceName,cityName:e.cityName,countyName:e.countryName,detailInfo:e.detailInfo,telNumber:e.telNumber,userName:e.userName}).then(function(e){"success"==e.status&&(t.consignee=e.data.consignee?e.data.consignee:"",t.mobile=e.data.mobile?e.data.mobile:"",t.address=e.data.address?e.data.address:"",t.regionOptionDate.province.id=e.data.province?e.data.province:"",t.regionOptionDate.city.id=e.data.city?e.data.city:"",t.regionOptionDate.district.id=e.data.district?e.data.district:"",t.regionOptionDate.street.id="",t.regionOptionDate.regionSplic=e.data.region?e.data.region:"")})},cancel:function(t){}})}},watch:{regionSplic:function(){var t={province_id:this.regionOptionDate.province.id,city_id:this.regionOptionDate.city.id,district_id:this.regionOptionDate.district.id,street_id:this.regionOptionDate.street.id};this.shippingFee(t)}}},b=y,O=(i("0a81"),i("2877")),_=Object(O["a"])(b,s,o,!1,null,"00b43991",null);_.options.__file="Form.vue";e["default"]=_.exports},"5f5fb":function(t,e,i){"use strict";i("68ef"),i("a526")},"6fd6":function(t,e,i){},"8a58":function(t,e,i){"use strict";i("68ef"),i("4d75")},a526:function(t,e,i){},c1ee:function(t,e,i){"use strict";var n=i("6fd6"),s=i.n(n);s.a},d567:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sus-nav"},[i("div",{staticClass:"common-nav",class:{active:!0===t.navType},attrs:{id:"moveDiv"},on:{touchstart:t.down,touchmove:t.move,touchend:t.end}},[i("div",{staticClass:"right-cont",attrs:{id:"rightDiv"}},[i("ul",[i("li",{on:{click:function(e){t.routerLink("home")}}},[i("i",{staticClass:"iconfont icon-zhuye"}),i("p",[t._v(t._s(t.$t("lang.home")))])]),"drp"!=t.routerName&&"crowd_funding"!=t.routerName&&"team"!=t.routerName&&"supplier"!=t.routerName&&"presale"!=t.routerName?i("li",{on:{click:function(e){t.routerLink("search")}}},[i("i",{staticClass:"iconfont icon-search"}),i("p",[t._v(t._s(t.$t("lang.search")))])]):t._e(),i("li",{on:{click:function(e){t.routerLink("catalog")}}},[i("i",{staticClass:"iconfont icon-menu"}),i("p",[t._v(t._s(t.$t("lang.category")))])]),i("li",{on:{click:function(e){t.routerLink("cart")}}},[i("i",{staticClass:"iconfont icon-cart"}),i("p",[t._v(t._s(t.$t("lang.cart")))])]),i("li",{on:{click:function(e){t.routerLink("user")}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin"}),i("p",[t._v(t._s(t.$t("lang.personal_center")))])]),"team"==t.routerName?i("li",{on:{click:function(e){t.routerLink("team")}}},[i("i",{staticClass:"iconfont icon-wodetuandui"}),i("p",[t._v(t._s(t.$t("lang.my_team")))])]):t._e(),"supplier"==t.routerName?i("li",{on:{click:function(e){t.routerLink("supplier")}}},[i("i",{staticClass:"iconfont icon-wodetuandui"}),i("p",[t._v(t._s(t.$t("lang.suppliers")))])]):t._e(),t._t("aloneNav")],2)]),i("div",{staticClass:"nav-icon",on:{click:t.handelNav}},[t._v(t._s(t.$t("lang.quick_navigation")))])]),i("div",{staticClass:"common-show",class:{active:!0===t.navType},on:{click:function(e){return e.stopPropagation(),t.handelShow(e)}}})])},s=[],o=(i("3846"),{props:["routerName"],data:function(){return{navType:!1,flags:!1,position:{x:0,y:0},nx:"",ny:"",dx:"",dy:"",xPum:"",yPum:""}},mounted:function(){this.flags=!1},methods:{handelNav:function(){this.navType=1!=this.navType},handelShow:function(){this.navType=!1},down:function(){var t;this.flags=!0,t=event.touches?event.touches[0]:event,this.position.x=t.clientX,this.position.y=t.clientY,this.dx=moveDiv.offsetLeft,this.dy=moveDiv.offsetTop},move:function(){var t,e,i,n;(event.preventDefault(),this.flags)&&(t=event.touches?event.touches[0]:event,e=document.documentElement.clientHeight,i=moveDiv.clientHeight,this.nx=t.clientX-this.position.x,this.ny=t.clientY-this.position.y,this.xPum=this.dx+this.nx,this.yPum=this.dy+this.ny,this.navType?this.yPum>0&&(n=e-i-this.yPum>0?e-i-this.yPum:0):(i+=rightDiv.clientHeight,this.yPum-i>0&&(n=e-this.yPum>0?e-this.yPum:0)),moveDiv.style.bottom=n+"px")},end:function(){this.flags=!1},routerLink:function(t){var e=this;"home"==t||"catalog"==t||"search"==t||"user"==t?setTimeout(function(){uni.getEnv(function(i){i.plus||i.miniprogram?"home"==t?uni.reLaunch({url:"../../pages/index/index"}):"catalog"==t?uni.reLaunch({url:"../../pages/category/category"}):"search"==t?uni.reLaunch({url:"../../pages/search/search"}):"user"==t&&uni.reLaunch({url:"../../pages/user/user"}):"search"==t?e.$router.push({name:"search"}):e.$router.push({name:t})}),uni.postMessage({data:{action:"postMessage"}})},100):e.$router.push({name:t})}}}),r=o,a=(i("c1ee"),i("2877")),c=Object(a["a"])(r,n,s,!1,null,null,null);c.options.__file="CommonNav.vue";e["a"]=c.exports},e41f:function(t,e,i){"use strict";var n=i("fe7e"),s=i("6605");e["a"]=Object(n["a"])({render:function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("transition",{attrs:{name:e.currentTransition}},[e.shouldRender?n("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b((t={},t[e.position]=e.position,t))},[e._t("default")],2):e._e()])},name:"popup",mixins:[s["a"]],props:{transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{currentTransition:function(){return this.transition||(""===this.position?"van-fade":"popup-slide-"+this.position)}}})},f253:function(t,e,i){"use strict";var n=i("fe7e"),s=i("1128");function o(t){return Array.isArray(t)?t.map(function(t){return o(t)}):"object"===typeof t?Object(s["a"])({},t):t}var r=i("a142"),a=200,c=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.b(),t.className],style:t.columnStyle,on:{touchstart:t.onTouchStart,touchmove:function(e){return e.preventDefault(),t.onTouchMove(e)},touchend:t.onTouchEnd,touchcancel:t.onTouchEnd}},[i("ul",{style:t.wrapperStyle},t._l(t.options,function(e,n){return i("li",{staticClass:"van-ellipsis",class:t.b("item",{disabled:t.isDisabled(e),selected:n===t.currentIndex}),style:t.optionStyle,domProps:{innerHTML:t._s(t.getOptionText(e))},on:{click:function(e){t.setIndex(n,!0)}}})}))])},name:"picker-column",props:{valueKey:String,className:String,itemHeight:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}},defaultIndex:{type:Number,default:0}},data:function(){return{startY:0,offset:0,duration:0,startOffset:0,options:o(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2},columnStyle:function(){return{height:this.itemHeight*this.visibleItemCount+"px"}},wrapperStyle:function(){return{transition:this.duration+"ms",transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",lineHeight:this.itemHeight+"px"}},optionStyle:function(){return{height:this.itemHeight+"px"}}},methods:{onTouchStart:function(t){this.startY=t.touches[0].clientY,this.startOffset=this.offset,this.duration=0},onTouchMove:function(t){var e=t.touches[0].clientY-this.startY;this.offset=Object(r["f"])(this.startOffset+e,-this.count*this.itemHeight,this.itemHeight)},onTouchEnd:function(){if(this.offset!==this.startOffset){this.duration=a;var t=Object(r["f"])(Math.round(-this.offset/this.itemHeight),0,this.count-1);this.setIndex(t,!0)}},adjustIndex:function(t){t=Object(r["f"])(t,0,this.count);for(var e=t;e<this.count;e++)if(!this.isDisabled(this.options[e]))return e;for(var i=t-1;i>=0;i--)if(!this.isDisabled(this.options[i]))return i},isDisabled:function(t){return Object(r["d"])(t)&&t.disabled},getOptionText:function(t){return Object(r["d"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight,t!==this.currentIndex&&(this.currentIndex=t,e&&this.$emit("change",t))},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]}}});e["a"]=Object(n["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t.showToolbar?i("div",{staticClass:"van-hairline--top-bottom",class:t.b("toolbar")},[t._t("default",[i("div",{class:t.b("cancel"),on:{click:function(e){t.emit("cancel")}}},[t._v("\n        "+t._s(t.cancelButtonText||t.$t("cancel"))+"\n      ")]),t.title?i("div",{staticClass:"van-ellipsis",class:t.b("title"),domProps:{textContent:t._s(t.title)}}):t._e(),i("div",{class:t.b("confirm"),on:{click:function(e){t.emit("confirm")}}},[t._v("\n        "+t._s(t.confirmButtonText||t.$t("confirm"))+"\n      ")])])],2):t._e(),t.loading?i("div",{class:t.b("loading")},[i("loading")],1):t._e(),i("div",{class:t.b("columns"),style:t.columnsStyle,on:{touchmove:function(t){t.preventDefault()}}},[t._l(t.simple?[t.columns]:t.columns,function(e,n){return i("picker-column",{key:n,attrs:{"value-key":t.valueKey,"initial-options":t.simple?e:e.values,"class-name":e.className,"default-index":e.defaultIndex,"item-height":t.itemHeight,"visible-item-count":t.visibleItemCount},on:{change:function(e){t.onChange(n)}}})}),i("div",{staticClass:"van-hairline--top-bottom",class:t.b("frame"),style:t.frameStyle})],2)])},name:"picker",components:{PickerColumn:c},props:{title:String,loading:Boolean,showToolbar:Boolean,confirmButtonText:String,cancelButtonText:String,visibleItemCount:{type:Number,default:5},valueKey:{type:String,default:"text"},itemHeight:{type:Number,default:44},columns:{type:Array,default:function(){return[]}}},data:function(){return{children:[]}},computed:{frameStyle:function(){return{height:this.itemHeight+"px"}},columnsStyle:function(){return{height:this.itemHeight*this.visibleItemCount+"px"}},simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this,e=this.simple?[{values:this.columns}]:this.columns;e.forEach(function(e,i){t.setColumnValues(i,o(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var i=this.getColumn(t);i&&i.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var i=this.getColumn(t);i&&i.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var i=this.children[t];i&&JSON.stringify(i.options)!==JSON.stringify(e)&&(i.options=e,i.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,i){e.setColumnValue(i,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,i){e.setColumnIndex(i,t)})}}})}}]);
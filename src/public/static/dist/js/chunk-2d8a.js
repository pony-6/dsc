(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d8a"],{"19de":function(t,e,i){"use strict";i("68ef"),i("5fbe")},"1f5b":function(t,e,i){},"234f":function(t,e,i){"use strict";var s=i("fe7e"),a=i("b650"),n=i("9584");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-button",{class:t.b(),attrs:{square:"",size:"large",loading:t.loading,disabled:t.disabled,type:t.primary?"danger":"warning"},on:{click:t.onClick}},[t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-big-btn",mixins:[n["a"]],components:{VanButton:a["a"]},props:{text:String,primary:Boolean,loading:Boolean,disabled:Boolean},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}})},2662:function(t,e,i){},"42d1":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dscLoading?i("div",{staticClass:"cloading",style:{height:t.clientHeight+"px"},on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[i("div",{staticClass:"cloading-mask"}),t._t("text",[t._m(0)])],2):t._e()},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cloading-main"},[s("img",{attrs:{src:i("f8b2")}})])}],n=i("ade3"),r=(i("7f7f"),i("ac1e"),i("543e")),o={props:["dscLoading"],data:function(){return{clientHeight:""}},components:Object(n["a"])({},r["a"].name,r["a"]),created:function(){},mounted:function(){this.clientHeight=document.documentElement.clientHeight},methods:{}},c=o,l=(i("a637"),i("2877")),p=Object(l["a"])(c,s,a,!1,null,"9a0469b6",null);p.options.__file="DscLoading.vue";e["a"]=p.exports},4887:function(t,e,i){"use strict";i.r(e);var s,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"con"},[t.card_id?[i("div",{staticClass:"vip-buy"},[i("div",{staticClass:"purchase-card"},[i("div",{staticClass:"swiper-card"},[i("div",{staticClass:"purchase-card-item"},[i("div",{staticClass:"left"},[i("div",{staticClass:"rank"},[t._v(t._s(t.drpRightsCard.name))]),"forever"==t.drpRightsCard.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(t.$t("lang.permanence")))]):"days"==t.drpRightsCard.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(t.drpRightsCard.expiry_type_format))]):"timespan"==t.drpRightsCard.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(t.drpRightsCard.expiry_date_end))]):t._e()])])])]),t.drpRightsCard.user_membership_card_rights_list&&t.drpRightsCard.user_membership_card_rights_list.length>0?i("div",{staticClass:"protection"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.vip_protection")))]),i("div",{staticClass:"items"},t._l(t.drpRightsCard.user_membership_card_rights_list,function(e,s){return i("div",{key:s,staticClass:"item",on:{click:function(i){t.protectionHref(e.membership_card_id,s)}}},[i("div",{staticClass:"icon"},[i("div",{staticClass:"img-box"},[i("img",{staticClass:"img",attrs:{src:e.icon}})])]),i("div",{staticClass:"text"},[t._v(t._s(e.name))])])}))]):t._e(),t.drpRightsCard.description?i("div",{staticClass:"head"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.vip_card")))]),i("div",{staticClass:"notice"},[i("p",[t._v(t._s(t.drpRightsCard.description))])])]):t._e()])]:[i("swiper",{ref:"slideSwiper",staticClass:"apply-swiper",attrs:{options:t.swiperOption}},[t._l(t.drpChangeCard.list,function(e,s){return i("swiper-slide",{key:s},[i("div",{staticClass:"list",class:{"list-active":"goods"!=t.type}},[i("div",{staticClass:"vip-buy"},[i("div",{staticClass:"purchase-card"},[i("div",{staticClass:"swiper-card"},[i("div",{staticClass:"purchase-card-item"},[i("div",{staticClass:"left"},[i("div",{staticClass:"rank"},[t._v(t._s(e.name))]),"forever"==e.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(t.$t("lang.permanence")))]):"days"==e.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(e.expiry_type_format))]):"timespan"==e.expiry_type?i("span",{staticClass:"period"},[t._v(t._s(t.$t("lang.term_of_validity"))+"："+t._s(e.expiry_date_end))]):t._e()]),"goods"!=t.type?i("div",{staticClass:"right"},[t._v(t._s(e.receive_value_arr.value_format))]):t._e()])])]),e.user_membership_card_rights_list&&e.user_membership_card_rights_list.length>0?i("div",{staticClass:"protection"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.vip_protection")))]),i("div",{staticClass:"items"},t._l(e.user_membership_card_rights_list,function(e,s){return i("div",{key:s,staticClass:"item",on:{click:function(i){t.protectionHref(e.membership_card_id,s)}}},[i("div",{staticClass:"icon"},[i("div",{staticClass:"img-box"},[i("img",{staticClass:"img",attrs:{src:e.icon}})])]),i("div",{staticClass:"text"},[t._v(t._s(e.name))])])}))]):t._e(),e.description?i("div",{staticClass:"head"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.vip_card")))]),i("div",{staticClass:"notice"},[i("p",[t._v(t._s(e.description))])])]):t._e(),"integral"==t.type?i("div",{staticClass:"bg-color-write"},[i("div",{staticClass:"cell-box"},[i("div",{staticClass:"cell-title"},[t._v(t._s(t.$t("lang.receive_value_integral")))]),i("div",{staticClass:"cell-content"},[t._v(t._s(e.receive_value_arr.value))])])]):t._e(),"order"==t.type?i("div",{staticClass:"bg-color-write"},[i("div",{staticClass:"cell-box"},[i("div",{staticClass:"cell-title"},[t._v(t._s(t.$t("lang.receive_value_order")))]),i("div",{staticClass:"cell-content"},[t._v(t._s(e.receive_value_arr.value_format))])])]):t._e(),"goods"==t.type?i("div",[e.description?i("div",{staticClass:"head"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("lang.receive_value_goods")))])]):t._e(),i("ul",{staticClass:"apply-goods-list clearfix"},t._l(e.goods_list,function(e,s){return i("li",{key:s,staticClass:"item"},[i("div",{staticClass:"item-wapper"},[i("div",{staticClass:"img"},[i("router-link",{attrs:{to:{name:"goods",params:{id:e.goods_id}}}},[i("img",{attrs:{src:e.goods_thumb,alt:""}})]),i("div",{staticClass:"tag"},[t._v(t._s(t.$t("lang.drp_apply_goods_label")))])],1),i("div",{staticClass:"tit"},[i("router-link",{attrs:{to:{name:"goods",params:{id:e.goods_id}}}},[t._v(t._s(e.goods_name))])],1),i("div",{staticClass:"info"},[i("div",{staticClass:"price",domProps:{innerHTML:t._s(e.shop_price_formated)}}),0==e.is_buy?i("div",{staticClass:"i-btn",on:{click:function(i){t.onAddCartClicked(e.goods_id,10)}}},[t._v(t._s(t.$t("lang.drp_apply_btn_2")))]):i("div",{staticClass:"i-btn"},[t._v(t._s(t.$t("lang.drp_apply_goods_bought")))])])])])}))]):t._e()]),"goods"!=t.type?i("div",{staticClass:"vip-fixed-bottom"},[i("div",{staticClass:"item article-confirm"},[i("div",{staticClass:"radio-wrap",on:{click:t.toggleConfirm}},[i("i",{staticClass:"radio-icon",class:{active:t.confirm}}),t._v(t._s(t.$t("lang.checkout_help_article")))]),i("span",{on:{click:function(e){t.articleHref(t.drpChangeCard.agreement_id)}}},[t._v(t._s(t.drpChangeCard.agreement_article_title))])]),i("div",{staticClass:"item vip-btn",on:{click:t.onSubmit}},["goods"==t.type?[i("span",[t._v(t._s(t.$t("lang.drp_apply_btn_1")))])]:"buy"==t.type?[i("span",[t._v(t._s(t.$t("lang.immediate_pay")))]),i("span",{staticClass:"number"},[t._v(t._s(e.receive_value_arr.value_format))])]:"free"==t.type?[i("span",[t._v(t._s(t.$t("lang.immediately_receive")))])]:[i("span",[t._v(t._s(t.$t("lang.immediately_change")))])]],2)]):t._e()])])}),i("div",{staticClass:"swiper-button swiper-button-next",attrs:{slot:"button-prev"},slot:"button-prev"},[i("i",{staticClass:"iconfont icon-more"})]),i("div",{staticClass:"swiper-button swiper-button-prev",attrs:{slot:"button-next"},slot:"button-next"},[i("i",{staticClass:"iconfont icon-back"})])],2)],i("van-popup",{staticClass:"vip-popup",model:{value:t.applyPopupShow,callback:function(e){t.applyPopupShow=e},expression:"applyPopupShow"}},[i("div",{staticClass:"p-content"},[2==t.popupStep||3==t.popupStep?i("div",{staticClass:"p-icon"},[2==t.popupStep?i("div",{staticClass:"loader04"}):t._e(),3==t.popupStep?i("div",{staticClass:"p-icon-success"}):t._e()]):t._e(),i("p",{domProps:{innerHTML:t._s(t.validMsg)}}),t.validNumber.length>0?i("p",{staticClass:"number",domProps:{innerHTML:t._s(t.validNumber)}}):t._e(),t.validTip.length>0?i("p",{class:{green:t.formValid,red:!t.formValid},domProps:{innerHTML:t._s(t.validTip)}}):t._e()]),i("div",{staticClass:"p-handler"},[1==t.popupStep?[i("div",{staticClass:"v-btn",on:{click:t.closePopup}},[t._v(t._s(t.$t("lang.close_window")))])]:t._e(),2==t.popupStep?[i("div",{staticClass:"v-btn disabled"},[t._v(t._s(t.$t("lang.drp_apply_padding")))])]:t._e(),3==t.popupStep?[i("div",{staticClass:"v-btn",on:{click:t.drpInfoHref}},[t._v(t._s(t.$t("lang.href_drp_center")))])]:t._e()],2)]),i("DscLoading",{attrs:{dscLoading:t.dscLoading}}),i("CommonNav",{attrs:{routerName:t.routerName}},[i("li",{attrs:{slot:"aloneNav"},slot:"aloneNav"},[i("router-link",{attrs:{to:{name:"drp"}}},[i("i",{staticClass:"iconfont icon-fenxiao"}),i("p",[t._v(t._s(t.$t("lang.drp_center")))])])],1)])],2)},n=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),o=(i("e17f"),i("2241")),c=(i("8a58"),i("e41f")),l=(i("e7e5"),i("d399")),p=(i("f908"),i("b528")),d=(i("19de"),i("234f")),u=(i("93ac"),i("bb33")),_=(i("7f7f"),i("66b9"),i("b650")),v=i("4328"),h=i.n(v),m=i("2f62"),f=i("7212"),g=i("d567"),C=i("42d1");function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach(function(e){Object(r["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var $=null,x={data:function(){return{routerName:"drp",confirm:!1,formValid:!0,validMsg:"",validNumber:"",validTip:"",popupStep:1,applySuccess:!1,applyPopupShow:!1,dscLoading:!0,index:0,swiperOption:{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){$.index=this.activeIndex},slideChange:function(){$.index=this.activeIndex}},autoHeight:!0},point:this.$route.query.point?this.$route.query.point:"",type:this.$route.query.receive_type,card_id:this.$route.query.card_id?this.$route.query.card_id:""}},components:(s={},Object(r["a"])(s,_["a"].name,_["a"]),Object(r["a"])(s,u["a"].name,u["a"]),Object(r["a"])(s,d["a"].name,d["a"]),Object(r["a"])(s,p["a"].name,p["a"]),Object(r["a"])(s,l["a"].name,l["a"]),Object(r["a"])(s,c["a"].name,c["a"]),Object(r["a"])(s,o["a"].name,o["a"]),Object(r["a"])(s,"swiper",f["swiper"]),Object(r["a"])(s,"swiperSlide",f["swiperSlide"]),Object(r["a"])(s,"CommonNav",g["a"]),Object(r["a"])(s,"DscLoading",C["a"]),s),computed:b({},Object(m["c"])({drpChangeCard:function(t){return t.drp.drpChangeCard},drpRightsCard:function(t){return t.drp.drpRightsCard}})),created:function(){$=this;var t=this.$route.query.apply_status?this.$route.query.apply_status:null,e=this.$route.query.membership_card_id?this.$route.query.membership_card_id:null;this.card_id?this.onRightsCard():t&&e?this.$store.dispatch("setDrpChangeCard",{receive_type:this.type,apply_status:t,membership_card_id:e}):this.$store.dispatch("setDrpChangeCard",{receive_type:this.type})},methods:{onSubmit:function(){var t=this,e=this,i={receive_type:this.type,membership_card_id:this.drpChangeCard.list[this.index].id};if(!this.confirm)return Object(l["a"])(this.$t("lang.drp_agreement_please")),!1;var s=this.$route.query.apply_status?this.$route.query.apply_status:null;if(s&&(i={receive_type:this.type,apply_status:s,membership_card_id:this.drpChangeCard.list[this.index].id}),"integral"==this.type&&(i=s?{receive_type:this.type,apply_status:s,membership_card_id:this.drpChangeCard.list[this.index].id,pay_point:this.drpChangeCard.list[this.index].receive_value_arr.value}:{receive_type:this.type,membership_card_id:this.drpChangeCard.list[this.index].id,pay_point:this.drpChangeCard.list[this.index].receive_value_arr.value}),"buy"==this.type)return this.$router.push({name:"drp-done",query:{apply_status:s,membership_card_id:this.drpChangeCard.list[this.index].id}}),!1;var a=this.$t("lang.apply_confirm");"renew"==s&&(a=this.$t("lang.apply_confirm_renew")),"change"==s&&(a=this.$t("lang.apply_confirm_change")),o["a"].confirm({message:a,className:"text-center"}).then(function(){t.$http.post("".concat(window.ROOT_URL,"api/drp/apply"),h.a.stringify(i)).then(function(i){var s=i.data;"success"==s.status?(t.validTip=s.data.msg,0==s.data.error?(t.formValid=!0,t.popupStep=3,setTimeout(function(){e.$router.push({name:"drp-info"})},2e3)):(t.formValid=!1,t.popupStep=1),t.applyPopupShow=!0):Object(l["a"])(t.$t("lang.interface_error_reporting"))})})},onRightsCard:function(){this.$store.dispatch("setDrpRightsCard",{membership_card_id:this.card_id})},toggleConfirm:function(){this.confirm=!this.confirm},closePopup:function(){this.applyPopupShow=!1},articleHref:function(t){this.$router.push({name:"articleDetail",params:{id:t}})},protectionHref:function(t,e){this.$router.push({name:"drp-protection",query:{card_id:t,index:e}})},drpInfoHref:function(){this.$router.push({name:"drp-info"})},onAddCartClicked:function(t,e){var i=this;this.$store.dispatch("setAddCart",{goods_id:t,num:1,spec:[],rec_type:e}).then(function(t){1==t?i.$router.push({name:"checkout",query:{rec_type:e}}):Object(l["a"])(t.msg)})}},watch:{drpChangeCard:function(){var t=this;setTimeout(function(){t.dscLoading=!1},1e3)},drpRightsCard:function(){var t=this;setTimeout(function(){t.dscLoading=!1},1e3)}}},w=x,k=i("2877"),O=Object(k["a"])(w,a,n,!1,null,null,null);O.options.__file="DrpApply.vue";e["default"]=O.exports},"4cf9":function(t,e,i){},"5fbe":function(t,e,i){},"66b9":function(t,e,i){"use strict";i("68ef")},"6fd6":function(t,e,i){},"8a58":function(t,e,i){"use strict";i("68ef"),i("4d75")},"93ac":function(t,e,i){"use strict";i("68ef"),i("4cf9")},a637:function(t,e,i){"use strict";var s=i("2662"),a=i.n(s);a.a},ac1e:function(t,e,i){"use strict";i("68ef")},b528:function(t,e,i){"use strict";var s=i("fe7e"),a=i("9584");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"van-hairline",class:t.b(),on:{click:t.onClick}},[i("icon",{class:[t.b("icon"),t.iconClass],attrs:{info:t.info,name:t.icon}}),t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-mini-btn",mixins:[a["a"]],props:{text:String,info:[String,Number],icon:String,iconClass:String},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}})},bb33:function(t,e,i){"use strict";var s=i("fe7e");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("default")],2)},name:"goods-action"})},c1ee:function(t,e,i){"use strict";var s=i("6fd6"),a=i.n(s);a.a},d567:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sus-nav"},[i("div",{staticClass:"common-nav",class:{active:!0===t.navType},attrs:{id:"moveDiv"},on:{touchstart:t.down,touchmove:t.move,touchend:t.end}},[i("div",{staticClass:"right-cont",attrs:{id:"rightDiv"}},[i("ul",[i("li",{on:{click:function(e){t.routerLink("home")}}},[i("i",{staticClass:"iconfont icon-zhuye"}),i("p",[t._v(t._s(t.$t("lang.home")))])]),"drp"!=t.routerName&&"crowd_funding"!=t.routerName&&"team"!=t.routerName&&"supplier"!=t.routerName&&"presale"!=t.routerName?i("li",{on:{click:function(e){t.routerLink("search")}}},[i("i",{staticClass:"iconfont icon-search"}),i("p",[t._v(t._s(t.$t("lang.search")))])]):t._e(),i("li",{on:{click:function(e){t.routerLink("catalog")}}},[i("i",{staticClass:"iconfont icon-menu"}),i("p",[t._v(t._s(t.$t("lang.category")))])]),i("li",{on:{click:function(e){t.routerLink("cart")}}},[i("i",{staticClass:"iconfont icon-cart"}),i("p",[t._v(t._s(t.$t("lang.cart")))])]),i("li",{on:{click:function(e){t.routerLink("user")}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin"}),i("p",[t._v(t._s(t.$t("lang.personal_center")))])]),"team"==t.routerName?i("li",{on:{click:function(e){t.routerLink("team")}}},[i("i",{staticClass:"iconfont icon-wodetuandui"}),i("p",[t._v(t._s(t.$t("lang.my_team")))])]):t._e(),"supplier"==t.routerName?i("li",{on:{click:function(e){t.routerLink("supplier")}}},[i("i",{staticClass:"iconfont icon-wodetuandui"}),i("p",[t._v(t._s(t.$t("lang.suppliers")))])]):t._e(),t._t("aloneNav")],2)]),i("div",{staticClass:"nav-icon",on:{click:t.handelNav}},[t._v(t._s(t.$t("lang.quick_navigation")))])]),i("div",{staticClass:"common-show",class:{active:!0===t.navType},on:{click:function(e){return e.stopPropagation(),t.handelShow(e)}}})])},a=[],n=(i("3846"),{props:["routerName"],data:function(){return{navType:!1,flags:!1,position:{x:0,y:0},nx:"",ny:"",dx:"",dy:"",xPum:"",yPum:""}},mounted:function(){this.flags=!1},methods:{handelNav:function(){this.navType=1!=this.navType},handelShow:function(){this.navType=!1},down:function(){var t;this.flags=!0,t=event.touches?event.touches[0]:event,this.position.x=t.clientX,this.position.y=t.clientY,this.dx=moveDiv.offsetLeft,this.dy=moveDiv.offsetTop},move:function(){var t,e,i,s;(event.preventDefault(),this.flags)&&(t=event.touches?event.touches[0]:event,e=document.documentElement.clientHeight,i=moveDiv.clientHeight,this.nx=t.clientX-this.position.x,this.ny=t.clientY-this.position.y,this.xPum=this.dx+this.nx,this.yPum=this.dy+this.ny,this.navType?this.yPum>0&&(s=e-i-this.yPum>0?e-i-this.yPum:0):(i+=rightDiv.clientHeight,this.yPum-i>0&&(s=e-this.yPum>0?e-this.yPum:0)),moveDiv.style.bottom=s+"px")},end:function(){this.flags=!1},routerLink:function(t){var e=this;"home"==t||"catalog"==t||"search"==t||"user"==t?setTimeout(function(){uni.getEnv(function(i){i.plus||i.miniprogram?"home"==t?uni.reLaunch({url:"../../pages/index/index"}):"catalog"==t?uni.reLaunch({url:"../../pages/category/category"}):"search"==t?uni.reLaunch({url:"../../pages/search/search"}):"user"==t&&uni.reLaunch({url:"../../pages/user/user"}):"search"==t?e.$router.push({name:"search"}):e.$router.push({name:t})}),uni.postMessage({data:{action:"postMessage"}})},100):e.$router.push({name:t})}}}),r=n,o=(i("c1ee"),i("2877")),c=Object(o["a"])(r,s,a,!1,null,null,null);c.options.__file="CommonNav.vue";e["a"]=c.exports},e41f:function(t,e,i){"use strict";var s=i("fe7e"),a=i("6605");e["a"]=Object(s["a"])({render:function(){var t,e=this,i=e.$createElement,s=e._self._c||i;return s("transition",{attrs:{name:e.currentTransition}},[e.shouldRender?s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b((t={},t[e.position]=e.position,t))},[e._t("default")],2):e._e()])},name:"popup",mixins:[a["a"]],props:{transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{currentTransition:function(){return this.transition||(""===this.position?"van-fade":"popup-slide-"+this.position)}}})},f8b2:function(t,e,i){t.exports=i.p+"img/loading.gif"},f908:function(t,e,i){"use strict";i("68ef"),i("1f5b")}}]);
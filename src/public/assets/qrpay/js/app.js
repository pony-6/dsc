webpackJsonp([1],{18:function(e,t){},19:function(e,t){},20:function(e,t,a){function n(e){a(55)}var i=a(16)(a(38),a(63),n,"data-v-229a9de2",null);e.exports=i.exports},38:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),i=(a.n(n),a(62)),r=a.n(i),o=a(59),l=a.n(o);t.default={name:"paycode",data:function(){return{qrpay_id:0,isGray:!0,isReadonly:!1,seller:"",qrcode:[],locked:!1}},components:{"currency-input":r.a},created:function(){this.qrpay_id=window.qrpay_id||0,this.getQrcodeDetail(this.qrpay_id)},methods:{doPay:function(){var e=this;if(0==e.locked){e.locked=!0;var t=parseFloat(e.qrcode.amount);isNaN(t)&&a.i(n.Toast)({message:"请输入支付金额",forbidClick:!0}),axios.post(window.home_url+"/index.php?m=qrpay&a=pay",l.a.stringify({id:e.qrpay_id,amount:e.qrcode.amount,_ajax:1})).then(function(t){e.locked=!1;var a=t.data;a.error>0&&alert(a.message),"alipay"==a.paycode?window.location.href=a.payment:"wxpay"==a.paycode&&e.callpay(JSON.parse(a.payment))}).catch(function(e){console.log(e)})}},getQrcodeDetail:function(e){var t=this;axios.get(window.home_url+"/index.php?m=qrpay&id="+parseInt(e),{params:{_ajax:1}}).then(function(e){t.seller=e.data.seller,t.qrcode=e.data.qrcode}).catch(function(e){console.log(e)})},jsApiCall:function(e){var t=this;WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){"get_brand_wcpay_request:ok"==e.err_msg?window.location.href=window.home_url+"/index.php?m=qrpay&a=callback&status=1&id="+t.qrpay_id:window.location.href=window.home_url+"/index.php?m=qrpay&a=callback&status=0&id="+t.qrpay_id})},callpay:function(e){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall(e),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall(e)),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall(e))):this.jsApiCall(e)}}}},39:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(40);t.default={name:"currency",props:{value:{type:Number,default:0},label:{type:String,default:"￥"},isGray:{type:Boolean,default:!0},isReadonly:{type:Boolean,default:!1}},mounted:function(){this.formatValue()},methods:{updateValue:function(e){var t=n.a.parse(e,this.value);this.$emit("update:updateGray",0===t.value),t.warning&&(this.$refs.input.value=t.value),t.value=t.value>=1e4?9999.99:t.value,this.$emit("input",t.value)},formatValue:function(){this.$refs.input.value=n.a.format(this.value)},selectAll:function(e){setTimeout(function(){e.target.select()},0)}}}},40:function(e,t,a){"use strict";var n=a(42),i=a.n(n),r={format:function(e){return(i()(1e12*e)/1e12).toFixed(2)},parse:function(e,t){var a=function(e){return{value:e}},n=function(t,a){return{warning:t,value:a,attempt:e}},i=function(t){return new n(e+" is not a valid dollar amount",t)},o=function(t){return new n(e+" was automatically converted to "+t,t)},l=Number(e),u=e.indexOf("."),c=e.indexOf("e");if(isNaN(l))return-1===u&&c>0&&c===e.length-1&&0!==Number(e.slice(0,c))?new a(t):new i(t);var s=r.format(l),d=Number(s);return d===l?-1!==c&&c===e.length-2?new o(l):new a(l):new i(l>d?d:t)}};t.a=r},41:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),i=a(20),r=a.n(i),o=a(4),l=a.n(o),u=a(18),c=(a.n(u),a(19));a.n(c);window.axios=a(17),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",n.default.config.productionTip=!1,n.default.use(l.a),new n.default({el:"#app",template:"<App/>",components:{App:r.a}})},55:function(e,t){},56:function(e,t){},62:function(e,t,a){function n(e){a(56)}var i=a(16)(a(39),a(64),n,"data-v-f026bcd0",null);e.exports=i.exports},63:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paycode"},[a("van-row",{staticStyle:{"text-align":"center","margin-top":"3rem"}},[a("van-icon",{staticStyle:{"text-align":"center","font-size":"4rem",color:"red"},attrs:{name:"receive-gift"}}),e._v(" "),a("div",{staticStyle:{"margin-top":"1rem"}},["0"==e.qrcode.type?a("span",[e._v(e._s(e.seller))]):a("span",{staticStyle:{"font-size":"2rem"}},[e._v("￥"+e._s(e.qrcode.amount))])])],1),e._v(" "),"1"==e.qrcode.type?a("van-row",{staticStyle:{"margin-top":"2rem"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"收款理由："}},[e._v(e._s(e.qrcode.qrpay_name))])],1)],1):a("van-row",{staticStyle:{"margin-top":"2rem"}},[a("van-cell-group",[a("van-cell",{attrs:{title:" 付款金额",icon:"edit"}}),e._v(" "),a("currency-input",{attrs:{isGray:e.isGray,updateGray:e.isGray},on:{"update:updateGray":function(t){e.isGray=t}},model:{value:e.qrcode.amount,callback:function(t){e.qrcode.amount=t},expression:"qrcode.amount"}})],1)],1),e._v(" "),a("van-row",{staticStyle:{"margin-top":"2rem"}},[a("van-col",{attrs:{offset:"2",span:"20"}},[a("van-button",{attrs:{type:"primary",block:""},on:{click:e.doPay}},[e._v("立即支付")])],1)],1)],1)},staticRenderFns:[]}},64:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"currency"},[e.label?a("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),a("input",{ref:"input",class:{gray:e.isGray},attrs:{maxlength:"7"},domProps:{value:e.value},on:{input:function(t){e.updateValue(t.target.value)},focus:e.selectAll,blur:e.formatValue}})])},staticRenderFns:[]}}},[41]);
//# sourceMappingURL=app.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-315b"],{1146:function(t,e,a){},2022:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drp-set"},[i("div",{staticClass:"padding-all f-06 color-7"},[t._v(t._s(t.$t("lang.basic_set")))]),i("van-uploader",{staticClass:"show",attrs:{"after-read":t.onRead}},[i("div",{staticClass:"header padding-all bg-color-write p-r dis-box"},[i("div",{staticClass:"user-img img-common"},[t.drpSetData.shop_portrait?i("img",{staticClass:"img",attrs:{src:t.drpSetData.shop_portrait}}):i("img",{attrs:{src:a("e31e")}})]),i("div",{staticClass:"box-flex title"},[i("h3",[t._v(t._s(t.$t("lang.shop_image")))])]),i("i",{staticClass:"iconfont icon-more p-a f-03 color-9"})])]),i("div",{staticClass:"input-list"},[i("van-field",{staticClass:"f-04",attrs:{clearable:"",label:t.$t("lang.shop_name"),placeholder:t.$t("lang.shop_name_placeholder")},model:{value:t.drpSetData.shop_name,callback:function(e){t.$set(t.drpSetData,"shop_name",e)},expression:"drpSetData.shop_name"}}),i("van-field",{staticClass:"f-04",attrs:{clearable:"",label:t.$t("lang.truename"),placeholder:t.$t("lang.truename_placeholder")},model:{value:t.drpSetData.real_name,callback:function(e){t.$set(t.drpSetData,"real_name",e)},expression:"drpSetData.real_name"}}),i("van-field",{staticClass:"f-04",attrs:{clearable:"",label:t.$t("lang.phone_number"),maxlength:"11",placeholder:t.$t("lang.enter_mobile")},model:{value:t.drpSetData.mobile,callback:function(e){t.$set(t.drpSetData,"mobile",e)},expression:"drpSetData.mobile"}}),i("van-field",{staticClass:"f-04",attrs:{clearable:"",label:"QQ",placeholder:t.$t("lang.qq_placeholder")},model:{value:t.drpSetData.qq,callback:function(e){t.$set(t.drpSetData,"qq",e)},expression:"drpSetData.qq"}})],1),i("div",{staticClass:"padding-all f-02 color-7"},[t._v(t._s(t.$t("lang.upload_bg_image")))]),i("van-uploader",{staticClass:"show",attrs:{"after-read":t.onShop("drpBg")}},[i("div",{staticClass:"bg-color-write padding-all"},[i("div",{staticClass:"img-common"},[t.materialPic?[i("img",{attrs:{src:t.materialPic}})]:[t.drpSetData.shop_img?i("img",{attrs:{src:t.drpSetData.shop_img}}):i("img",{attrs:{src:t.pic}})]],2)])]),i("div",{staticClass:"padding-all f-02 color-7"},[t._v(t._s(t.$t("lang.advanced_setup")))]),i("div",{staticClass:"dis-box drp-model bg-color-write f-04"},[i("div",{staticClass:"left-title"},[t._v(t._s(t.$t("lang.drp_select")))]),i("van-radio-group",{staticClass:"dis-box",model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("van-radio",{staticClass:"box-flex",attrs:{name:"0"}},[t._v(t._s(t.$t("lang.all")))]),i("van-radio",{staticClass:"box-flex",attrs:{name:"1"}},[t._v(t._s(t.$t("lang.category")))]),i("van-radio",{staticClass:"box-flex",attrs:{name:"2"}},[t._v(t._s(t.$t("lang.goods")))])],1)],1),i("div",{staticClass:"padding-all"},[i("van-button",{staticClass:"br-5 f-06",attrs:{type:"primary","bottom-action":""},on:{click:t.drpSetClick}},[t._v(t._s(t.$t("lang.confirm_update")))])],1)],1)},s=[],r=(a("6b54"),a("9395")),o=a("88d8"),l=(a("e7e5"),a("d399")),c=(a("e930"),a("8f80")),d=(a("a44c"),a("e27c")),u=(a("4ddd"),a("9f14")),p=(a("66b9"),a("b650")),f=(a("7f7f"),a("be7f"),a("565f")),h=a("2f62"),m=a("3855"),b={name:"drp-set",components:(i={},Object(o["a"])(i,f["a"].name,f["a"]),Object(o["a"])(i,p["a"].name,p["a"]),Object(o["a"])(i,u["a"].name,u["a"]),Object(o["a"])(i,d["a"].name,d["a"]),Object(o["a"])(i,c["a"].name,c["a"]),Object(o["a"])(i,l["a"].name,l["a"]),i),data:function(){return{pic:a("9b80"),materialPic:"",radio:"0",avatarUploadImage:""}},computed:Object(r["a"])({},Object(h["c"])({drpSetData:function(t){return t.drp.drpSetData}})),mounted:function(){this.onLoad()},methods:{onLoad:function(){this.$store.dispatch("setDrpSet")},onRead:function(t){this.imgPreview(t.file)},updataAvatar:function(){var t=this;l["a"].loading({message:"上传中...",duration:0}),this.$store.dispatch("setMaterial",{file:{content:this.avatarUploadImage},type:"drpAvatar"}).then(function(e){t.$store.dispatch("setDrpUpdateAvatar",{pic:e.data[0],id:t.$store.state.drp.drpSetData.id})})},imgPreview:function(t){var e,a=this;if(a.Exif.getData(t,function(){e=a.Exif.getTag(this,"orientation")}),t&&window.FileReader&&/^image/.test(t.type)){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(){var t=this.result,i=new Image;i.src=t,this.result.length<=512e3?(a.avatarUploadImage=this.result,a.updataAvatar()):i.onload=function(){var t=m["a"].compress(i,e);a.avatarUploadImage=t,a.updataAvatar()}}}},onShop:function(t){var e=this;return function(a){a.length>1?Object(l["a"])(e.$t("lang.only_one_image_can_be_selected")):e.$store.dispatch("setMaterial",{file:a,type:t}).then(function(t){e.materialPic=t.data[0]})}},drpSetClick:function(){var t=this;this.$store.dispatch("setDrpUpdate",{id:this.$store.state.drp.drpSetData.id,shop_name:this.$store.state.drp.drpSetData.shop_name,real_name:this.$store.state.drp.drpSetData.real_name,mobile:this.$store.state.drp.drpSetData.mobile,qq:this.$store.state.drp.drpSetData.qq,pic:this.materialPic,type:this.radio}).then(function(e){var a=e.data;Object(l["a"])(a.msg),t.$router.push({name:"drp"})})}},watch:{drpSetData:function(){this.radio=this.drpSetData.type?this.drpSetData.type.toString():"0"}}},g=b,v=a("2877"),_=Object(v["a"])(g,n,s,!1,null,null,null);_.options.__file="Set.vue";e["default"]=_.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},3855:function(t,e,a){"use strict";a("e7e5");var i=a("d399"),n=a("bf0f");function s(){i["a"].loading({duration:600,mask:!0,message:n["a"].t("lang.loading")})}function r(t,e){var a,i,n=document.createElement("canvas"),s=n.getContext("2d"),r=document.createElement("canvas"),o=r.getContext("2d"),l=(t.src.length,t.width),c=t.height;if((a=l*c/4e6)>1?(a=Math.sqrt(a),l/=a,c/=a):a=1,n.width=l,n.height=c,s.fillStyle="#fff",s.fillRect(0,0,n.width,n.height),(i=l*c/1e6)>1){i=~~(Math.sqrt(i)+1);var d=~~(l/i),u=~~(c/i);r.width=d,r.height=u;for(var p=0;p<i;p++)for(var f=0;f<i;f++)o.drawImage(t,p*d*a,f*u*a,d*a,u*a,0,0,d,u),s.drawImage(r,p*d,f*u,d,u)}else s.drawImage(t,0,0,l,c);var h=n.toDataURL("image/jpeg",.3);return r.width=r.height=n.width=n.height=0,h}e["a"]={loadingData:s,compress:r}},"4ddd":function(t,e,a){"use strict";a("68ef"),a("dde9")},"565f":function(t,e,a){"use strict";var i=a("c31d"),n=a("fe7e"),s=a("a142");e["a"]=Object(n["a"])({render:function(){var t,e=this,a=e.$createElement,i=e._self._c||a;return i("cell",{class:e.b((t={error:e.error,disabled:e.$attrs.disabled,"min-height":"textarea"===e.type&&!e.autosize},t["label-"+e.labelAlign]=e.labelAlign,t)),attrs:{icon:e.leftIcon,title:e.label,center:e.center,border:e.border,"is-link":e.isLink,required:e.required}},[e._t("left-icon",null,{slot:"icon"}),e._t("label",null,{slot:"title"}),i("div",{class:e.b("body")},["textarea"===e.type?i("textarea",e._g(e._b({ref:"input",class:e.b("control",e.inputAlign),attrs:{readonly:e.readonly},domProps:{value:e.value}},"textarea",e.$attrs,!1),e.listeners)):i("input",e._g(e._b({ref:"input",class:e.b("control",e.inputAlign),attrs:{type:e.type,readonly:e.readonly},domProps:{value:e.value}},"input",e.$attrs,!1),e.listeners)),e.showClear?i("icon",{class:e.b("clear"),attrs:{name:"clear"},on:{touchstart:function(t){return t.preventDefault(),e.onClear(t)}}}):e._e(),e.$slots.icon||e.icon?i("div",{class:e.b("icon"),on:{click:e.onClickIcon}},[e._t("icon",[i("icon",{attrs:{name:e.icon}})])],2):e._e(),e.$slots.button?i("div",{class:e.b("button")},[e._t("button")],2):e._e()],1),e.errorMessage?i("div",{class:e.b("error-message"),domProps:{textContent:e._s(e.errorMessage)}}):e._e()],2)},name:"field",inheritAttrs:!1,props:{value:[String,Number],icon:String,label:String,error:Boolean,center:Boolean,isLink:Boolean,leftIcon:String,readonly:Boolean,required:Boolean,clearable:Boolean,labelAlign:String,inputAlign:String,onIconClick:Function,autosize:[Boolean,Object],errorMessage:String,type:{type:String,default:"text"},border:{type:Boolean,default:!0}},data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&this.isDef(this.value)&&!this.readonly},listeners:function(){return Object(i["a"])({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur})}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(t){void 0===t&&(t=this.$refs.input);var e=t,a=e.value,i=this.$attrs.maxlength;return this.isDef(i)&&a.length>i&&(a=a.slice(0,i),t.value=a),a},onInput:function(t){this.$emit("input",this.format(t.target))},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.$emit("blur",t)},onClickIcon:function(){this.$emit("click-icon"),this.onIconClick&&this.onIconClick()},onClear:function(){this.$emit("input",""),this.$emit("clear")},onKeypress:function(t){if("number"===this.type){var e=t.keyCode,a=-1===String(this.value).indexOf("."),i=e>=48&&e<=57||46===e&&a||45===e;i||t.preventDefault()}"search"===this.type&&13===t.keyCode&&this.blur(),this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(s["d"])(this.autosize)){var a=this.autosize,i=a.maxHeight,n=a.minHeight;i&&(e=Math.min(e,i)),n&&(e=Math.max(e,n))}e&&(t.style.height=e+"px")}}}})},"66b9":function(t,e,a){"use strict";a("68ef")},"6b54":function(t,e,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),s=a("9e1e"),r="toString",o=/./[r],l=function(t){a("2aba")(RegExp.prototype,r,t,!0)};a("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?n.call(t):void 0)}):o.name!=r&&l(function(){return o.call(this)})},"8f80":function(t,e,a){"use strict";var i=a("fe7e");e["a"]=Object(i["a"])({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.b()},[t._t("default"),a("input",t._b({ref:"input",class:t.b("input"),attrs:{type:"file",accept:t.accept,disabled:t.disabled},on:{change:t.onChange}},"input",t.$attrs,!1))],2)},name:"uploader",inheritAttrs:!1,props:{disabled:Boolean,beforeRead:Function,afterRead:Function,accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE}},methods:{onChange:function(t){var e=this,a=t.target.files;!this.disabled&&a.length&&(a=1===a.length?a[0]:[].slice.call(a,0),!a||this.beforeRead&&!this.beforeRead(a)||(Array.isArray(a)?Promise.all(a.map(this.readFile)).then(function(t){var i=!1,n=a.map(function(n,s){return n.size>e.maxSize&&(i=!0),{file:a[s],content:t[s]}});e.onAfterRead(n,i)}):this.readFile(a).then(function(t){e.onAfterRead({file:a,content:t},a.size>e.maxSize)})))},readFile:function(t){var e=this;return new Promise(function(a){var i=new FileReader;i.onload=function(t){a(t.target.result)},"dataUrl"===e.resultType?i.readAsDataURL(t):"text"===e.resultType&&i.readAsText(t)})},onAfterRead:function(t,e){e?this.$emit("oversize",t):(this.afterRead&&this.afterRead(t),this.$refs.input&&(this.$refs.input.value=""))}}})},"9b80":function(t,e,a){t.exports=a.p+"img/user-shop.png"},"9f14":function(t,e,a){"use strict";var i=a("fe7e"),n=a("f331");e["a"]=Object(i["a"])({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.b({disabled:t.isDisabled}),on:{click:function(e){t.$emit("click")}}},[a("span",{class:t.b("input")},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],class:t.b("control"),attrs:{type:"radio",disabled:t.isDisabled},domProps:{value:t.name,checked:t._q(t.currentValue,t.name)},on:{change:function(e){t.currentValue=t.name}}}),a("icon",{attrs:{name:t.currentValue===t.name?"checked":"check"}})],1),t.$slots.default?a("span",{class:t.b("label",t.labelPosition),on:{click:t.onClickLabel}},[t._t("default")],2):t._e()])},name:"radio",mixins:[n["a"]],props:{name:null,value:null,disabled:Boolean,labelDisabled:Boolean,labelPosition:Boolean},computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled}},created:function(){this.findParent("van-radio-group")},methods:{onClickLabel:function(){this.isDisabled||this.labelDisabled||(this.currentValue=this.name)}}})},a44c:function(t,e,a){"use strict";a("68ef")},bcd3:function(t,e,a){},be7f:function(t,e,a){"use strict";a("68ef"),a("1146")},dde9:function(t,e,a){},e27c:function(t,e,a){"use strict";var i=a("fe7e");e["a"]=Object(i["a"])({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.b()},[t._t("default")],2)},name:"radio-group",props:{value:null,disabled:Boolean},watch:{value:function(t){this.$emit("change",t)}}})},e31e:function(t,e,a){t.exports=a.p+"img/user_default.png"},e930:function(t,e,a){"use strict";a("68ef"),a("bcd3")},f331:function(t,e,a){"use strict";e["a"]={data:function(){return{parent:null}},methods:{findParent:function(t){var e=this.$parent;while(e){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7a54"],{"7a54":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"con bg-color-write"},[s("div",{staticClass:"user-login-box"},[s("ec-form",{ref:"loginForm",staticClass:"user-login-form"},[s("div",{staticClass:"user-login-head"},[s("i",{staticClass:"iconfont icon-back",on:{click:t.onClickHome}}),t.type?s("h1",[t._v(t._s(t.$t("lang.reset_password")))]):s("h1",[t._v(t._s(t.$t("lang.forget_password")))])]),s("div",{staticClass:"user-login-ul"},[s("ec-form-item",{attrs:{prop:"imgverify"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-pic"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"text",placeholder:t.$t("lang.captcha_img")},model:{value:t.imgverifyValue,callback:function(e){t.imgverifyValue=e},expression:"imgverifyValue"}})],1),s("div",{staticClass:"key"},[s("img",{staticClass:"j-verify-img",attrs:{src:t.captcha},on:{click:t.clickCaptcha}})])])]),s("ec-form-item",{attrs:{prop:"mobile"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-mobiles"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",disabled:t.isDisabled,placeholder:t.mobile_placeholder},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),s("div",{staticClass:"key"},[t.button_type?s("label",{on:{click:t.sendVerifyCode}},[t._v(t._s(t.$t("lang.get_code")))]):s("label",[t._v(t._s(t.button_text))])])])]),s("ec-form-item",{attrs:{prop:"sms"}},[s("div",{staticClass:"item-input dis-box"},[s("div",{staticClass:"label"},[s("i",{staticClass:"iconfont icon-key"})]),s("div",{staticClass:"value box-flex"},[s("ec-input",{attrs:{type:"tel",placeholder:t.$t("lang.get_sms_code")},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1)])])],1),t.state?[s("button",{staticClass:"btn btn-submit border-radius-top05",attrs:{type:"button"},on:{click:t.submitBtn}},[t._v(t._s(t.$t("lang.next_step")))])]:[s("button",{staticClass:"btn btn-submit border-radius-top05 btn-disabled",attrs:{type:"button"}},[t._v(t._s(t.userInfo.mobile?t.$t("lang.next_step"):"尚未绑定手机号，无法修改"))])]],2)],1)])},a=[],n=s("9395"),o=s("88d8"),c=(s("7f7f"),s("e7e5"),s("d399")),l=(s("10cb"),s("450d"),s("f3ad")),r=s.n(l),u=(s("eca7"),s("3787")),b=s.n(u),m=(s("425f"),s("4105")),d=s.n(m),p=s("2f62"),f=(s("bc3a"),{name:"login",data:function(){return{imgverifyValue:"",sms:"",button_text:this.$t("lang.send_again_60"),send_again:this.$t("lang.send_again"),button_type:!0,state:!1,type:this.$route.query.type?this.$route.query.type:"",isDisabled:!0}},components:Object(o["a"])({EcForm:d.a,EcFormItem:b.a,EcInput:r.a},c["a"].name,c["a"]),created:function(){this.$store.dispatch("setImgVerify"),this.$store.dispatch("userProfile")},computed:Object(n["a"])({},Object(p["c"])({token:function(t){return t.user.token},userInfo:function(t){return t.user.userInfo}}),{mobile:function(){return this.userInfo.mobile},mobile_placeholder:function(){return this.userInfo.mobile?this.$t("lang.enter_mobile"):"尚未绑定手机号"},captcha:function(){return this.$store.state.imgVerify.captcha},client:function(){return this.$store.state.imgVerify.client}}),methods:{clickCaptcha:function(){this.$store.dispatch("setImgVerify")},sendVerifyCode:function(){var t=this,e={captcha:this.imgverifyValue,client:this.client,mobile:this.mobile};if(!this.checkMobile())return Object(c["a"])(this.$t("lang.phone_number_format")),!1;this.$http.get("".concat(window.ROOT_URL,"api/user/profile/basic"),{params:{name:this.mobile}}).then(function(s){var i=s.data;"success"===i.status?(t.state=!0,t.$store.dispatch("setSendVerify",e).then(function(e){if("success"==e){t.button_type=!1;var s=60,i=setInterval(function(){s--,s?t.button_text=t.send_again+"("+s+"s)":(t.button_type=!0,clearInterval(i))},1e3)}})):Object(c["a"])(t.$t("lang.user_not_exist"))})},submitBtn:function(){return this.checkMobile()?""==this.sms?(Object(c["a"])(this.$t("lang.get_sms_code")),!1):void this.$router.push({name:"reset",query:{mobile:this.mobile,client:this.client,code:this.sms}}):(Object(c["a"])(this.$t("lang.phone_number_format")),!1)},onClickHome:function(){this.$router.push({name:"user"})},checkMobile:function(){var t=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;return!!t.test(this.mobile)}},watch:{token:function(){this.$router.push({name:"user"})}}}),h=f,_=s("2877"),g=Object(_["a"])(h,i,a,!1,null,null,null);g.options.__file="Forget.vue";e["default"]=g.exports}}]);